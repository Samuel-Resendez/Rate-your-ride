<html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Gradle</title><link href="style.css" rel="stylesheet" type="text/css"><meta content="DocBook XSL Stylesheets V1.75.2" name="generator"></head><body><div class="book" title="Gradle"><div xmlns:xslthl="http://xslthl.sf.net" class="titlepage"><div class="title"><div><h1 class="title"><a name="N10001"></a>Gradle</h1></div><div><h2 class="subtitle">A build system</h2></div><div><h3 class="releaseinfo">Version 0.8</h3></div></div><div><div class="author"><h3 class="author"><span class="firstname">Hans</span> <span class="surname">Dockter</span></h3></div></div><div><div class="author"><h3 class="author"><span class="firstname">Adam</span> <span class="surname">Murdoch</span></h3></div></div><div><p class="copyright">Copyright &copy; 2007-2009 Hans Dockter, Adam Murdoch</p></div><div><div class="legalnotice" title="Legal Notice"><a name="N1000E"></a><p>Copies of this document may be made for your own use and for distribution to others, provided that you
                do not charge any fee for such copies and further provided that each copy contains this Copyright
                Notice, whether distributed in print or electronically.
            </p></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#introduction">1. Introduction</a></span></dt><dd><dl><dt><span class="section"><a href="#N10053">1.1. About this user guide</a></span></dt></dl></dd><dt><span class="chapter"><a href="#overview">2. Overview</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:special_feature_of_gradle">2.1. Features</a></span></dt><dt><span class="section"><a href="#sec:why_groovy">2.2. Why Groovy?</a></span></dt><dt><span class="section"><a href="#sec:still_missing">2.3. Missing features</a></span></dt></dl></dd><dt><span class="chapter"><a href="#getting_started">3. Getting Started</a></span></dt><dd><dl><dt><span class="section"><a href="#N10103">3.1. Prerequisites</a></span></dt><dt><span class="section"><a href="#N10110">3.2. Download</a></span></dt><dt><span class="section"><a href="#N10119">3.3. Unpacking</a></span></dt><dt><span class="section"><a href="#N10133">3.4. Environment variables</a></span></dt><dt><span class="section"><a href="#N10144">3.5. Running and testing your installation</a></span></dt><dt><span class="section"><a href="#N10151">3.6. JVM options</a></span></dt></dl></dd><dt><span class="chapter"><a href="#tutorial_using_tasks">4. Build Script Basics</a></span></dt><dd><dl><dt><span class="section"><a href="#N10189">4.1. Hello world</a></span></dt><dt><span class="section"><a href="#N101DD">4.2. Build scripts are code</a></span></dt><dt><span class="section"><a href="#sec:task_dependencies">4.3. Task dependencies</a></span></dt><dt><span class="section"><a href="#N1024B">4.4. Dynamic tasks</a></span></dt><dt><span class="section"><a href="#N10263">4.5. Manipulating existing tasks</a></span></dt><dt><span class="section"><a href="#sec:shortcut_notations">4.6. Shortcut notations</a></span></dt><dt><span class="section"><a href="#sec:dynamic_properties">4.7. Dynamic task properties</a></span></dt><dt><span class="section"><a href="#N102DE">4.8. Using Ant Tasks</a></span></dt><dt><span class="section"><a href="#N10301">4.9. Using methods</a></span></dt><dt><span class="section"><a href="#sec:default_tasks">4.10. Default tasks</a></span></dt><dt><span class="section"><a href="#configure-by-dag">4.11. Configure by DAG</a></span></dt><dt><span class="section"><a href="#N10375">4.12. Summary</a></span></dt></dl></dd><dt><span class="chapter"><a href="#tutorial_java_projects">5. Java Quickstart</a></span></dt><dd><dl><dt><span class="section"><a href="#N10392">5.1. A basic Java project</a></span></dt><dt><span class="section"><a href="#sec:examples">5.2. Multi-project Java build</a></span></dt><dt><span class="section"><a href="#N10524">5.3. Summary</a></span></dt></dl></dd><dt><span class="chapter"><a href="#tutorial_groovy_projects">6. Groovy Quickstart</a></span></dt><dd><dl><dt><span class="section"><a href="#N1053F">6.1. A basic Groovy project</a></span></dt><dt><span class="section"><a href="#N1058F">6.2. Summary</a></span></dt></dl></dd><dt><span class="chapter"><a href="#web_project_tutorial">7. Web Application Quickstart</a></span></dt><dd><dl><dt><span class="section"><a href="#N105AA">7.1. Building a WAR file</a></span></dt><dt><span class="section"><a href="#N105D2">7.2. Running your web application</a></span></dt><dt><span class="section"><a href="#N105ED">7.3. Summary</a></span></dt></dl></dd><dt><span class="chapter"><a href="#artifact_dependencies_tutorial">8. Artifact Basics</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:artifact_configurations">8.1. Artifact configurations</a></span></dt><dt><span class="section"><a href="#N1063E">8.2. Repositories</a></span></dt><dt><span class="section"><a href="#N10680">8.3. External dependencies</a></span></dt><dt><span class="section"><a href="#N106B0">8.4. Artifact publishing</a></span></dt><dt><span class="section"><a href="#N106B5">8.5. API</a></span></dt></dl></dd><dt><span class="chapter"><a href="#tutorial_gradle_command_line">9. Using the Gradle Command-Line</a></span></dt><dd><dl><dt><span class="section"><a href="#N106D3">9.1. Executing multiple tasks</a></span></dt><dt><span class="section"><a href="#sec:excluding_tasks_from_the_command_line">9.2. Excluding tasks</a></span></dt><dt><span class="section"><a href="#N1073B">9.3. Task name abbreviation</a></span></dt><dt><span class="section"><a href="#N1076C">9.4. Selecting which build to execute</a></span></dt><dt><span class="section"><a href="#N1079A">9.5. Obtaining information about your build</a></span></dt><dt><span class="section"><a href="#N107CE">9.6. Dry Run</a></span></dt><dt><span class="section"><a href="#N107E2">9.7. Summary</a></span></dt></dl></dd><dt><span class="chapter"><a href="#tutorial_gradle_gui">10. Using the Gradle Graphical User Interface</a></span></dt><dd><dl><dt><span class="section"><a href="#N10810">10.1. Task Tree</a></span></dt><dt><span class="section"><a href="#N10826">10.2. Favorites</a></span></dt><dt><span class="section"><a href="#N1082D">10.3. Command Line</a></span></dt><dt><span class="section"><a href="#N10832">10.4. Setup</a></span></dt></dl></dd><dt><span class="chapter"><a href="#tutorial_this_and_that">11. Tutorial - 'This and That'</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:directory_creation">11.1. Directory creation</a></span></dt><dt><span class="section"><a href="#sec:gradle_properties_and_system_properties">11.2. Gradle properties and system properties</a></span></dt><dt><span class="section"><a href="#sec:accessing_the_web_via_a_proxy">11.3. Accessing the web via a proxy</a></span></dt><dt><span class="section"><a href="#sec:caching">11.4. Caching</a></span></dt><dt><span class="section"><a href="#sec:configuring_arbitrary_objects">11.5. Configuring arbitrary objects</a></span></dt></dl></dd><dt><span class="chapter"><a href="#project_and_task_api">12. The Project and Task API</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:project_api">12.1. Project API</a></span></dt><dt><span class="section"><a href="#sec:task_api">12.2. Task API</a></span></dt><dt><span class="section"><a href="#N10AD6">12.3. Summary</a></span></dt></dl></dd><dt><span class="chapter"><a href="#more_about_tasks">13. More about Tasks</a></span></dt><dd><dl><dt><span class="section"><a href="#N10AFE">13.1. Defining tasks</a></span></dt><dt><span class="section"><a href="#N10B3D">13.2. Locating tasks</a></span></dt><dt><span class="section"><a href="#sec:configuring_tasks">13.3. Configuring tasks</a></span></dt><dt><span class="section"><a href="#sec:adding_dependencies_to_tasks">13.4. Adding dependencies to a task</a></span></dt><dt><span class="section"><a href="#N10C73">13.5. Adding a description to a task</a></span></dt><dt><span class="section"><a href="#N10C87">13.6. Replacing tasks</a></span></dt><dt><span class="section"><a href="#N10CA7">13.7. Skipping tasks</a></span></dt><dt><span class="section"><a href="#N10D16">13.8. Task rules</a></span></dt><dt><span class="section"><a href="#sec:the_idea_behind_gradle_tasks">13.9. Summary</a></span></dt></dl></dd><dt><span class="chapter"><a href="#working_with_files">14. Working With Files</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:locating_files">14.1. Locating files</a></span></dt><dt><span class="section"><a href="#sec:file_collections">14.2. File collections</a></span></dt><dt><span class="section"><a href="#sec:file_trees">14.3. File trees</a></span></dt><dt><span class="section"><a href="#sec:specifying_multiple_files">14.4. Specifying a set of files</a></span></dt><dt><span class="section"><a href="#sec:copying_files">14.5. Copying files</a></span></dt></dl></dd><dt><span class="chapter"><a href="#logging">15. Logging</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:choosing_a_log_level">15.1. Choosing a log level</a></span></dt><dt><span class="section"><a href="#sec:sending_your_own_log_messages">15.2. Writing your own log messages</a></span></dt><dt><span class="section"><a href="#sec:external_tools">15.3. Logging from external tools and libraries</a></span></dt></dl></dd><dt><span class="chapter"><a href="#ant">16. Using Ant from Gradle</a></span></dt><dd><dl><dt><span class="section"><a href="#N1103C">16.1. Using Ant tasks and types in your build</a></span></dt><dt><span class="section"><a href="#N110EB">16.2. Importing an Ant build</a></span></dt><dt><span class="section"><a href="#N11155">16.3. Ant properties and references</a></span></dt><dt><span class="section"><a href="#N111B9">16.4. API</a></span></dt></dl></dd><dt><span class="chapter"><a href="#plugins">17. Using Plugins</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:using_plugins">17.1. Declaring plugins</a></span></dt><dt><span class="section"><a href="#sub:more_about_convention_objects">17.2. Using the convention object</a></span></dt><dt><span class="section"><a href="#N112BC">17.3. Summary</a></span></dt></dl></dd><dt><span class="chapter"><a href="#java_plugin">18. The Java Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N112C9">18.1. Source sets</a></span></dt><dt><span class="section"><a href="#N112E1">18.2. Tasks</a></span></dt><dt><span class="section"><a href="#N1158A">18.3. Project layout</a></span></dt><dt><span class="section"><a href="#sec:java_plugin_and_dependency_management">18.4. Dependency management</a></span></dt><dt><span class="section"><a href="#N11682">18.5. Convention properties</a></span></dt><dt><span class="section"><a href="#sec:source_sets">18.6. Working with source sets</a></span></dt><dt><span class="section"><a href="#sec:javadoc">18.7. Javadoc</a></span></dt><dt><span class="section"><a href="#sec:clean">18.8. Clean</a></span></dt><dt><span class="section"><a href="#sec:resources">18.9. Resources</a></span></dt><dt><span class="section"><a href="#sec:compile">18.10. CompileJava</a></span></dt><dt><span class="section"><a href="#sec:java_test">18.11. Test</a></span></dt><dt><span class="section"><a href="#N11CE1">18.12. Jar</a></span></dt><dt><span class="section"><a href="#N11CEF">18.13. Adding archives</a></span></dt><dt><span class="section"><a href="#sec:upload">18.14. Uploading</a></span></dt><dt><span class="section"><a href="#sec:eclipse">18.15. Eclipse</a></span></dt></dl></dd><dt><span class="chapter"><a href="#groovy_plugin">19. The Groovy Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N11F99">19.1. Tasks</a></span></dt><dt><span class="section"><a href="#N1204D">19.2. Project layout</a></span></dt><dt><span class="section"><a href="#N120F2">19.3. Dependency management</a></span></dt><dt><span class="section"><a href="#N12122">19.4. Convention properties</a></span></dt><dt><span class="section"><a href="#N12127">19.5. Source set properties</a></span></dt><dt><span class="section"><a href="#sec:groovyCompile">19.6. CompileGroovy</a></span></dt></dl></dd><dt><span class="chapter"><a href="#scala_plugin">20. The Scala Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N1225C">20.1. Tasks</a></span></dt><dt><span class="section"><a href="#N12322">20.2. Project layout</a></span></dt><dt><span class="section"><a href="#N123BD">20.3. Dependency Management</a></span></dt><dt><span class="section"><a href="#N123D1">20.4. Convention Properties</a></span></dt><dt><span class="section"><a href="#N123D6">20.5. Source set properties</a></span></dt></dl></dd><dt><span class="chapter"><a href="#war_plugin">21. The War Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N12481">21.1. Tasks</a></span></dt><dt><span class="section"><a href="#N124CB">21.2. Project layout</a></span></dt><dt><span class="section"><a href="#N124E5">21.3. Dependency management</a></span></dt><dt><span class="section"><a href="#N12511">21.4. Convention properties</a></span></dt><dt><span class="section"><a href="#sec:default_settings">21.5. War</a></span></dt><dt><span class="section"><a href="#sec:customizing">21.6. Customizing</a></span></dt><dt><span class="section"><a href="#sec:eclipse_wtp">21.7. Eclipse WTP</a></span></dt></dl></dd><dt><span class="chapter"><a href="#jetty_plugin">22. The Jetty Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N125CE">22.1. Tasks</a></span></dt><dt><span class="section"><a href="#N12639">22.2. Project layout</a></span></dt><dt><span class="section"><a href="#N1263E">22.3. Dependency management</a></span></dt><dt><span class="section"><a href="#N12643">22.4. Convention properties</a></span></dt></dl></dd><dt><span class="chapter"><a href="#maven_plugin">23. The Maven Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N126B1">23.1. Tasks</a></span></dt><dt><span class="section"><a href="#N126B6">23.2. Project layout</a></span></dt><dt><span class="section"><a href="#N126BB">23.3. Dependency management</a></span></dt><dt><span class="section"><a href="#N126C0">23.4. Convention properties</a></span></dt></dl></dd><dt><span class="chapter"><a href="#code_quality_plugin">24. The Code Quality Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N126E1">24.1. Tasks</a></span></dt><dt><span class="section"><a href="#N127C0">24.2. Project layout</a></span></dt><dt><span class="section"><a href="#N127E7">24.3. Dependency management</a></span></dt><dt><span class="section"><a href="#N127EC">24.4. Convention properties</a></span></dt></dl></dd><dt><span class="chapter"><a href="#osgi_plugin">25. The OSGi Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N12905">25.1. Tasks</a></span></dt><dt><span class="section"><a href="#N1290A">25.2. Project layout</a></span></dt><dt><span class="section"><a href="#N1290F">25.3. Dependency management</a></span></dt><dt><span class="section"><a href="#N12914">25.4. Convention properties</a></span></dt></dl></dd><dt><span class="chapter"><a href="#eclipse_plugin">26. The Eclipse Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N129A5">26.1. Usage</a></span></dt><dt><span class="section"><a href="#N129B3">26.2. Tasks</a></span></dt></dl></dd><dt><span class="chapter"><a href="#project_reports_plugin">27. The Project Report Plugin</a></span></dt><dd><dl><dt><span class="section"><a href="#N12A68">27.1. Tasks</a></span></dt><dt><span class="section"><a href="#N12AE8">27.2. Project layout</a></span></dt><dt><span class="section"><a href="#N12AED">27.3. Dependency management</a></span></dt><dt><span class="section"><a href="#N12AF2">27.4. Convention properties</a></span></dt></dl></dd><dt><span class="chapter"><a href="#dependency_management">28. Dependency Management</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:Introduction">28.1. Introduction</a></span></dt><dt><span class="section"><a href="#sec:dependency_management_overview">28.2. Dependency management overview</a></span></dt><dt><span class="section"><a href="#sec:how_to_declare_your_dependencies">28.3. How to declare your dependencies</a></span></dt><dt><span class="section"><a href="#N12D43">28.4. Working with dependencies</a></span></dt><dt><span class="section"><a href="#sec:repositories">28.5. Repositories</a></span></dt><dt><span class="section"><a href="#sec:strategies_of_transitive_dependency_management">28.6. Strategies for transitive dependency management</a></span></dt></dl></dd><dt><span class="chapter"><a href="#artifact_management">29. Artifact Management</a></span></dt><dd><dl><dt><span class="section"><a href="#N12F22">29.1. Introduction</a></span></dt><dt><span class="section"><a href="#artifacts_and_configurations">29.2. Artifacts and configurations</a></span></dt><dt><span class="section"><a href="#N12F55">29.3. Uploading artifacts</a></span></dt><dt><span class="section"><a href="#project_libraries">29.4. More about project libraries</a></span></dt><dt><span class="section"><a href="#uploading_to_maven_repositories">29.5. Interacting with Maven repositories</a></span></dt></dl></dd><dt><span class="chapter"><a href="#build_lifecycle">30. The Build Lifecycle</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:build_phases">30.1. Build phases</a></span></dt><dt><span class="section"><a href="#sec:settings_file">30.2. Settings file</a></span></dt><dt><span class="section"><a href="#sec:multi_project_builds">30.3. Multi-project builds</a></span></dt><dt><span class="section"><a href="#sec:initialization">30.4. Initialization</a></span></dt><dt><span class="section"><a href="#sec:configuration_and_execution_of_a_single_project_build">30.5. Configuration and execution of a single project build</a></span></dt><dt><span class="section"><a href="#build_lifecycle_events">30.6. Responding to the lifecycle in the build script</a></span></dt></dl></dd><dt><span class="chapter"><a href="#multi_project_builds">31. Multi-project Builds</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:cross_project_configuration">31.1. Cross project configuration</a></span></dt><dt><span class="section"><a href="#sec:subproject_configuration">31.2. Subproject configuration</a></span></dt><dt><span class="section"><a href="#sec:execution_rules_for_multi_project_builds">31.3. Execution rules for multi-project builds</a></span></dt><dt><span class="section"><a href="#sec:running_partial_build_from_the_root">31.4. Running tasks by their absolute path</a></span></dt><dt><span class="section"><a href="#sec:project_and_task_paths">31.5. Project and task paths</a></span></dt><dt><span class="section"><a href="#sec:dependencies_which_dependencies">31.6. Dependencies - Which dependencies?</a></span></dt><dt><span class="section"><a href="#sec:project_jar_dependencies">31.7. Project lib dependencies</a></span></dt><dt><span class="section"><a href="#sec:multiproject_build_and_test">31.8. Multi-Project Building and Testing</a></span></dt><dt><span class="section"><a href="#sec:property_and_method_inheritance">31.9. Property and method inheritance</a></span></dt><dt><span class="section"><a href="#N138A9">31.10. Summary</a></span></dt></dl></dd><dt><span class="chapter"><a href="#custom_tasks">32. Writing Custom Tasks</a></span></dt><dt><span class="chapter"><a href="#custom_plugins">33. Writing Custom Plugins</a></span></dt><dt><span class="chapter"><a href="#organizing_build_logic">34. Organizing Build Logic</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:build_sources">34.1. Build sources</a></span></dt><dt><span class="section"><a href="#sec:external_dependencies">34.2. External dependencies for the build script</a></span></dt><dt><span class="section"><a href="#sec:ant_optional_dependencies">34.3. Ant optional dependencies</a></span></dt><dt><span class="section"><a href="#sec:philosophy">34.4. Summary</a></span></dt></dl></dd><dt><span class="chapter"><a href="#init_scripts">35. Initialization Scripts</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:basic_usage">35.1. Basic usage</a></span></dt><dt><span class="section"><a href="#sec:custom_classpath">35.2. External dependencies for the init script</a></span></dt></dl></dd><dt><span class="chapter"><a href="#gradle_wrapper">36. The Gradle Wrapper</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:configuration">36.1. Configuration</a></span></dt><dt><span class="section"><a href="#sec:unix_file_permissions">36.2. Unix file permissions</a></span></dt><dt><span class="section"><a href="#sec:environment_variable">36.3. Environment variable</a></span></dt></dl></dd><dt><span class="chapter"><a href="#embedding">37. Embedding Gradle</a></span></dt><dt><span class="appendix"><a href="#potential_traps">A. Potential Traps</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:groovy_script_variables">A.1. Groovy script variables</a></span></dt><dt><span class="section"><a href="#sec:configuration_and_execution_phase">A.2. Configuration and execution phase</a></span></dt></dl></dd><dt><span class="appendix"><a href="#gradle_command_line">B. Gradle Command Line</a></span></dt><dt><span class="appendix"><a href="#ide_support">C. Existing IDE Support and how to cope without it</a></span></dt><dd><dl><dt><span class="section"><a href="#sec:intellij">C.1. IntelliJ</a></span></dt><dt><span class="section"><a href="#N13D1C">C.2. Eclipse</a></span></dt><dt><span class="section"><a href="#sec:using_gradle_without_ide_support">C.3. Using Gradle without IDE support</a></span></dt></dl></dd></dl></div><div class="list-of-examples"><p><b>List of Examples</b></p><dl><dt>4.1. <a href="#hello">The first build script</a></dt><dt>4.2. <a href="#hello">Execution of a build script</a></dt><dt>4.3. <a href="#upper">Using Groovy in Gradle's tasks</a></dt><dt>4.4. <a href="#count">Using Groovy in Gradle's tasks</a></dt><dt>4.5. <a href="#intro">Declaration of dependencies between tasks</a></dt><dt>4.6. <a href="#lazyDependsOn">Lazy dependsOn - the other task does not exist (yet)</a></dt><dt>4.7. <a href="#dynamic">Dynamic creation of a task</a></dt><dt>4.8. <a href="#dynamicDepends">Accessing a task via API - adding a dependency</a></dt><dt>4.9. <a href="#helloEnhanced">Accessing a task via API - adding behaviour</a></dt><dt>4.10. <a href="#helloWithShortCut">Accessing task as a property of the build script</a></dt><dt>4.11. <a href="#dynamicProperties">Assigning properties to a task</a></dt><dt>4.12. <a href="#antChecksum">Using AntBuilder to execute ant.checksum target</a></dt><dt>4.13. <a href="#antChecksumWithMethod">Using methods to organize your build logic</a></dt><dt>4.14. <a href="#defaultTasks">Defining a default tasks</a></dt><dt>4.15. <a href="#configByDagNoRelease">Different outcomes of build depending on chosen tasks</a></dt><dt>5.1. <a href="#javaQuickstart">Using the Java plugin</a></dt><dt>5.2. <a href="#javaQuickstart">Building a Java project</a></dt><dt>5.3. <a href="#javaQuickstart">Adding Maven repository</a></dt><dt>5.4. <a href="#javaQuickstart">Adding dependencies</a></dt><dt>5.5. <a href="#javaQuickstart">Customization of MANIFEST.MF</a></dt><dt>5.6. <a href="#javaQuickstart">Adding system property</a></dt><dt>5.7. <a href="#javaQuickstart">Publishing the JAR file</a></dt><dt>5.8. <a href="#javaQuickstart">Eclipse plugin</a></dt><dt>5.9. <a href="#javaQuickstart">Java example - complete build file</a></dt><dt>5.10. <a href="#javaMultiProject">Multi-project build - hierarchical layout</a></dt><dt>5.11. <a href="#javaMultiProject">Multi-project build - settings.gradle file</a></dt><dt>5.12. <a href="#javaMultiProject">Multi-project build - common configuration</a></dt><dt>5.13. <a href="#javaMultiProject">Multi-project build - dependencies between projects</a></dt><dt>5.14. <a href="#javaMultiProject">Multi-project build - distribution file</a></dt><dt>6.1. <a href="#groovyQuickstart">Groovy plugin</a></dt><dt>6.2. <a href="#groovyQuickstart">Dependency on Groovy 1.6.0</a></dt><dt>6.3. <a href="#groovyQuickstart">Groovy example - complete build file</a></dt><dt>7.1. <a href="#webQuickstart">War plugin</a></dt><dt>7.2. <a href="#webQuickstart">Running web application with Jetty plugin</a></dt><dt>8.1. <a href="#defineConfiguration">Definition of a configuration</a></dt><dt>8.2. <a href="#defineConfiguration">Accessing a configuration</a></dt><dt>8.3. <a href="#defineConfiguration">Configuration of a configuration</a></dt><dt>8.4. <a href="#defineRepository">Usage of Maven central repository</a></dt><dt>8.5. <a href="#defineRepository">Usage of a local directory</a></dt><dt>8.6. <a href="#defineRepository">Accessing a repository</a></dt><dt>8.7. <a href="#defineRepository">Configuration of a repository</a></dt><dt>8.8. <a href="#externalDependencies">Definition of an external dependency</a></dt><dt>8.9. <a href="#externalDependencies">Usage of external dependency of a configuration</a></dt><dt>9.1. <a href="#multipleTasksFromCommandLine">Executing multiple tasks</a></dt><dt>9.2. <a href="#excludeTask">Excluding tasks</a></dt><dt>9.3. <a href="#abbreviateTaskName">Abbreviated task name</a></dt><dt>9.4. <a href="#abbreviateCamelCaseTaskName">Abbreviated camel case task name</a></dt><dt>9.5. <a href="#selectProjectUsingBuildFile">Selecting the project using a build file</a></dt><dt>9.6. <a href="#selectProjectUsingProjectDir">Selecting the project using project directory</a></dt><dt>9.7. <a href="#taskListReport">Obtaining information about tasks</a></dt><dt>9.8. <a href="#dependencyListReport">Obtaining information about dependencies</a></dt><dt>10.1. <a href="#N107F8">Launching the GUI</a></dt><dt>11.1. <a href="#makeDirectory">Directory creation with mkdir</a></dt><dt>11.2. <a href="#directoryTask">Directory creation with Directory tasks</a></dt><dt>11.3. <a href="#properties">Setting properties with a gradle.properties file</a></dt><dt>11.4. <a href="#N1092A">Accessing the web via a proxy</a></dt><dt>11.5. <a href="#configureObject">Configuring arbitrary objects</a></dt><dt>12.1. <a href="#projectApi">Accessing property of the Project object</a></dt><dt>12.2. <a href="#projectCoreProperties">Project properties</a></dt><dt>13.1. <a href="#defineAsExpression">Defining tasks</a></dt><dt>13.2. <a href="#defineUsingStringTaskNames">Defining tasks - using strings</a></dt><dt>13.3. <a href="#addToTaskContainer">Defining tasks with alternative syntax</a></dt><dt>13.4. <a href="#accessAsProperty">Accessing tasks as properties</a></dt><dt>13.5. <a href="#accessFromTaskContainer">Accessing tasks via tasks collection</a></dt><dt>13.6. <a href="#accessUsingPath">Accessing tasks by path</a></dt><dt>13.7. <a href="#declareTask">Creating a copy task</a></dt><dt>13.8. <a href="#configureUsingVar">Configuring a task - various ways</a></dt><dt>13.9. <a href="#configureUsingLiterateStyle">Configuring a task - fluent interface</a></dt><dt>13.10. <a href="#configureUsingClosure">Configuring a task - with closure</a></dt><dt>13.11. <a href="#configureUsingConfigure">Configuring a task - with configure() method</a></dt><dt>13.12. <a href="#defineAndConfigure">Defining a task with closure</a></dt><dt>13.13. <a href="#addDependencyUsingPath">Adding dependency on task from another project</a></dt><dt>13.14. <a href="#addDependencyUsingTask">Adding dependency using task object</a></dt><dt>13.15. <a href="#addDependencyUsingClosure">Adding dependency using closure</a></dt><dt>13.16. <a href="#describeTask">Adding a description to a task</a></dt><dt>13.17. <a href="#replaceTask">Overwriting a task</a></dt><dt>13.18. <a href="#taskOnlyIf">Skipping a task using a predicate</a></dt><dt>13.19. <a href="#stopExecutionException">Skipping tasks with StopExecutionException</a></dt><dt>13.20. <a href="#disableTask">Enabling and disabling tasks</a></dt><dt>13.21. <a href="#taskRule">Task rule</a></dt><dt>13.22. <a href="#taskRuleDependsOn">Dependency on rule based tasks</a></dt><dt>14.1. <a href="#resolveFile">Locating files</a></dt><dt>14.2. <a href="#fileCollections">Creating a file collection</a></dt><dt>14.3. <a href="#fileCollections">Using a file collection</a></dt><dt>14.4. <a href="#fileCollections">Implementing a file collection</a></dt><dt>14.5. <a href="#fileTrees">Creating a file tree</a></dt><dt>14.6. <a href="#fileTrees">Using a file tree</a></dt><dt>14.7. <a href="#inputFiles">Specifying a set of files</a></dt><dt>14.8. <a href="#inputFiles">Specifying a set of files</a></dt><dt>14.9. <a href="#copy">Copying files using the copy task</a></dt><dt>14.10. <a href="#copy">Copying files using the copy() method</a></dt><dt>15.1. <a href="#logging_to_stdout">Using stdout to write log messages</a></dt><dt>15.2. <a href="#logging_ex">Writing your own log messages</a></dt><dt>15.3. <a href="#logging_with_slf4j">Using SLF4J to write log messages</a></dt><dt>15.4. <a href="#project_stdout_capture">Configuring standard output capture</a></dt><dt>15.5. <a href="#task_stdout_capture">Configuring standard output capture for a task</a></dt><dt>16.1. <a href="#useAntTask">Using an Ant task</a></dt><dt>16.2. <a href="#taskWithNestedText">Passing nested text to an Ant task</a></dt><dt>16.3. <a href="#taskWithNestedElements">Passing nested elements to an Ant task</a></dt><dt>16.4. <a href="#useAntType">Using an Ant type</a></dt><dt>16.5. <a href="#useExternalAntTask">Using a custom Ant task</a></dt><dt>16.6. <a href="#useExternalAntTaskWithConfig">Declaring the classpath for a custom Ant task</a></dt><dt>16.7. <a href="#useExternalAntTaskWithConfig">Using a custom Ant task and dependency management together</a></dt><dt>16.8. <a href="#antHello">Importing an Ant build</a></dt><dt>16.9. <a href="#dependsOnAntTarget">Task that depends on Ant target</a></dt><dt>16.10. <a href="#addBehaviourToAntTarget">Adding behaviour to an Ant target</a></dt><dt>16.11. <a href="#dependsOnTask">Ant target that depends on Gradle task</a></dt><dt>16.12. <a href="#antProperties">Setting an Ant property</a></dt><dt>16.13. <a href="#antProperties">Getting an Ant property</a></dt><dt>16.14. <a href="#antProperties">Setting an Ant reference</a></dt><dt>16.15. <a href="#antProperties">Getting an Ant reference</a></dt><dt>17.1. <a href="#pluginIntro">Using plugin</a></dt><dt>17.2. <a href="#pluginConfig">Configuring a plugin task</a></dt><dt>17.3. <a href="#pluginConvention">Plugin convention object</a></dt><dt>17.4. <a href="#pluginAccessConvention">Using the plugin convention object</a></dt><dt>18.1. <a href="#customJavaSourceLayout">Custom Java source layout</a></dt><dt>18.2. <a href="#defineSourceSet">Accessing a source set</a></dt><dt>18.3. <a href="#configureSourceSet">Configuring the source directories of a source set</a></dt><dt>18.4. <a href="#defineSourceSet">Defining a source set</a></dt><dt>18.5. <a href="#configureSourceSet">Defining the classpath of a source set</a></dt><dt>18.6. <a href="#configureSourceSet">Assembling a JAR for a source set</a></dt><dt>18.7. <a href="#configureSourceSet">Generating the Javadoc for a source set</a></dt><dt>18.8. <a href="#configureSourceSet">Running tests in a source set</a></dt><dt>18.9. <a href="#zip">Creation of ZIP archive</a></dt><dt>18.10. <a href="#zipWithCustomName">Configuration of archive task - custom archive name</a></dt><dt>18.11. <a href="#zipWithArguments">Configuration of archive task - appendix &amp; classifier</a></dt><dt>18.12. <a href="#archiveContent">Adding content to archive - include &amp; exclude</a></dt><dt>18.13. <a href="#archiveContent">Adding content to archive - arbitrary files</a></dt><dt>18.14. <a href="#archiveContent">Adding content to archive - zipFileSet</a></dt><dt>18.15. <a href="#archiveContent">Creation of TAR archive</a></dt><dt>18.16. <a href="#manifest">Customization of MANIFEST.MF</a></dt><dt>18.17. <a href="#manifest">Customization of MANIFEST.MF for a particular archive</a></dt><dt>19.1. <a href="#customGroovySourceLayout">Custom Groovy source layout</a></dt><dt>19.2. <a href="#quickstartGroovyDependency">Configuration of Groovy plugin</a></dt><dt>19.3. <a href="#flatDirGroovyDependency">Configuration of Groovy plugin</a></dt><dt>20.1. <a href="#customScalaSourceLayout">Custom Scala source layout</a></dt><dt>20.2. <a href="#declareScalaTools">Declaring the Scala version to use</a></dt><dt>21.1. <a href="#webproject">Customization of war plugin</a></dt><dt>21.2. <a href="#customisedWebApplication">Generation of JAR archive in addition to WAR archive</a></dt><dt>25.1. <a href="#osgi">Configuration of OSGi MANIFEST.MF file</a></dt><dt>28.1. <a href="#moduleDependencies">Module dependencies</a></dt><dt>28.2. <a href="#artifactOnly">Artifact only notation</a></dt><dt>28.3. <a href="#classifier">Dependency with classifier</a></dt><dt>28.4. <a href="#client-modules">Client module dependencies - transitive dependencies</a></dt><dt>28.5. <a href="#project-dependencies">Project dependencies</a></dt><dt>28.6. <a href="#file-dependencies">File dependencies</a></dt><dt>28.7. <a href="#generatedFileDependencies">Generated file dependencies</a></dt><dt>28.8. <a href="#exclude-dependencies">Excluding transitive dependencies</a></dt><dt>28.9. <a href="#dependenciesWithEmptyAttributes">Optional attributes of dependencies</a></dt><dt>28.10. <a href="#listGrouping">Collections and arrays of dependencies</a></dt><dt>28.11. <a href="#dependencyConfigurations">Dependency configurations</a></dt><dt>28.12. <a href="#dependencyConfigurationsProjects">Dependency configurations for project</a></dt><dt>28.13. <a href="#configurationHandlingSetup">Configuration.copy</a></dt><dt>28.14. <a href="#configurationHandlingDependencies">Accessing declared dependencies</a></dt><dt>28.15. <a href="#configurationHandlingAllFiles">Configuration.files</a></dt><dt>28.16. <a href="#configurationHandlingFiles">Configuration.files with spec</a></dt><dt>28.17. <a href="#configurationHandlingCopy">Configuration.copy</a></dt><dt>28.18. <a href="#configurationHandlingCopyVsFiles">Configuration.copy vs. Configuration.files</a></dt><dt>28.19. <a href="#mavenCentral">Adding central Maven repository</a></dt><dt>28.20. <a href="#mavenCentralJarRepo">Adding many Maven repositories</a></dt><dt>28.21. <a href="#mavenLikeRepo">Adding custom Maven repository</a></dt><dt>28.22. <a href="#mavenLikeRepoWithJarRepo">Adding additional Maven repositories for JAR files</a></dt><dt>28.23. <a href="#mavenPasswordProtectedRepo">Accessing password protected Maven repository</a></dt><dt>28.24. <a href="#flatDirMulti">Flat repository resolver</a></dt><dt>28.25. <a href="#fileSystemResolver">Definition of a custom repository</a></dt><dt>29.1. <a href="#assignArtifact">Assignment of an artifact to a configuration</a></dt><dt>29.2. <a href="#uploading">Configuration of the upload task</a></dt><dt>29.3. <a href="#uploadFile">Upload of file to remote Maven repository</a></dt><dt>29.4. <a href="#uploadWithSsh">Upload of file via SSH</a></dt><dt>29.5. <a href="#customizePom">Customization of pom</a></dt><dt>29.6. <a href="#customizeInstaller">Customization of Maven installer</a></dt><dt>29.7. <a href="#multiplePoms">Generation of multiple poms</a></dt><dt>29.8. <a href="#mappings">Accessing a mapping configuration</a></dt><dt>30.1. <a href="#buildlifecycle">Single project build</a></dt><dt>30.2. <a href="#standardLayouts">Hierarchical layout</a></dt><dt>30.3. <a href="#standardLayouts">Flat layout</a></dt><dt>30.4. <a href="#customLayout">Modification of elements of the project tree</a></dt><dt>30.5. <a href="#customLayout">Modification of elements of the project tree</a></dt><dt>30.6. <a href="#projectEvaluateEvents">Adding of test task to each project which has certain property set</a></dt><dt>30.7. <a href="#buildProjectEvaluateEvents">Notifications</a></dt><dt>30.8. <a href="#taskCreationEvents">Setting of certain property to all tasks</a></dt><dt>30.9. <a href="#taskExecutionEvents">Logging of start and end of each task execution</a></dt><dt>31.1. <a href="#multiprojectFirstExample">Multi-project tree - water &amp; bluewhale projects</a></dt><dt>31.2. <a href="#multiprojectFirstExample">Build script of water (parent) project</a></dt><dt>31.3. <a href="#multiprojectAddKrill">Multi-project tree - water, bluewhale  &amp; krill projects</a></dt><dt>31.4. <a href="#multiprojectAddKrill">Water project build script</a></dt><dt>31.5. <a href="#multiprojectUseSubprojects">Defining common behaviour of all projects and subprojects</a></dt><dt>31.6. <a href="#multiprojectSubprojectsAddFromTop">Defining specific behaviour for particular project</a></dt><dt>31.7. <a href="#multiprojectSpreadSpecifics">Defining specific behaviour for project krill</a></dt><dt>31.8. <a href="#multiprojectAddTropical">Adding custom behaviour to some projects (filtered by project name)</a></dt><dt>31.9. <a href="#multiprojectTropicalWithProperties">Adding custom behaviour to some projects (filtered by project properties)</a></dt><dt>31.10. <a href="#multiprojectSubBuild">Running build from subproject</a></dt><dt>31.11. <a href="#multiprojectPartialTasks">Evaluation and execution of projects</a></dt><dt>31.12. <a href="#multiprojectPartialTasksNotQuiet">Evaluation and execution of projects</a></dt><dt>31.13. <a href="#multiprojectAbsoluteTaskPaths">Running tasks by their absolute path</a></dt><dt>31.14. <a href="#multiprojectFirstMessages">Dependencies and execution order</a></dt><dt>31.15. <a href="#multiprojectMessagesHack">Dependencies and execution order</a></dt><dt>31.16. <a href="#multiprojectMessagesHackBroken">Dependencies and execution order</a></dt><dt>31.17. <a href="#multiprojectMessagesDependencies">Declaring dependencies</a></dt><dt>31.18. <a href="#multiprojectMessagesDependenciesSubBuild">Declaring dependencies</a></dt><dt>31.19. <a href="#multiprojectMessagesDifferentTaskNames">Project execution dependencies</a></dt><dt>31.20. <a href="#multiprojectMessagesTaskDependencies">Cross project task dependencies</a></dt><dt>31.21. <a href="#multiprojectMessagesConfigDependenciesBroken">Configuration time dependencies</a></dt><dt>31.22. <a href="#multiprojectMessagesConfigDependencies">Configuration time dependencies - evaluationDependsOn</a></dt><dt>31.23. <a href="#multiprojectMessagesConfigDependenciesAltSolution">Configuration time dependencies</a></dt><dt>31.24. <a href="#webdist">Dependencies - real life example - crossproject configuration</a></dt><dt>31.25. <a href="#javadependencies_1">Project lib dependencies</a></dt><dt>31.26. <a href="#javadependencies_2">Project lib dependencies</a></dt><dt>31.27. <a href="#javaWithCustomConf">Fine grained control over dependencies</a></dt><dt>31.28. <a href="#multitestingBuild">Build and Test Single Project</a></dt><dt>31.29. <a href="#multitestingBuildDashA">Partial Build and Test Single Project</a></dt><dt>31.30. <a href="#multitestingBuildNeeded">Build and Test Depended On Projects</a></dt><dt>31.31. <a href="#multitestingBuildDependents">Build and Test Dependent Projects</a></dt><dt>32.1. <a href="#customTask">Defining a custom task</a></dt><dt>32.2. <a href="#customTaskWithAction">A hello world task</a></dt><dt>32.3. <a href="#customTaskWithProperty">A customizable hello world task</a></dt><dt>33.1. <a href="#customPlugin">A custom plugin</a></dt><dt>33.2. <a href="#customPluginWithConvention">A custom plugin convention</a></dt><dt>34.1. <a href="#declareExternalBuildDependency">Declaring external dependencies for the build script</a></dt><dt>34.2. <a href="#externalBuildDependency">A build script with external dependencies</a></dt><dt>34.3. <a href="#buildLogic">Ant optional dependencies</a></dt><dt>35.1. <a href="#declareExternalInitDependency">Declaring external dependencies for an init script</a></dt><dt>35.2. <a href="#externalInitDependency">An init script with external dependencies</a></dt><dt>36.1. <a href="#wrapperSimple">Wrapper task</a></dt><dt>36.2. <a href="#wrapperCustomized">Configuration of wrapper task</a></dt><dt>A.1. <a href="#scope">Variables scope: local and script wide</a></dt><dt>A.2. <a href="#mkdirTrap">Distinct configuration and execution phase</a></dt></dl></div><div class="chapter" title="Chapter&nbsp;1.&nbsp;Introduction"><div class="titlepage"><div><div><h1><a name="introduction"></a>Chapter&nbsp;1.&nbsp;Introduction</h1></div></div></div><p>We would like to introduce Gradle to you, a build system that we think is a quantum leap for build technology
        in the Java (JVM) world. Gradle provides:
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>A very flexible general purpose build tool like Ant.
            </p></li><li class="listitem"><p>Switchable, build-by-convention frameworks a la Maven. But we never lock you in!
            </p></li><li class="listitem"><p>Very powerful support for multi-project builds.
            </p></li><li class="listitem"><p>Very powerful dependency management (based on Apache Ivy).
            </p></li><li class="listitem"><p>Full support for your existing Maven or Ivy repository infrastructure.
            </p></li><li class="listitem"><p>Support for transitive dependency management without the need for remote repositories or
                <code class="literal">pom.xml</code> and <code class="literal">ivy.xml</code>
                files.
            </p></li><li class="listitem"><p>Ant tasks and builds as first class citizens.
            </p></li><li class="listitem"><p>
                <span class="emphasis"><em>Groovy</em></span> build scripts.
            </p></li><li class="listitem"><p>A rich domain model for describing your build.
            </p></li></ul></div><p>
        In <a class="xref" href="#overview" title="Chapter&nbsp;2.&nbsp;Overview">Chapter&nbsp;2, <i>Overview</i></a> you will find a detailed overview of Gradle. Otherwise, the
        <a class="link" href="#getting_started" title="Chapter&nbsp;3.&nbsp;Getting Started">tutorials</a> are waiting, have fun :)
    </p><div class="section" title="1.1.&nbsp;About this user guide"><div class="titlepage"><div><div><h2 class="title"><a name="N10053"></a>1.1.&nbsp;About this user guide</h2></div></div></div><p>This user guide, like Gradle itself, is under very active development. Some parts of Gradle aren't
            documented as completely as they need to be. Some of the content presented won't be entirely clear or
            will assume that you know more about Gradle than you do. We need your help to improve this user
            guide. You can find out more about contributing to the documentation at the Gradle
            <a class="ulink" href="http://www.gradle.org/contributing.html" target="_top">web site</a>.
        </p><p>You can find more examples, and some additions to this user guide, on the
            <a class="ulink" href="http://docs.codehaus.org/display/GRADLE/User+guide" target="_top">wiki</a>.
            You can also contribute your own examples and extra content there.
        </p></div></div><div class="chapter" title="Chapter&nbsp;2.&nbsp;Overview"><div class="titlepage"><div><div><h1><a name="overview"></a>Chapter&nbsp;2.&nbsp;Overview</h1></div></div></div><div class="section" title="2.1.&nbsp;Features"><div class="titlepage"><div><div><h2 class="title"><a name="sec:special_feature_of_gradle"></a>2.1.&nbsp;Features</h2></div></div></div><p>Here is a list of some of Gradle's features.
        </p><div class="variablelist"><dl><dt><span class="term">Language for Dependency Based Programming</span></dt><dd><p>This is the core of Gradle. Most build tools do offer such a thing. You can create tasks,
                        create dependencies between them and those tasks get executed only once and in the right order.
                        Yet compared to Ant
                        <sup>[<a href="#ftn.N10075" name="N10075" class="footnote">1</a>]</sup>
                        Gradle's task offer a rich API and can be any kind of object. Gradle's tasks support
                        multi-project builds. There is much more to say about tasks later on.
                    </p></dd><dt><span class="term">Flexible Build By Convention</span></dt><dd><p>Gradle offers you build-by-convention
                        <span class="emphasis"><em>on top</em></span>
                        of its core layer. It is the same idea as implemented by Maven. But Gradle's build-by-convention
                        approach is highly configurable and flexible. And you don't have to use it, if you need utmost
                        flexibility. You can enable/disable it on a per project basis in a multi-project build.
                    </p></dd><dt><span class="term">Ant Tasks</span></dt><dd><p>Ant tasks are first class citizens. Using Ant tasks from Gradle is as convenient and more
                        powerful than using Ant tasks from a
                        <code class="literal">build.xml</code>
                        file.
                    </p></dd><dt><span class="term">Configure By DAG</span></dt><dd><p>Gradle has a distinct configuration and execution phase. Thus we can offer you special hooks.
                        You can add configuration to your build, based on the complete execution graph of tasks, before
                        any task is executed.
                    </p></dd><dt><span class="term">Easy Ivy</span></dt><dd><p>Our dependency management is based on Apache Ivy, the most advanced and powerful dependency
                        management in the Java world. We have Ivy integrated in our build-by-convention framework. It is
                        ready to go out-of-the-box. Ivy is mostly used via its Ant tasks but it also provides an API.
                        Gradle integrates deeply with Ivy via this API. Gradle has its own dependency DSL on top of Ivy.
                        This DSL introduces a couple of features not provided by Ivy itself.
                    </p></dd><dt><span class="term">Client Modules</span></dt><dd><p>We think dependency management is important to any project.
                        <span class="emphasis"><em>Client Modules</em></span>
                        provide this, without the need of remote repositories and
                        <code class="literal">ivy.xml</code>
                        or
                        <code class="literal">pom.xml</code>
                        files. For example you can just put your jars into svn and yet enjoy complete transitive
                        dependency management. Gradle also support fully Ivy or Maven repository infrastructures based
                        on
                        <code class="literal">ivy.xml</code>
                        or
                        <code class="literal">pom.xml</code>
                        files and remote repositories.
                    </p></dd><dt><span class="term">Cross Project Configuration</span></dt><dd><p>Enjoy how easy and yet how extremely powerful the handling of multi-project builds can be.
                        Gradle introduces
                        <span class="emphasis"><em>Configuration Injection</em></span>
                        to make this possible.
                    </p></dd><dt><span class="term">Distinct Dependency Hierarchies</span></dt><dd><p>We allow you to model the project relationships in a multi-project build as they really are
                        for your problem domain. Gradle follows your layout not vice versa.
                    </p></dd><dt><span class="term">Partial Builds</span></dt><dd><p>With Maven multi-project builds only work if executed from the root project and thus requiring
                        a complete build. If you build from a subproject, only the subproject is built, not the projects
                        the subproject depends on. Gradle offers partial builds. The subproject is built plus the
                        projects it depends on. This is very convenient for larger builds.
                    </p></dd><dt><span class="term">Internal Groovy DSL</span></dt><dd><p>Gradle's build scripts are written in Groovy, not XML. This offers many advantages to XML:
                        Rich interaction with existing libraries, ease of use, more power and a slower learning curve
                        are some of them.
                    </p></dd><dt><span class="term">The Gradle Wrapper</span></dt><dd><p>The Gradle Wrapper allows you to execute Gradle builds on machines where Gradle is not
                        installed. For example continuous integration servers or machines of users which want to build
                        your open source project.
                    </p></dd></dl></div><p>Gradle scales very well. It significantly increases your productivity, from rather simple single project
            builds up to huge enterprise multi-project builds.
        </p><p>Gradle is build by Gradle. From a build perspective Gradle is a simple project. But achieving the high
            degree of automation we have, would have been very hard (and expensive) to achieve with Ant or Maven.
        </p></div><div class="section" title="2.2.&nbsp;Why Groovy?"><div class="titlepage"><div><div><h2 class="title"><a name="sec:why_groovy"></a>2.2.&nbsp;Why Groovy?</h2></div></div></div><p>We think the advantages of an internal DSL (based on a dynamic language) over XML are tremendous in case
            of <span class="emphasis"><em>build scripts</em></span>. There are a couple of dynamic languages out there. Why Groovy? The
            answer lies in the context Gradle is operating in. Although Gradle is a general purpose build tool at its
            core, its main focus are Java projects.
            <sup>[<a href="#ftn.N100DA" name="N100DA" class="footnote">2</a>]</sup>
            In such projects obviously the team members know Java. One problem we see with Ant
            <sup>[<a href="#ftn.N100DE" name="N100DE" class="footnote">3</a>]</sup>
            and Maven is, that it involves a lot of knowledge only available to the build master. Such builds are very
            hard to comprehend, let alone to modify by a person not deeply involved with those tools. We think a build
            should be as transparent as possible to
            <span class="emphasis"><em>all</em></span>
            team members.
        </p><p>You might argue why not using Java then as the language for build scripts. We think this is a valid
            question. It would have the highest transparency for your team and the lowest learning curve. But due to
            limitations of Java such a build language would not be as nice, expressive and powerful as it could be.
            <sup>[<a href="#ftn.N100E7" name="N100E7" class="footnote">4</a>]</sup>
            Languages like Python, Groovy or Ruby do a much better job here. We have chosen Groovy as it offers by far
            the highest transparency for Java people. Its base syntax is the same as Java's as well as its type system,
            its package structure other things. Groovy builds a lot on top of that. But on a common ground with Java.
        </p><p>For Java teams which share also Python or Ruby knowledge or are happy to learn it the above arguments
            don't apply. In the near future Gradle wants to give you a choice between different languages for your build
            scripts. For Jython or JRuby this should be easy to implement. If members of those communities are
            interested in joining this effort, this is very much appreciated.
        </p></div><div class="section" title="2.3.&nbsp;Missing features"><div class="titlepage"><div><div><h2 class="title"><a name="sec:still_missing"></a>2.3.&nbsp;Missing features</h2></div></div></div><p>Here a list of features you might expect but are not available yet:
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Creating IDE project and classpath files for IntelliJ and NetBeans. Gradle supports IDE project
                    file generation for Eclipse.
                </p></li><li class="listitem"><p>Integration with code coverage tools, such as Emma or Cobertura, and static analysis tools, such
                    as Checkstyle, in our build-by-convention framework. Right now you have to integrate them yourself
                    (for example using the Ant tasks for those tools).
                </p></li></ul></div></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N10075" name="ftn.N10075" class="para">1</a>] </sup>We mean Ant's targets here.
                            </p></div><div class="footnote"><p><sup>[<a href="#N100DA" name="ftn.N100DA" class="para">2</a>] </sup>Gradle also supports Groovy projects. Gradle will support Scala projects in a future release.
                </p></div><div class="footnote"><p><sup>[<a href="#N100DE" name="ftn.N100DE" class="para">3</a>] </sup>If the advanced features are used (e.g. mixins, macrodefs, ...)
                </p></div><div class="footnote"><p><sup>[<a href="#N100E7" name="ftn.N100E7" class="para">4</a>] </sup>At
                    <a class="ulink" href="http://www.defmacro.org/ramblings/lisp.html" target="_top">http://www.defmacro.org/ramblings/lisp.html</a>
                    you find an interesting article comparing Ant, XML, Java and Lisp. It's funny that the 'if Java had
                    that syntax' syntax in this article is actually the Groovy syntax.
                </p></div></div></div><div class="chapter" title="Chapter&nbsp;3.&nbsp;Getting Started"><div class="titlepage"><div><div><h1><a name="getting_started"></a>Chapter&nbsp;3.&nbsp;Getting Started</h1></div></div></div><div class="section" title="3.1.&nbsp;Prerequisites"><div class="titlepage"><div><div><h2 class="title"><a name="N10103"></a>3.1.&nbsp;Prerequisites</h2></div></div></div><p>Gradle requires a Java JDK to be installed. Gradle ships with its own Groovy library, therefore no Groovy
        needs to be installed. Any existing Groovy installation is ignored by Gradle. The standard Gradle distribution
        requires a JDK 1.5 or higher. We also provide a distinct JDK 1.4 compatible distribution.
    </p><p>Gradle uses whichever JDK it finds in your path (to check, use <strong class="userinput"><code>java -version</code></strong>).
        Alternatively, you can set the <code class="envar">JAVA_HOME</code> environment variable to point to the install directory
        of the desired JDK.
    </p></div><div class="section" title="3.2.&nbsp;Download"><div class="titlepage"><div><div><h2 class="title"><a name="N10110"></a>3.2.&nbsp;Download</h2></div></div></div><p>You can download one of the Gradle distributions from the <a class="ulink" href="http://www.gradle.org/downloads.html" target="_top">Gradle web site</a>.</p></div><div class="section" title="3.3.&nbsp;Unpacking"><div class="titlepage"><div><div><h2 class="title"><a name="N10119"></a>3.3.&nbsp;Unpacking</h2></div></div></div><p>The Gradle distribution comes packaged as a ZIP. The full distribution contains:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>The Gradle binaries.</p></li><li class="listitem"><p>The user guide (HTML and PDF).</p></li><li class="listitem"><p>The API documentation (Javadoc and Groovydoc).</p></li><li class="listitem"><p>Extensive samples, including the examples referenced in the user guide, along with some complete and more
            complex builds you can use the starting point for your own build.
        </p></li><li class="listitem"><p>The binary sources (If you want to build Gradle you need to download the source distribution or checkout
            the sources from the source repository).
        </p></li></ul></div><div class="note" title="For Un*x users"><h3 class="title">For Un*x users</h3><p>You need a GNU compatible tool to unzip Gradle, if you want the file permissions to be properly set. We mention this as
some zip front ends for Mac OS X don't restore the file permissions properly.
</p></div></div><div class="section" title="3.4.&nbsp;Environment variables"><div class="titlepage"><div><div><h2 class="title"><a name="N10133"></a>3.4.&nbsp;Environment variables</h2></div></div></div><p>For running Gradle, add <code class="filename">
          <em class="replaceable"><code>GRADLE_HOME</code></em>/bin</code> to your <code class="envar">PATH</code>
    environment variable. Usually, this is sufficient to run Gradle. Optionally, you may also want to set the
    <code class="envar">GRADLE_HOME</code> environment variable to point to the root directory of your Gradle installation.
</p></div><div class="section" title="3.5.&nbsp;Running and testing your installation"><div class="titlepage"><div><div><h2 class="title"><a name="N10144"></a>3.5.&nbsp;Running and testing your installation</h2></div></div></div><p>You run Gradle via the <span class="command"><strong>gradle</strong></span> command. To check if Gradle is properly installed just type
<span class="command"><strong>gradle -v</strong></span> and you should get an output like:
</p><pre class="screen">------------------------------------------------------------
Gradle 0.8
------------------------------------------------------------

Gradle buildtime: Monday, September 28, 2009 1:53:43 PM CEST
Groovy: 1.6.4
Ant: Apache Ant version 1.7.0 compiled on December 13 2006
Ivy: 2.1.0-rc2
Java: 1.6.0_15
JVM: 14.1-b02-90
JVM Vendor: Apple Inc.
OS Name: Mac OS X</pre></div><div class="section" title="3.6.&nbsp;JVM options"><div class="titlepage"><div><div><h2 class="title"><a name="N10151"></a>3.6.&nbsp;JVM options</h2></div></div></div><p>JVM options for running Gradle can be set via environment variables. You can use <code class="envar">GRADLE_OPTS</code>
or <code class="envar">JAVA_OPTS</code>. Those variables can be used together. <code class="envar">JAVA_OPTS</code> is by convention an environment
variable shared by many Java applications. A typical use case would be to set the HTTP proxy in <code class="envar">JAVA_OPTS</code>
and the memory options in <code class="envar">GRADLE_OPTS</code>. Those variables can also be set at the beginning
of the <span class="command"><strong>gradle</strong></span> or <span class="command"><strong>gradlew</strong></span> script.
</p></div></div><div class="chapter" title="Chapter&nbsp;4.&nbsp;Build Script Basics"><div class="titlepage"><div><div><h1><a name="tutorial_using_tasks"></a>Chapter&nbsp;4.&nbsp;Build Script Basics</h1></div></div></div><p>You run a build using the <span class="command"><strong>gradle</strong></span> command. When run, <span class="command"><strong>gradle</strong></span> looks for a
        file called <code class="filename">build.gradle</code> in the current directory.
        <sup>[<a href="#ftn.N1017C" name="N1017C" class="footnote">5</a>]</sup>
        We call this <code class="filename">build.gradle</code> file a <em class="firstterm">build script</em>, although strictly speaking it is
        a build configuration script, as we will see later. In Gradle the build script defines a project. The name
        of the directory containing the build script is used as the name of the project.
    </p><div class="section" title="4.1.&nbsp;Hello world"><div class="titlepage"><div><div><h2 class="title"><a name="N10189"></a>4.1.&nbsp;Hello world</h2></div></div></div><p>In Gradle the most basic building block is the <em class="firstterm">task</em>. The tasks for your build are
            defined in the build script. To try this out, create the following build script named <code class="filename">build.gradle</code>.
        </p><div class="example"><a name="hello"></a><p class="title"><b>Example&nbsp;4.1.&nbsp;The first build script</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task hello &lt;&lt; {
    println <span class="hl-string">'Hello world!'</span>
}</pre></div></div><br class="example-break"><p>In a command-line shell, enter into the containing directory and execute the build script by running
            <strong class="userinput"><code>gradle -q hello</code></strong>:
        </p><div class="tip" title="What does -q do?"><h3 class="title">What does <code class="option">-q</code> do?</h3><p>Most of the examples in this user guide are run with the <code class="option">-q</code> command-line option.
                This suppresses Gradle's log messages, so that only the output of the tasks is shown. You don't need to
                use this option if you don't want. See <a class="xref" href="#logging" title="Chapter&nbsp;15.&nbsp;Logging">Chapter&nbsp;15, <i>Logging</i></a> for more details about the command-line
                options which affect Gradle's output.
            </p></div><div class="example"><a name="hello"></a><p class="title"><b>Example&nbsp;4.2.&nbsp;Execution of a build script</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong>
        </p><pre class="screen">&gt; gradle -q hello
Hello world!</pre></div></div><br class="example-break"><p>What's going on here? This build file defines a single task, called <code class="literal">hello</code>, and
            adds an action to it. When you run <strong class="userinput"><code>gradle hello</code></strong>, Gradle executes the
            <code class="literal">hello</code> task, which in turn executes the action you've provided. The action is simply a
            closure containing some Groovy code to execute.
        </p><p>If you think this looks similar to Ant's targets, well, you are right. Gradle tasks are the equivalent to
            Ant targets. But as you will see, they are much more powerful. We have used a different terminology than Ant
            as we think the word <span class="emphasis"><em>task</em></span> is more expressive than the word <span class="emphasis"><em>target</em></span>.
            Unfortunately this introduces a terminology clash with Ant, as Ant calls its commands, such as
            <code class="literal">javac</code> or <code class="literal">copy</code>, tasks. So when we talk about tasks,
            we <span class="emphasis"><em>always</em></span> mean Gradle tasks, which are the equivalent to Ant's targets. If we talk
            about Ant tasks (Ant commands), we explicitly say <span class="emphasis"><em>ant</em></span> task.
        </p></div><div class="section" title="4.2.&nbsp;Build scripts are code"><div class="titlepage"><div><div><h2 class="title"><a name="N101DD"></a>4.2.&nbsp;Build scripts are code</h2></div></div></div><p>Gradle's build scripts expose to you the full power of Groovy. As an appetizer, have a look at this:
        </p><div class="example"><a name="upper"></a><p class="title"><b>Example&nbsp;4.3.&nbsp;Using Groovy in Gradle's tasks</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task upper &lt;&lt; {
    String someString = <span class="hl-string">'mY_nAmE'</span>
    println <span class="hl-string">"Original: "</span> + someString 
    println <span class="hl-string">"Upper case: "</span> + someString.toUpperCase()
}</pre><p>Output of <strong class="userinput"><code>gradle -q upper</code></strong>
        </p><pre class="screen">&gt; gradle -q upper
Original: mY_nAmE
Upper case: MY_NAME</pre></div></div><br class="example-break"><p>or</p><div class="example"><a name="count"></a><p class="title"><b>Example&nbsp;4.4.&nbsp;Using Groovy in Gradle's tasks</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task count &lt;&lt; {
    4.times { print <span class="hl-string">"$it "</span> }
}</pre><p>Output of <strong class="userinput"><code>gradle -q count</code></strong>
        </p><pre class="screen">&gt; gradle -q count
0 1 2 3</pre></div></div><br class="example-break"></div><div class="section" title="4.3.&nbsp;Task dependencies"><div class="titlepage"><div><div><h2 class="title"><a name="sec:task_dependencies"></a>4.3.&nbsp;Task dependencies</h2></div></div></div><p>As you probably have guessed, you can declare dependencies between your tasks.
        </p><div class="example"><a name="intro"></a><p class="title"><b>Example&nbsp;4.5.&nbsp;Declaration of dependencies between tasks</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task hello &lt;&lt; {
    println <span class="hl-string">'Hello world!'</span>
}
task intro(dependsOn: hello) &lt;&lt; {
    println <span class="hl-string">"I'm Gradle"</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q intro</code></strong>
        </p><pre class="screen">&gt; gradle -q intro
Hello world!
I'm Gradle</pre></div></div><br class="example-break"><p>To add a dependency, the corresponding task does not need to exist.</p><div class="example"><a name="lazyDependsOn"></a><p class="title"><b>Example&nbsp;4.6.&nbsp;Lazy dependsOn - the other task does not exist (yet)</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task taskX(dependsOn: <span class="hl-string">'taskY'</span>) &lt;&lt; {
    println <span class="hl-string">'taskX'</span>
}
task taskY &lt;&lt; {
    println <span class="hl-string">'taskY'</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q taskX</code></strong>
        </p><pre class="screen">&gt; gradle -q taskX
taskY
taskX</pre></div></div><br class="example-break"><p>The dependency of <code class="literal">taskX</code> to <code class="literal">taskY</code> is declared before
            <code class="literal">taskY</code> is defined. This is very important for multi-project builds. Task dependencies are
            discussed in more detail in <a class="xref" href="#sec:adding_dependencies_to_tasks" title="13.4.&nbsp;Adding dependencies to a task">Section&nbsp;13.4, &ldquo;Adding dependencies to a task&rdquo;</a>.
        </p><p>Please notice, that you can't use a shortcut notation (see <a class="xref" href="#sec:shortcut_notations" title="4.6.&nbsp;Shortcut notations">Section&nbsp;4.6, &ldquo;Shortcut notations&rdquo;</a>) when referring to task, which is not defined yet.</p></div><div class="section" title="4.4.&nbsp;Dynamic tasks"><div class="titlepage"><div><div><h2 class="title"><a name="N1024B"></a>4.4.&nbsp;Dynamic tasks</h2></div></div></div><p>The power of Groovy can be used for more than defining what a task does. For example, you can also use it
            to dynamically create tasks.
        </p><div class="example"><a name="dynamic"></a><p class="title"><b>Example&nbsp;4.7.&nbsp;Dynamic creation of a task</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">4.times { counter -&gt;
    task <span class="hl-string">"task$counter"</span> &lt;&lt; {
        println <span class="hl-string">"I'm task number $counter"</span>
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q task1</code></strong>
        </p><pre class="screen">&gt; gradle -q task1
I'm task number 1</pre></div></div><br class="example-break"></div><div class="section" title="4.5.&nbsp;Manipulating existing tasks"><div class="titlepage"><div><div><h2 class="title"><a name="N10263"></a>4.5.&nbsp;Manipulating existing tasks</h2></div></div></div><p>Once tasks are created they can be accessed via an <span class="emphasis"><em>API</em></span>. This is different to Ant. For
            example you can create additional dependencies.
        </p><div class="example"><a name="dynamicDepends"></a><p class="title"><b>Example&nbsp;4.8.&nbsp;Accessing a task via API - adding a dependency</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">4.times { counter -&gt;
    task <span class="hl-string">"task$counter"</span> &lt;&lt; {
        println <span class="hl-string">"I'm task number $counter"</span>
    }
}
task0.dependsOn task2, task3</pre><p>Output of <strong class="userinput"><code>gradle -q task0</code></strong>
        </p><pre class="screen">&gt; gradle -q task0
I'm task number 2
I'm task number 3
I'm task number 0</pre></div></div><br class="example-break"><p>Or you can add behavior to an existing task.</p><div class="example"><a name="helloEnhanced"></a><p class="title"><b>Example&nbsp;4.9.&nbsp;Accessing a task via API - adding behaviour</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task hello &lt;&lt; {
    println <span class="hl-string">'Hello Earth'</span>
}
hello.doFirst {
    println <span class="hl-string">'Hello Venus'</span>
}
hello.doLast {
    println <span class="hl-string">'Hello Mars'</span>
}
hello &lt;&lt; {
    println <span class="hl-string">'Hello Jupiter'</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong>
        </p><pre class="screen">&gt; gradle -q hello
Hello Venus
Hello Earth
Hello Mars
Hello Jupiter</pre></div></div><br class="example-break"><p>The calls <code class="literal">doFirst</code> and <code class="literal">doLast</code> can be executed multiple times.
            They add an action to the beginning or the end of the task's actions list. When the task executes, the
            actions in the action list are executed in order. The <code class="literal">&lt;&lt;</code> operator is simply an
            alias for <code class="literal">doLast</code>.
        </p></div><div class="section" title="4.6.&nbsp;Shortcut notations"><div class="titlepage"><div><div><h2 class="title"><a name="sec:shortcut_notations"></a>4.6.&nbsp;Shortcut notations</h2></div></div></div><p>As you might have noticed in the previous examples, there is a convenient notation for accessing an
            <span class="emphasis"><em>existing</em></span> task. Each task is available as a property of the build script:
        </p><div class="example"><a name="helloWithShortCut"></a><p class="title"><b>Example&nbsp;4.10.&nbsp;Accessing task as a property of the build script</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task hello &lt;&lt; {
    println <span class="hl-string">'Hello world!'</span>
}
hello.doLast {
    println <span class="hl-string">"Greetings from the $hello.name task."</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong>
        </p><pre class="screen">&gt; gradle -q hello
Hello world!
Greetings from the hello task.</pre></div></div><br class="example-break"><p>This enables very readable code, especially when using the out of the box tasks provided by the plugins
            (e.g. <code class="literal">compile</code>).</p></div><div class="section" title="4.7.&nbsp;Dynamic task properties"><div class="titlepage"><div><div><h2 class="title"><a name="sec:dynamic_properties"></a>4.7.&nbsp;Dynamic task properties</h2></div></div></div><p>You can assign arbitrary <span class="emphasis"><em>new</em></span> properties to any task.
        </p><div class="example"><a name="dynamicProperties"></a><p class="title"><b>Example&nbsp;4.11.&nbsp;Assigning properties to a task</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task myTask
myTask.myProperty = <span class="hl-string">'myCustomPropValue'</span>

task showProps &lt;&lt; {
    println myTask.myProperty
}</pre><p>Output of <strong class="userinput"><code>gradle -q showProps</code></strong>
        </p><pre class="screen">&gt; gradle -q showProps
myCustomPropValue</pre></div></div><br class="example-break"></div><div class="section" title="4.8.&nbsp;Using Ant Tasks"><div class="titlepage"><div><div><h2 class="title"><a name="N102DE"></a>4.8.&nbsp;Using Ant Tasks</h2></div></div></div><p>Ant tasks are first-class citizens in Gradle. Gradle provides excellent integration for Ant tasks simply
            by relying on Groovy. Groovy is shipped with the fantastic <code class="literal">AntBuilder</code>. Using Ant tasks
            from Gradle is as convenient and more powerful than using Ant tasks from a <code class="filename">build.xml</code>
            file. Let's look at an example:
        </p><div class="example"><a name="antChecksum"></a><p class="title"><b>Example&nbsp;4.12.&nbsp;Using AntBuilder to execute ant.checksum target</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task checksum &lt;&lt; {
    def files = file(<span class="hl-string">'../antChecksumFiles'</span>).listFiles().sort()
    files.each { File file -&gt;
        <span class="hl-keyword">if</span> (file.isFile()) {
            ant.checksum(file: file, property: file.name)
            println <span class="hl-string">"$file.name Checksum: ${ant.properties[file.name]}"</span>
        }
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q checksum</code></strong>
        </p><pre class="screen">&gt; gradle -q checksum
agile_manifesto.html Checksum: 2dd24e01676046d8dedc2009a1a8f563
agile_principles.html Checksum: 659d204c8c7ccb5d633de0b0d26cd104
dylan_thomas.txt Checksum: 91040ca1cefcbfdc8016b1b3e51f23d3</pre></div></div><br class="example-break"><p>There is lots more you can do with Ant in your build scripts. You can find out more in <a class="xref" href="#ant" title="Chapter&nbsp;16.&nbsp;Using Ant from Gradle">Chapter&nbsp;16, <i>Using Ant from Gradle</i></a>.</p></div><div class="section" title="4.9.&nbsp;Using methods"><div class="titlepage"><div><div><h2 class="title"><a name="N10301"></a>4.9.&nbsp;Using methods</h2></div></div></div><p>Gradle scales in how you can organize your build logic. The first level of organizing your build logic for
            the example above, is extracting a method.
        </p><div class="example"><a name="antChecksumWithMethod"></a><p class="title"><b>Example&nbsp;4.13.&nbsp;Using methods to organize your build logic</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task checksum &lt;&lt; {
    fileList(<span class="hl-string">'../antChecksumFiles'</span>).each {File file -&gt;
        ant.checksum(file: file, property: <span class="hl-string">"cs_$file.name"</span>)
        println <span class="hl-string">"$file.name Checksum: ${ant.properties["</span>cs_$file.name<span class="hl-string">"]}"</span>
    }
}

task length &lt;&lt; {
    fileList(<span class="hl-string">'../antChecksumFiles'</span>).each {File file -&gt;
        ant.length(file: file, property: <span class="hl-string">"lt_$file.name"</span>)
        println <span class="hl-string">"$file.name Length: ${ant.properties["</span>lt_$file.name<span class="hl-string">"]}"</span>
    }
}

File[] fileList(String dir) {
    file(dir).listFiles({file -&gt; file.isFile() } as FileFilter).sort()
}</pre><p>Output of <strong class="userinput"><code>gradle -q checksum</code></strong>
        </p><pre class="screen">&gt; gradle -q checksum
agile_manifesto.html Checksum: 2dd24e01676046d8dedc2009a1a8f563
agile_principles.html Checksum: 659d204c8c7ccb5d633de0b0d26cd104
dylan_thomas.txt Checksum: 91040ca1cefcbfdc8016b1b3e51f23d3</pre></div></div><br class="example-break"><p>Later you will see that such methods can be shared among subprojects in multi-project builds. If your
            build logic becomes more complex, Gradle offers you other very convenient ways to organize it. We have
            devoted a whole chapter to this. See <a class="xref" href="#organizing_build_logic" title="Chapter&nbsp;34.&nbsp;Organizing Build Logic">Chapter&nbsp;34, <i>Organizing Build Logic</i></a>.
        </p></div><div class="section" title="4.10.&nbsp;Default tasks"><div class="titlepage"><div><div><h2 class="title"><a name="sec:default_tasks"></a>4.10.&nbsp;Default tasks</h2></div></div></div><p>Gradle allows you to define one or more default tasks for your build.
        </p><div class="example"><a name="defaultTasks"></a><p class="title"><b>Example&nbsp;4.14.&nbsp;Defining a default tasks</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">defaultTasks <span class="hl-string">'clean'</span>, <span class="hl-string">'run'</span>

task clean &lt;&lt; {
    println <span class="hl-string">'Default Cleaning!'</span>
}

task run &lt;&lt; {
    println <span class="hl-string">'Default Running!'</span>
}

task other &lt;&lt; {
    println <span class="hl-string">"I'm not a default task!"</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q</code></strong>
        </p><pre class="screen">&gt; gradle -q
Default Cleaning!
Default Running!</pre></div></div><br class="example-break"><p>This is equivalent to running <strong class="userinput"><code>gradle clean run</code></strong>. In a multi-project build every
            subproject can have its own specific default tasks. If a subproject does not specify default tasks, the
            default tasks of the parent project are used (if defined).
        </p></div><div class="section" title="4.11.&nbsp;Configure by DAG"><div class="titlepage"><div><div><h2 class="title"><a name="configure-by-dag"></a>4.11.&nbsp;Configure by DAG</h2></div></div></div><p>As we describe in full detail later (See <a class="xref" href="#build_lifecycle" title="Chapter&nbsp;30.&nbsp;The Build Lifecycle">Chapter&nbsp;30, <i>The Build Lifecycle</i></a>) Gradle has a
            configuration phase and an execution phase. After the configuration phase Gradle knows all tasks that should
            be executed. Gradle offers you a hook to make use of this information. A use-case for this would be to check
            if the release task is part of the tasks to be executed. Depending on this you can assign different values
            to some variables.
        </p><p>In the following example, execution of <code class="literal">distribution</code> and <code class="literal">release</code> tasks results in different value of <code class="literal">version</code> variable.</p><div class="example"><a name="configByDagNoRelease"></a><p class="title"><b>Example&nbsp;4.15.&nbsp;Different outcomes of build depending on chosen tasks</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">gradle.taskGraph.whenReady {taskGraph -&gt;
    <span class="hl-keyword">if</span> (taskGraph.hasTask(<span class="hl-string">':release'</span>)) {
        version = <span class="hl-string">'1.0'</span>
    } <span class="hl-keyword">else</span> {
        version = <span class="hl-string">'1.0-SNAPSHOT'</span>
    }
}

task distribution &lt;&lt; {
    println <span class="hl-string">"We build the zip with version=$version"</span>
}
task release(dependsOn: <span class="hl-string">'distribution'</span>) &lt;&lt; {
    println <span class="hl-string">'We release now'</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q distribution</code></strong>
        </p><pre class="screen">&gt; gradle -q distribution
We build the zip with version=1.0-SNAPSHOT</pre><p>Output of <strong class="userinput"><code>gradle -q release</code></strong>
        </p><pre class="screen">&gt; gradle -q release
We build the zip with version=1.0
We release now</pre></div></div><br class="example-break"><p>The important thing is, that the fact that the release task has been chosen, has an effect
            <span class="emphasis"><em>before</em></span> the release task gets executed. Nor has the release task to be the
            <span class="emphasis"><em>primary</em></span> task (i.e. the task passed to the <span class="command"><strong>gradle</strong></span> command).
        </p></div><div class="section" title="4.12.&nbsp;Summary"><div class="titlepage"><div><div><h2 class="title"><a name="N10375"></a>4.12.&nbsp;Summary</h2></div></div></div><p>This is not the end of the story for tasks. So far we have worked with simple tasks. Tasks will be
            revisited in <a class="xref" href="#more_about_tasks" title="Chapter&nbsp;13.&nbsp;More about Tasks">Chapter&nbsp;13, <i>More about Tasks</i></a> and when we look at the Java Plugin in
            <a class="xref" href="#java_plugin" title="Chapter&nbsp;18.&nbsp;The Java Plugin">Chapter&nbsp;18, <i>The Java Plugin</i></a>.
        </p></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N1017C" name="ftn.N1017C" class="para">5</a>] </sup>There are command line switches to change this behavior. See <a class="xref" href="#gradle_command_line" title="Appendix&nbsp;B.&nbsp;Gradle Command Line">Appendix&nbsp;B, <i>Gradle Command Line</i></a>)</p></div></div></div><div class="chapter" title="Chapter&nbsp;5.&nbsp;Java Quickstart"><div class="titlepage"><div><div><h1><a name="tutorial_java_projects"></a>Chapter&nbsp;5.&nbsp;Java Quickstart</h1></div></div></div><p>As we have seen, Gradle is a general-purpose build tool. It can build pretty much anything you care to
        implement in your build script. Out-of-the-box, however, it doesn't build anything unless you write code in your
        build script. Most Java projects are pretty similar as far as the basics go: you need to compile your Java
        source files, run some unit tests, and create a JAR file containing your classes. It would be nice if you
        didn't have to code all this up for every project. Luckily, you don't have to.
        Gradle solves this problem through the use of <em class="firstterm">plugins</em>. A plugin is an extension to Gradle
        which configures your project in some way, typically by adding a bunch of pre-configured tasks which together do
        something useful. Gradle ships with a number of plugins, and you can easily write your own and share them with
        others. One such plugin is the <em class="firstterm">Java Plugin</em>. This plugin adds some tasks to your
        project which will compile and test your Java source code, and bundle it into a JAR file.
    </p><p>The Java plugin is convention based. This means that the plugin defines default values for many aspects of the
        project, such as where the Java source files are located. If you follow the convention in your project, you
        generally don't need to do much in your build script to get a useful build. Gradle allows you to customize your
        project if you don't want to or cannot follow the convention in some way. In fact, because support for Java
        projects is implemented as a plugin, you don't have to use the plugin at all to build a Java project, if
        you don't want to.
    </p><p>We have in-depth coverage with many examples about the Java plugin, dependency management and multi-project
        builds in later chapters. In this chapter we want to give you an initial idea of how to use the Java plugin to
        build a Java project.
    </p><div class="section" title="5.1.&nbsp;A basic Java project"><div class="titlepage"><div><div><h2 class="title"><a name="N10392"></a>5.1.&nbsp;A basic Java project</h2></div></div></div><p>Let's look at a simple example. To use the Java plugin, add the following to your build file:</p><div class="example"><a name="javaQuickstart"></a><p class="title"><b>Example&nbsp;5.1.&nbsp;Using the Java plugin</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">usePlugin <span class="hl-string">'java'</span></pre><div class="exampleLocation" title="Tip"><p>
            <span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/java/quickstart</code>
          </p></div></div></div><br class="example-break"><p>This is all you need to define a Java project. This will apply the Java plugin to your project, which adds
            a number of tasks to your project.</p><div class="tip" title="What tasks are available?"><h3 class="title">What tasks are available?</h3><p>You can use <strong class="userinput"><code>gradle -t</code></strong> to list the tasks of a project. This will let you see
            the tasks that the Java plugin has added to your project.
        </p></div><p>Gradle expects to find your production source code under <code class="filename">src/main/java</code> and your test
            source code under <code class="filename">src/test/java</code>. In addition, any files under
            <code class="filename">src/main/resources</code> will be included in the JAR file as resources, and any files under
            <code class="filename">src/test/resources</code> will be included in the classpath used to run the tests. All output
            files are created under the <code class="filename">build</code> directory, with the JAR file ending up in the
            <code class="filename">build/libs</code> directory.
        </p><div class="section" title="5.1.1.&nbsp;Building the project"><div class="titlepage"><div><div><h3 class="title"><a name="N103CB"></a>5.1.1.&nbsp;Building the project</h3></div></div></div><p>The Java plugin adds quite a few tasks to your project. However, there are only a handful of tasks
                that you will need to use to build the project. The most commonly used task is the <code class="literal">build</code> task,
                which does a full build of the project. When you run <strong class="userinput"><code>gradle build</code></strong>, Gradle will
                compile and test your code, and create a JAR file containing your main classes and resources:</p><div class="example"><a name="javaQuickstart"></a><p class="title"><b>Example&nbsp;5.2.&nbsp;Building a Java project</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle build</code></strong>
          </p><pre class="screen">&gt; gradle build
:compileJava
:processResources
:classes
:jar
:assemble
:compileTestJava
:processTestResources
:testClasses
:test
:check
:build

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>Some other useful tasks are:</p><div class="variablelist"><dl><dt><span class="term">clean</span></dt><dd><p>Deletes the <code class="filename">build</code> directory, removing all built files.</p></dd><dt><span class="term">assemble</span></dt><dd><p>Compiles and jars your code, but does not run the unit tests. Other plugins add more
                            artifacts to this task. For example, if you use the War plugin, this task will also build
                            the WAR file for your project.
                        </p></dd><dt><span class="term">check</span></dt><dd><p>Compiles and tests your code. Other plugins add more checks to this task. For example, if
                            you use the Code-quality plugin, this task will also run Checkstyle against your source
                            code.
                        </p></dd></dl></div></div><div class="section" title="5.1.2.&nbsp;External dependencies"><div class="titlepage"><div><div><h3 class="title"><a name="N103F9"></a>5.1.2.&nbsp;External dependencies</h3></div></div></div><p>Usually, a Java project will have some dependencies on external JAR files. To reference these JAR
                files in the project, you need to tell Gradle where to find them. In Gradle, artifacts such as JAR
                files, are located in a <em class="firstterm">repository</em>. A repository can be used for fetching the
                dependencies of a project, or for publishing the artifacts of a project, or both. For this example,
                we will use the public Maven repository:</p><div class="example"><a name="javaQuickstart"></a><p class="title"><b>Example&nbsp;5.3.&nbsp;Adding Maven repository</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">repositories {
    mavenCentral()
}</pre></div></div><br class="example-break"><p>Let's add some dependencies. Here, we will declare that our production classes have a compile-time
                dependency on commons collections, and that our test classes have a compile-time dependency on junit:</p><div class="example"><a name="javaQuickstart"></a><p class="title"><b>Example&nbsp;5.4.&nbsp;Adding dependencies</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">dependencies {
    compile group: <span class="hl-string">'commons-collections'</span>, name: <span class="hl-string">'commons-collections'</span>, version: <span class="hl-string">'3.2'</span>
    testCompile group: <span class="hl-string">'junit'</span>, name: <span class="hl-string">'junit'</span>, version: <span class="hl-string">'4.+'</span>
}</pre></div></div><br class="example-break"><p>You can find out more in <a class="xref" href="#dependency_management" title="Chapter&nbsp;28.&nbsp;Dependency Management">Chapter&nbsp;28, <i>Dependency Management</i></a>.</p></div><div class="section" title="5.1.3.&nbsp;Customising the project"><div class="titlepage"><div><div><h3 class="title"><a name="N10420"></a>5.1.3.&nbsp;Customising the project</h3></div></div></div><p>The Java plugin adds a number of properties to your project. These properties have default values
                which are usually sufficient to get started. It's easy to change these values if they don't suit. Let's
                look at this for our sample. Here we will specify the version number for our Java project, along
                with the Java version our source is written in. We also add some attributes to the JAR manifest.
            </p><div class="example"><a name="javaQuickstart"></a><p class="title"><b>Example&nbsp;5.5.&nbsp;Customization of MANIFEST.MF</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">sourceCompatibility = <span class="hl-number">1.5</span>
version = <span class="hl-string">'1.0'</span>
manifest.mainAttributes(
    <span class="hl-string">'Implementation-Title'</span>: <span class="hl-string">'Gradle Quickstart'</span>,
    <span class="hl-string">'Implementation-Version'</span>: version
)</pre></div></div><br class="example-break"><div class="tip" title="What properties are available?"><h3 class="title">What properties are available?</h3><p>You can use <strong class="userinput"><code>gradle -r</code></strong> to list the properties of a project. This will allow
                you to see the properties added by the Java plugin, and their default values.</p></div><p>The tasks which the Java plugin adds are regular tasks, exactly the same as if they were declared in
                the build file. This means you can use any of the mechanisms shown in earlier chapters to customise
                these tasks. For example, you can set the properties of a task, add behaviour to a task, change the
                dependencies of a task, or replace a task entirely. In our sample, we will configure the
                <code class="literal">test</code> task, which is of type<a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/testing/Test.html" target="_top">
            <code class="classname">Test</code>
          </a>, to
                add a system property when the tests are executed: </p><div class="example"><a name="javaQuickstart"></a><p class="title"><b>Example&nbsp;5.6.&nbsp;Adding system property</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">test {
    options.systemProperties[<span class="hl-string">'property'</span>] = <span class="hl-string">'value'</span>
}</pre></div></div><br class="example-break"></div><div class="section" title="5.1.4.&nbsp;Publishing the JAR file"><div class="titlepage"><div><div><h3 class="title"><a name="N10451"></a>5.1.4.&nbsp;Publishing the JAR file</h3></div></div></div><p>Usually the JAR file needs to be published somewhere. To do this, you need to tell Gradle where to
                publish the JAR file. In Gradle, artifacts such as JAR files are published to repositories. In our
                sample, we will publish to a local directory. You can also publish to a remote location, or multiple
                locations.
            </p><div class="example"><a name="javaQuickstart"></a><p class="title"><b>Example&nbsp;5.7.&nbsp;Publishing the JAR file</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">uploadArchives {
    repositories {
       flatDir(dirs: file(<span class="hl-string">'repos'</span>))
    }
}</pre></div></div><br class="example-break"><p>To publish the JAR file, run <strong class="userinput"><code>gradle uploadArchives</code></strong>.</p></div><div class="section" title="5.1.5.&nbsp;Creating Eclipse project"><div class="titlepage"><div><div><h3 class="title"><a name="N10467"></a>5.1.5.&nbsp;Creating Eclipse project</h3></div></div></div><p>To import your project into Eclipse, you need to add another plugin to your build file:</p><div class="example"><a name="javaQuickstart"></a><p class="title"><b>Example&nbsp;5.8.&nbsp;Eclipse plugin</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">usePlugin <span class="hl-string">'eclipse'</span></pre></div></div><br class="example-break"><p>Now execute <strong class="userinput"><code>gradle eclipse</code></strong> command to generate Eclipse project files. More on Eclipse
                task can be found in <a class="xref" href="#sec:eclipse" title="18.15.&nbsp;Eclipse">Section&nbsp;18.15, &ldquo;Eclipse&rdquo;</a>.
            </p></div><div class="section" title="5.1.6.&nbsp;Summary"><div class="titlepage"><div><div><h3 class="title"><a name="N10480"></a>5.1.6.&nbsp;Summary</h3></div></div></div><p>Here's the complete build file for our sample:</p><div class="example"><a name="javaQuickstart"></a><p class="title"><b>Example&nbsp;5.9.&nbsp;Java example - complete build file</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">usePlugin <span class="hl-string">'java'</span>

usePlugin <span class="hl-string">'eclipse'</span>

sourceCompatibility = <span class="hl-number">1.5</span>
version = <span class="hl-string">'1.0'</span>
manifest.mainAttributes(
    <span class="hl-string">'Implementation-Title'</span>: <span class="hl-string">'Gradle Quickstart'</span>,
    <span class="hl-string">'Implementation-Version'</span>: version
)

repositories {
    mavenCentral()
}

dependencies {
    compile group: <span class="hl-string">'commons-collections'</span>, name: <span class="hl-string">'commons-collections'</span>, version: <span class="hl-string">'3.2'</span>
    testCompile group: <span class="hl-string">'junit'</span>, name: <span class="hl-string">'junit'</span>, version: <span class="hl-string">'4.+'</span>
}

test {
    options.systemProperties[<span class="hl-string">'property'</span>] = <span class="hl-string">'value'</span>
}

uploadArchives {
    repositories {
       flatDir(dirs: file(<span class="hl-string">'repos'</span>))
    }
}</pre></div></div><br class="example-break"></div></div><div class="section" title="5.2.&nbsp;Multi-project Java build"><div class="titlepage"><div><div><h2 class="title"><a name="sec:examples"></a>5.2.&nbsp;Multi-project Java build</h2></div></div></div><p>Now let's look at a typical multi-project build. Below is the layout for the project:
        </p><div class="example"><a name="javaMultiProject"></a><p class="title"><b>Example&nbsp;5.10.&nbsp;Multi-project build - hierarchical layout</b></p><div class="example-contents"><p>Build layout</p><pre class="programlisting">multiproject/
  api/
  services/
    webservice/
  shared/</pre><div class="exampleLocation" title="Tip"><p>
            <span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/java/multiproject</code>
          </p></div></div></div><br class="example-break"><p>Here we have three projects. Project <code class="literal">api</code> produces a JAR file which is shipped to the
            client to provide them a Java client for your XML webservice. Project <code class="literal">webservice</code> is a
            webapp which returns XML. Project <code class="literal">shared</code> contains code used both by <code class="literal">api</code>
            and <code class="literal">webservice</code>.
        </p><div class="section" title="5.2.1.&nbsp;Defining a multi-project build"><div class="titlepage"><div><div><h3 class="title"><a name="N104BA"></a>5.2.1.&nbsp;Defining a multi-project build</h3></div></div></div><p>To define a multi-project build, you need to create a <em class="firstterm">settings file</em>. The settings
                file lives in the root directory of the source tree, and specifies which projects to include in the
                build. It must be called <code class="filename">settings.gradle</code>. For this example, we are using a simple
                hierarchical layout. Here is the corresponding settings file:
            </p><div class="example"><a name="javaMultiProject"></a><p class="title"><b>Example&nbsp;5.11.&nbsp;Multi-project build - settings.gradle file</b></p><div class="example-contents"><p>
            <code class="filename">settings.gradle</code>
          </p><pre class="programlisting">include <span class="hl-string">"shared"</span>, <span class="hl-string">"api"</span>, <span class="hl-string">"services:webservice"</span></pre></div></div><br class="example-break"><p>You can find out more about the settings file in <a class="xref" href="#multi_project_builds" title="Chapter&nbsp;31.&nbsp;Multi-project Builds">Chapter&nbsp;31, <i>Multi-project Builds</i></a>.</p></div><div class="section" title="5.2.2.&nbsp;Common configuration"><div class="titlepage"><div><div><h3 class="title"><a name="N104D6"></a>5.2.2.&nbsp;Common configuration</h3></div></div></div><p>For most multi-project builds, there is some configuration which is common to all projects.
                In our sample, we will define this common configuration in the root project, using a technique called
                <em class="firstterm">configuration injection</em>. Here, the root project is like a container and the
                <code class="literal">subprojects</code> method iterates over the elements of this container - the projects in
                this instance - and injects the specified configuration. This way we can easily define the manifest
                content for all archives, and some common dependencies:
            </p><div class="example"><a name="javaMultiProject"></a><p class="title"><b>Example&nbsp;5.12.&nbsp;Multi-project build - common configuration</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">subprojects {
    usePlugin <span class="hl-string">'java'</span>
    usePlugin <span class="hl-string">'eclipse'</span>

    repositories {
       mavenCentral()
    }

    dependencies {
        testCompile <span class="hl-string">'junit:junit:4.7'</span>
    }

    group = <span class="hl-string">'org.gradle'</span>
    version = <span class="hl-string">'1.0'</span>
    manifest.mainAttributes(provider: <span class="hl-string">'gradle'</span>)
}

dependsOnChildren()</pre></div></div><br class="example-break"><p>Notice that our sample applies the Java plugin to each subproject. This means the tasks and
                configuration properties we have seen in the previous section are available in each subproject.
                So, you can compile, test, and JAR all the projects by running <strong class="userinput"><code>gradle build</code></strong> from
                the root project directory.</p></div><div class="section" title="5.2.3.&nbsp;Dependencies between projects"><div class="titlepage"><div><div><h3 class="title"><a name="N104F2"></a>5.2.3.&nbsp;Dependencies between projects</h3></div></div></div><p>You can add dependencies between projects in the same build, so that, for example, the JAR file of one
                project is used to compile another project. In the <code class="literal">api</code> build file we will add a dependency
                on the JAR produced by the <code class="literal">shared</code> project. Due to this dependency, Gradle will
                ensure that project <code class="literal">shared</code> always gets built before project <code class="literal">api</code>.
            </p><div class="example"><a name="javaMultiProject"></a><p class="title"><b>Example&nbsp;5.13.&nbsp;Multi-project build - dependencies between projects</b></p><div class="example-contents"><p>
            <code class="filename">api/build.gradle</code>
          </p><pre class="programlisting">dependencies {
    compile project(<span class="hl-string">':shared'</span>)
}</pre></div></div><br class="example-break">
            See <a class="xref" href="#disable_dependency_projects" title="31.7.1.&nbsp;Disable the build of dependency projects.">Section&nbsp;31.7.1, &ldquo;Disable the build of dependency projects.&rdquo;</a> for how to disable this functionality.
        </div><div class="section" title="5.2.4.&nbsp;Creating a distribution"><div class="titlepage"><div><div><h3 class="title"><a name="N10513"></a>5.2.4.&nbsp;Creating a distribution</h3></div></div></div><p>
                We also add a distribution, that gets shipped to the client:
            </p><div class="example"><a name="javaMultiProject"></a><p class="title"><b>Example&nbsp;5.14.&nbsp;Multi-project build - distribution file</b></p><div class="example-contents"><p>
            <code class="filename">api/build.gradle</code>
          </p><pre class="programlisting">task dist(type: Zip) {
    dependsOn spiJar
    from configurations.runtime
    from spiJar.archivePath
    fileSet dir: <span class="hl-string">'src/dist'</span>
}</pre></div></div><br class="example-break"></div></div><div class="section" title="5.3.&nbsp;Summary"><div class="titlepage"><div><div><h2 class="title"><a name="N10524"></a>5.3.&nbsp;Summary</h2></div></div></div><p>In this chapter, you have seen how to do some of the things you commonly need to build a Java based
            project. This chapter is not exhaustive, and there are many other things you can do with Java projects in
            Gradle. These are dealt with in later chapters. Also, a lot of the behaviour you have seen in this chapter
            is configurable. For example, you can change where Gradle looks Java source files, or add extra tasks, or
            you can change what any task actually does. Again, you will see how this works in later chapters.
        </p><p>
            You can find out more about the Java plugin in <a class="xref" href="#java_plugin" title="Chapter&nbsp;18.&nbsp;The Java Plugin">Chapter&nbsp;18, <i>The Java Plugin</i></a>, and you can find more sample
            Java projects in the <code class="filename">samples/java</code> directory in the Gradle distribution.
        </p></div></div><div class="chapter" title="Chapter&nbsp;6.&nbsp;Groovy Quickstart"><div class="titlepage"><div><div><h1><a name="tutorial_groovy_projects"></a>Chapter&nbsp;6.&nbsp;Groovy Quickstart</h1></div></div></div><p>To build a Groovy project, you use the <em class="firstterm">Groovy Plugin</em>. This plugin extends the Java
        plugin to add Groovy compilation capabilties to your project. Your project can contain Groovy source code,
        Java source code, or a mix of the two. In every other respect, a Groovy project is identical to a Java project,
        which we have already seen in <a class="xref" href="#tutorial_java_projects" title="Chapter&nbsp;5.&nbsp;Java Quickstart">Chapter&nbsp;5, <i>Java Quickstart</i></a>.
    </p><div class="section" title="6.1.&nbsp;A basic Groovy project"><div class="titlepage"><div><div><h2 class="title"><a name="N1053F"></a>6.1.&nbsp;A basic Groovy project</h2></div></div></div><p>Let's look at an example. To use the Groovy plugin, add the following to your build file:</p><div class="example"><a name="groovyQuickstart"></a><p class="title"><b>Example&nbsp;6.1.&nbsp;Groovy plugin</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">usePlugin <span class="hl-string">'groovy'</span></pre><div class="exampleLocation" title="Tip"><p>
            <span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/groovy/quickstart</code>
          </p></div></div></div><br class="example-break"><p>This will also apply the Java plugin to the project, if it has not already been applied. The Groovy plugin
            extends the <code class="literal">compile</code> task to look for source files in directory
            <code class="filename">src/main/groovy</code>, and the <code class="literal">compileTest</code> task to look for test source
            files in directory<code class="filename">src/test/groovy</code>. The compile tasks use joint compilation for these
            directories, which means they can contain a mixture of java and groovy source files.
        </p><p>To use the groovy compilation tasks, you must also declare the Groovy version to use and where to find the
            Groovy libraries. You do this by adding a dependency to the <code class="literal">groovy</code> configuration.
            The <code class="literal">compile</code> configuration inherits this dependency, so the groovy libraries will
            be included in classpath when compiling Groovy and Java source.  For our sample, we will use Groovy 1.6.0
            from the public Maven repository:</p><div class="example"><a name="groovyQuickstart"></a><p class="title"><b>Example&nbsp;6.2.&nbsp;Dependency on Groovy 1.6.0</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">repositories {
    mavenCentral()
}

dependencies {
    groovy group: <span class="hl-string">'org.codehaus.groovy'</span>, name: <span class="hl-string">'groovy'</span>, version: <span class="hl-string">'1.6.0'</span>
}</pre></div></div><br class="example-break"><p>Here is our complete build file:</p><div class="example"><a name="groovyQuickstart"></a><p class="title"><b>Example&nbsp;6.3.&nbsp;Groovy example - complete build file</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">usePlugin <span class="hl-string">'groovy'</span>

repositories {
    mavenCentral()
}

dependencies {
    groovy group: <span class="hl-string">'org.codehaus.groovy'</span>, name: <span class="hl-string">'groovy'</span>, version: <span class="hl-string">'1.6.0'</span>
    testCompile group: <span class="hl-string">'junit'</span>, name: <span class="hl-string">'junit'</span>, version: <span class="hl-string">'4.7'</span>
}</pre></div></div><br class="example-break"><p>Running <strong class="userinput"><code>gradle build</code></strong> will compile, test and JAR your project.</p></div><div class="section" title="6.2.&nbsp;Summary"><div class="titlepage"><div><div><h2 class="title"><a name="N1058F"></a>6.2.&nbsp;Summary</h2></div></div></div><p>This chapter describes a very simple Groovy project. Usually, a real project will require more than this.
            Because a Groovy project <span class="emphasis"><em>is</em></span> a Java project, whatever you can do with a Java project,
            you can also do with a Groovy project.
        </p><p>
            You can find out more about the Groovy plugin in <a class="xref" href="#groovy_plugin" title="Chapter&nbsp;19.&nbsp;The Groovy Plugin">Chapter&nbsp;19, <i>The Groovy Plugin</i></a>, and you can find more
            sample Groovy projects in the <code class="filename">samples/groovy</code> directory in the Gradle distribution.
        </p></div></div><div class="chapter" title="Chapter&nbsp;7.&nbsp;Web Application Quickstart"><div class="titlepage"><div><div><h1><a name="web_project_tutorial"></a>Chapter&nbsp;7.&nbsp;Web Application Quickstart</h1></div></div></div><div class="note" title="Note"><p>This chapter is a work in progress.</p></div><p>This chapter introduces some of the Gradle's support for web applications. Gradle provides two plugins for web
        application developement: the War plugin and the Jetty plugin. The War plugin extends the Java plugin to build a
        WAR file for your project. The Jetty plugin extends the War plugin to allow you to deploy your web application
        to an embedded Jetty web container.
    </p><div class="section" title="7.1.&nbsp;Building a WAR file"><div class="titlepage"><div><div><h2 class="title"><a name="N105AA"></a>7.1.&nbsp;Building a WAR file</h2></div></div></div><p>To build a WAR file, you apply the War plugin to your project:</p><div class="example"><a name="webQuickstart"></a><p class="title"><b>Example&nbsp;7.1.&nbsp;War plugin</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">usePlugin <span class="hl-string">'war'</span></pre><div class="exampleLocation" title="Tip"><p>
            <span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/webApplication/quickstart</code>
          </p></div></div></div><br class="example-break"><p>This also applies the Java plugin to your project. Running <strong class="userinput"><code>gradle build</code></strong> will compile,
            test and WAR your project. Gradle will look for the source files to include in the WAR file in
            <code class="filename">src/main/webapp</code>. Your compiled classes, and their runtime dependencies are also
            included in the WAR file.
        </p><div class="tip" title="Groovy web applications"><h3 class="title">Groovy web applications</h3><p>You can combine multiple plugins in a single project, so you
            can use the War and Groovy plugins together to build a Groovy based web application. The appropriate groovy
            libraries will be added to the WAR file for you.</p></div></div><div class="section" title="7.2.&nbsp;Running your web application"><div class="titlepage"><div><div><h2 class="title"><a name="N105D2"></a>7.2.&nbsp;Running your web application</h2></div></div></div><p>To run your web application, you apply the Jetty plugin to your project:</p><div class="example"><a name="webQuickstart"></a><p class="title"><b>Example&nbsp;7.2.&nbsp;Running web application with Jetty plugin</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">usePlugin <span class="hl-string">'jetty'</span></pre></div></div><br class="example-break"><p>This also applies the War plugin to your project. Running <strong class="userinput"><code>gradle jettyRun</code></strong> will
            run your web application in an embedded Jetty web container. Running <strong class="userinput"><code>gradle jettyRunWar</code></strong>
            will build and test the WAR file, and then run it in an embedded web container.
        </p><p>TODO: which url, configure port, uses source files in place and can edit your files and reload.</p></div><div class="section" title="7.3.&nbsp;Summary"><div class="titlepage"><div><div><h2 class="title"><a name="N105ED"></a>7.3.&nbsp;Summary</h2></div></div></div><p>You can find out more about the War plugin in <a class="xref" href="#war_plugin" title="Chapter&nbsp;21.&nbsp;The War Plugin">Chapter&nbsp;21, <i>The War Plugin</i></a> and the Jetty plugin in
            <a class="xref" href="#jetty_plugin" title="Chapter&nbsp;22.&nbsp;The Jetty Plugin">Chapter&nbsp;22, <i>The Jetty Plugin</i></a>. You can find more sample Java projects in the
            <code class="filename">samples/webApplication</code> directory in the Gradle distribution.
        </p></div></div><div class="chapter" title="Chapter&nbsp;8.&nbsp;Artifact Basics"><div class="titlepage"><div><div><h1><a name="artifact_dependencies_tutorial"></a>Chapter&nbsp;8.&nbsp;Artifact Basics</h1></div></div></div><div class="note" title="Note"><p>This chapter is currently under construction.</p><p>For all the details of artifact handling see <a class="xref" href="#artifact_management" title="Chapter&nbsp;29.&nbsp;Artifact Management">Chapter&nbsp;29, <i>Artifact Management</i></a>.</p></div><p>This chapter introduces some of the basics of artifact handling in Gradle.</p><div class="section" title="8.1.&nbsp;Artifact configurations"><div class="titlepage"><div><div><h2 class="title"><a name="sec:artifact_configurations"></a>8.1.&nbsp;Artifact configurations</h2></div></div></div><p>Artifacts are grouped into <em class="firstterm">configurations</em>. A configuration is simply a set of files
            with a name. You can use them to declare the external dependencies your project has, or to declare the
            artifacts which your project publishes.</p><p>To define a configuration:</p><div class="example"><a name="defineConfiguration"></a><p class="title"><b>Example&nbsp;8.1.&nbsp;Definition of a configuration</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">configurations {
    compile
}</pre></div></div><br class="example-break"><p>To access a configuration:</p><div class="example"><a name="defineConfiguration"></a><p class="title"><b>Example&nbsp;8.2.&nbsp;Accessing a configuration</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">println configurations.compile.name
println configurations[<span class="hl-string">'compile'</span>].name</pre></div></div><br class="example-break"><p>To configure a configuration:</p><div class="example"><a name="defineConfiguration"></a><p class="title"><b>Example&nbsp;8.3.&nbsp;Configuration of a configuration</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">configurations {
    compile {
        description = <span class="hl-string">'compile classpath'</span>
        transitive = true
    }
    runtime {
        extendsFrom compile
    }
}
configurations.compile {
    description = <span class="hl-string">'compile classpath'</span>
}</pre></div></div><br class="example-break"></div><div class="section" title="8.2.&nbsp;Repositories"><div class="titlepage"><div><div><h2 class="title"><a name="N1063E"></a>8.2.&nbsp;Repositories</h2></div></div></div><p>Artifacts are stored in <em class="firstterm">repositories</em>.</p><p>To use maven central repository:</p><div class="example"><a name="defineRepository"></a><p class="title"><b>Example&nbsp;8.4.&nbsp;Usage of Maven central repository</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">repositories {
    mavenCentral()
}</pre></div></div><br class="example-break"><p>To use a local directory:</p><div class="example"><a name="defineRepository"></a><p class="title"><b>Example&nbsp;8.5.&nbsp;Usage of a local directory</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">repositories {
    flatDir name: <span class="hl-string">'localRepository'</span>, dirs: <span class="hl-string">'lib'</span>
}</pre></div></div><br class="example-break"><p>You can also use any Ivy resolver. You can have multiple repositories.</p><p>To access a repository:</p><div class="example"><a name="defineRepository"></a><p class="title"><b>Example&nbsp;8.6.&nbsp;Accessing a repository</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">println repositories.localRepository.name
    println repositories[<span class="hl-string">'localRepository'</span>].name</pre></div></div><br class="example-break"><p>To configure a repository:</p><div class="example"><a name="defineRepository"></a><p class="title"><b>Example&nbsp;8.7.&nbsp;Configuration of a repository</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">repositories {
    localRepository {
        addArtifactPattern(file(<span class="hl-string">'lib'</span>).absolutePath + <span class="hl-string">'/[name]/[revision]/[name]-[revision].[ext]'</span>)
    }
}
repositories.localRepository {
    addArtifactPattern(file(<span class="hl-string">'lib'</span>).absolutePath + <span class="hl-string">'/[name]/[revision]/[name]-[revision].[ext]'</span>)
}</pre></div></div><br class="example-break"></div><div class="section" title="8.3.&nbsp;External dependencies"><div class="titlepage"><div><div><h2 class="title"><a name="N10680"></a>8.3.&nbsp;External dependencies</h2></div></div></div><p>To define an external dependency, you add a dependency to a configuration:</p><div class="example"><a name="externalDependencies"></a><p class="title"><b>Example&nbsp;8.8.&nbsp;Definition of an external dependency</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">configurations {
    compile
}

dependencies {
    compile group: <span class="hl-string">'commons-collections'</span>, name: <span class="hl-string">'commons-collections'</span>, version: <span class="hl-string">'3.2'</span>
}</pre></div></div><br class="example-break"><p>
        <code class="literal">group</code> and <code class="literal">version</code> are optional</p><p>TBD - configuring an external dependency</p><p>To use the external dependencies of a configuration:</p><div class="example"><a name="externalDependencies"></a><p class="title"><b>Example&nbsp;8.9.&nbsp;Usage of external dependency of a configuration</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task listJars &lt;&lt; {
    configurations.compile.each { File file -&gt; println file.name }
}</pre><p>Output of <strong class="userinput"><code>gradle -q listJars</code></strong>
        </p><pre class="screen">&gt; gradle -q listJars
commons-collections-3.2.jar</pre></div></div><br class="example-break"></div><div class="section" title="8.4.&nbsp;Artifact publishing"><div class="titlepage"><div><div><h2 class="title"><a name="N106B0"></a>8.4.&nbsp;Artifact publishing</h2></div></div></div><p>TBD</p></div><div class="section" title="8.5.&nbsp;API"><div class="titlepage"><div><div><h2 class="title"><a name="N106B5"></a>8.5.&nbsp;API</h2></div></div></div><p>Configurations are contained in a <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/artifacts/ConfigurationContainer.html" target="_top">
          <code class="classname">ConfigurationContainer</code>
        </a>.
            Each configuration implements the <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/artifacts/Configuration.html" target="_top">
          <code class="classname">Configuration</code>
        </a>.</p></div></div><div class="chapter" title="Chapter&nbsp;9.&nbsp;Using the Gradle Command-Line"><div class="titlepage"><div><div><h1><a name="tutorial_gradle_command_line"></a>Chapter&nbsp;9.&nbsp;Using the Gradle Command-Line</h1></div></div></div><p>This chapter introduces the basics of the Gradle command-line. You run a build using the
        <span class="command"><strong>gradle</strong></span> command, which you have already seen in action in previous chapters.</p><div class="section" title="9.1.&nbsp;Executing multiple tasks"><div class="titlepage"><div><div><h2 class="title"><a name="N106D3"></a>9.1.&nbsp;Executing multiple tasks</h2></div></div></div><p>You can execute multiple tasks in a single build by listing each of the tasks on the command-line. For example,
            the command <strong class="userinput"><code>gradle compile test</code></strong> will execute the <code class="literal">compile</code> and
            <code class="literal">test</code> tasks. Gradle will execute the tasks in the order that they are listed on the
            command-line, and will also execute the dependencies for each task. Each task is executed once only,
            regardless of why it is included in the build: whether it was specified on the command-line, or it a
            dependency of another task, or both. Let's look at an example.</p><p>
            Below four tasks are defined. Both <code class="literal">dist</code> and <code class="literal">test</code> depend on the
            <code class="literal">compile</code> task. Running <strong class="userinput"><code>gradle dist test</code></strong> for this build script
            results in the <code class="literal">compile</code> task being executed only once.</p><div class="figure"><a name="N106F2"></a><p class="title"><b>Figure&nbsp;9.1.&nbsp;Task dependencies</b></p><div class="figure-contents"><img src="images/commandLineTutorialTasks.png" alt="Task dependencies"></div></div><br class="figure-break"><div class="example"><a name="multipleTasksFromCommandLine"></a><p class="title"><b>Example&nbsp;9.1.&nbsp;Executing multiple tasks</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task compile &lt;&lt; {
    println <span class="hl-string">'compiling source'</span>
}

task compileTest(dependsOn: compile) &lt;&lt; {
    println <span class="hl-string">'compiling unit tests'</span>
}

task test(dependsOn: [compile, compileTest]) &lt;&lt; {
    println <span class="hl-string">'running unit tests'</span>
}

task dist(dependsOn: [compile, test]) &lt;&lt; {
    println <span class="hl-string">'building the distribution'</span>
}</pre><p>Output of <strong class="userinput"><code>gradle dist test</code></strong>
        </p><pre class="screen">&gt; gradle dist test
:compile
compiling source
:compileTest
compiling unit tests
:test
running unit tests
:dist
building the distribution

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>
            Because each task is executed once only, executing <strong class="userinput"><code>gradle test test</code></strong> is exactly the same
            as executing <strong class="userinput"><code>gradle test</code></strong>.</p></div><div class="section" title="9.2.&nbsp;Excluding tasks"><div class="titlepage"><div><div><h2 class="title"><a name="sec:excluding_tasks_from_the_command_line"></a>9.2.&nbsp;Excluding tasks</h2></div></div></div><p>You can exclude a task from being executed using the <code class="option">-x</code> command-line option and providing
            the name of the task to exclude. Let's try this with the sample build file above.</p><div class="example"><a name="excludeTask"></a><p class="title"><b>Example&nbsp;9.2.&nbsp;Excluding tasks</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle dist -x test</code></strong>
        </p><pre class="screen">&gt; gradle dist -x test
:compile
compiling source
:dist
building the distribution

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>You can see from the output of this example, that the <code class="literal">test</code> task is not executed, even
            though it is a dependency of the <code class="literal">dist</code> task. You will also notice that the
            <code class="literal">test</code> task's dependencies, such as <code class="literal">compileTest</code>
            are not executed either. Those dependencies of <code class="literal">test</code> that are required by another task, such as
            <code class="literal">compile</code>, are still executed.</p></div><div class="section" title="9.3.&nbsp;Task name abbreviation"><div class="titlepage"><div><div><h2 class="title"><a name="N1073B"></a>9.3.&nbsp;Task name abbreviation</h2></div></div></div><p>When you specify tasks on the command-line, you don't have to provide the full name of the task. You only need to provide enough of the
            task name to uniquely identify the task. For example, in the sample build above, you can execute task
            <code class="literal">dist</code> by running <strong class="userinput"><code>gradle d</code></strong>:</p><div class="example"><a name="abbreviateTaskName"></a><p class="title"><b>Example&nbsp;9.3.&nbsp;Abbreviated task name</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle d</code></strong>
        </p><pre class="screen">&gt; gradle d
:compile
compiling source
:compileTest
compiling unit tests
:test
running unit tests
:dist
building the distribution

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>You can also abbreviate each word in a camel case task name. For example, you can execute task <code class="literal">compileTest</code>
            by running <strong class="userinput"><code>gradle compTest</code></strong> or even <strong class="userinput"><code>gradle cT</code></strong>
      </p><div class="example"><a name="abbreviateCamelCaseTaskName"></a><p class="title"><b>Example&nbsp;9.4.&nbsp;Abbreviated camel case task name</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle cT</code></strong>
        </p><pre class="screen">&gt; gradle cT
:compile
compiling source
:compileTest
compiling unit tests

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>You can also use these abbreviations with the <code class="option">-x</code> command-line option.</p></div><div class="section" title="9.4.&nbsp;Selecting which build to execute"><div class="titlepage"><div><div><h2 class="title"><a name="N1076C"></a>9.4.&nbsp;Selecting which build to execute</h2></div></div></div><p>When you run the <span class="command"><strong>gradle</strong></span> command, it looks for a build file in the current directory.
            You can use the <code class="option">-b</code> option to select another build file. For example:
        </p><div class="example"><a name="selectProjectUsingBuildFile"></a><p class="title"><b>Example&nbsp;9.5.&nbsp;Selecting the project using a build file</b></p><div class="example-contents"><p>
          <code class="filename">subdir/myproject.gradle</code>
        </p><pre class="programlisting">task hello &lt;&lt; {
    println <span class="hl-string">"using build file '$buildFile.name' in '$buildFile.parentFile.name'."</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q -b subdir/myproject.gradle hello</code></strong>
        </p><pre class="screen">&gt; gradle -q -b subdir/myproject.gradle hello
using build file 'myproject.gradle' in 'subdir'.</pre></div></div><br class="example-break"><p>Alternatively, you can use the <code class="option">-p</code> option to specify the project directory to use:</p><div class="example"><a name="selectProjectUsingProjectDir"></a><p class="title"><b>Example&nbsp;9.6.&nbsp;Selecting the project using project directory</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle -q -p subdir hello</code></strong>
        </p><pre class="screen">&gt; gradle -q -p subdir hello
using build file 'build.gradle' in 'subdir'.</pre></div></div><br class="example-break"></div><div class="section" title="9.5.&nbsp;Obtaining information about your build"><div class="titlepage"><div><div><h2 class="title"><a name="N1079A"></a>9.5.&nbsp;Obtaining information about your build</h2></div></div></div><p>Gradle provides several command-line options which show particular details of your build. This can be
            useful for understanding the structure and dependencies of your build, and for debugging problems.
        </p><p>Running <strong class="userinput"><code>gradle --tasks</code></strong>
            gives you a list of the tasks which make up the build, broken down by project. This report shows the default
            tasks, if any, of each project, and the description and dependencies of each task. Below is an example of
            this report:
        </p><div class="example"><a name="taskListReport"></a><p class="title"><b>Example&nbsp;9.7.&nbsp;Obtaining information about tasks</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle -q --tasks</code></strong>
        </p><pre class="screen">&gt; gradle -q --tasks
------------------------------------------------------------
Root Project
------------------------------------------------------------
Default Tasks: dists

:clean - Deletes the build directory (build)
:dists 
   -&gt; :api:libs, :webapp:libs

------------------------------------------------------------
Project :api
------------------------------------------------------------
:api:libs 
rule - build&lt;ConfigurationName&gt;: builds the artifacts of the given configuration

------------------------------------------------------------
Project :webapp
------------------------------------------------------------
:webapp:libs 
rule - build&lt;ConfigurationName&gt;: builds the artifacts of the given configuration</pre></div></div><br class="example-break"><p><a name="para:commandline_dependency_report"></a>Running <strong class="userinput"><code>gradle --dependencies</code></strong>
            gives you a list of the dependencies of the build, broken down by project. This report shows the
            configurations of each project. For each configuration, the direct and transitive dependencies of that
            configuration are shown. Below is an example of this report:
        </p><div class="example"><a name="dependencyListReport"></a><p class="title"><b>Example&nbsp;9.8.&nbsp;Obtaining information about dependencies</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle -q --dependencies</code></strong>
        </p><pre class="screen">&gt; gradle -q --dependencies
------------------------------------------------------------
Root Project
------------------------------------------------------------
No configurations

------------------------------------------------------------
Project :api
------------------------------------------------------------
compile
|-----junit:junit:4.7:default

------------------------------------------------------------
Project :webapp
------------------------------------------------------------
compile
|-----commons-io:commons-io:1.2:default</pre></div></div><br class="example-break"><p>Running <strong class="userinput"><code>gradle --properties</code></strong> gives you a list of the properties of each project in
            the build.
        </p><p>You can also use the <a class="link" href="#project_reports_plugin" title="Chapter&nbsp;27.&nbsp;The Project Report Plugin">project report plugin</a> to add a
            number of reporting tasks to your project.
        </p></div><div class="section" title="9.6.&nbsp;Dry Run"><div class="titlepage"><div><div><h2 class="title"><a name="N107CE"></a>9.6.&nbsp;Dry Run</h2></div></div></div><p>Sometimes you are interested in which tasks are executed in which order for a given set of tasks specified on the
            command line, but you don't want the tasks to be executed. You can use the <code class="option">-m</code> option for this.
            For example <strong class="userinput"><code>gradle -m clean compile</code></strong> shows you all tasks to be executed as
            part of the <code class="literal">clean</code> and <code class="literal">compile</code> tasks.
            This is complementary to the <code class="option">-t</code>, which shows you all available tasks for execution.
        </p></div><div class="section" title="9.7.&nbsp;Summary"><div class="titlepage"><div><div><h2 class="title"><a name="N107E2"></a>9.7.&nbsp;Summary</h2></div></div></div><p>In this chapter, you have seen some of the things you can do with Gradle from the command-line. You can
            find out more about the <span class="command"><strong>gradle</strong></span> command in <a class="xref" href="#gradle_command_line" title="Appendix&nbsp;B.&nbsp;Gradle Command Line">Appendix&nbsp;B, <i>Gradle Command Line</i></a>.</p></div></div><div class="chapter" title="Chapter&nbsp;10.&nbsp;Using the Gradle Graphical User Interface"><div class="titlepage"><div><div><h1><a name="tutorial_gradle_gui"></a>Chapter&nbsp;10.&nbsp;Using the Gradle Graphical User Interface</h1></div></div></div><p>In addition to supporting a traditional command line interface, gradle offers
    a graphical user interface.  This is a stand alone user interface that can be launched with the
    <span class="command"><strong>--gui</strong></span> option.</p><div class="example"><a name="N107F8"></a><p class="title"><b>Example&nbsp;10.1.&nbsp;Launching the GUI</b></p><div class="example-contents"><pre class="programlisting">gradle --gui</pre></div></div><br class="example-break"><p>Note that this command blocks until the gradle GUI is closed.  Under *nix it is probably preferable to run
        this as a background task (<span class="command"><strong>gradle --gui&amp;</strong></span>)</p><p>If you run this from your gradle project working directory, you should see a tree of tasks.</p><div class="figure"><a name="N10804"></a><p class="title"><b>Figure&nbsp;10.1.&nbsp;GUI Task Tree</b></p><div class="figure-contents"><table cellpadding="0" cellspacing="0" summary="manufactured viewport for HTML img" border="0" width="586"><tr height="597"><td><img src="images/guiTaskTree.png" width="586" alt="GUI Task Tree"></td></tr></table></div></div><br class="figure-break"><p>It is preferable to run this command from your gradle project directory so that the settings of the UI will be
        stored in your project directory. However, you can run it then change the working directory via the Setup tab in
        the UI.
    </p><p>The UI displays 4 tabs along the top and an output window along the bottom.</p><div class="section" title="10.1.&nbsp;Task Tree"><div class="titlepage"><div><div><h2 class="title"><a name="N10810"></a>10.1.&nbsp;Task Tree</h2></div></div></div><p>
            The Task Tree shows a hierarchical display of all projects and their tasks.
            Double clicking a task executes it.
        </p><p>
            There is also a filter so that uncommon tasks can be hidden. You can toggle the filter via the Filter button. 
            Editing the filter allows you to configure which tasks and projects are shown. Hidden tasks show up in red.
            Note: newly created tasks will show up by default (versus being hidden by default).
        </p><p>The Task Tree context menu provides the following options:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Execute ignoring dependencies. This does not require dependent projects to be rebuilt (same as the -a option).</p></li><li class="listitem"><p>Add tasks to the favorites (see Favorites tab)</p></li><li class="listitem"><p>Hide the selected tasks. This adds them to the filter.</p></li><li class="listitem"><p>Edit the build.gradle file.
                Note: this requires Java 1.6 or higher and requires that you have .gradle files associated in your OS.
            </p></li></ul></div></div><div class="section" title="10.2.&nbsp;Favorites"><div class="titlepage"><div><div><h2 class="title"><a name="N10826"></a>10.2.&nbsp;Favorites</h2></div></div></div><p>
            The Favorites tab is place to store commonly-executed commands. These can be complex commands
            (anything that's legal to gradle) and you can provide them with a display name. This is useful for creating,
            say, a custom build command that explicitly skips tests, documentation, and samples that you could call
            "fast build".
        </p><p>
            You can reorder favorites to your liking and even export them to disk so they can imported by others.
            If you edit them, you are given options to "Always Show Live Output."
            This only applies if you have 'Only Show Output When Errors Occur'.
            This override always forces the output to be shown.
        </p></div><div class="section" title="10.3.&nbsp;Command Line"><div class="titlepage"><div><div><h2 class="title"><a name="N1082D"></a>10.3.&nbsp;Command Line</h2></div></div></div><p>
            The Command Line tab is place to execute a single gradle command directly.
            Just enter whatever you would normally enter after 'gradle' on the command line.  This also provides
            a place to try out commands before adding them to favorites.
        </p></div><div class="section" title="10.4.&nbsp;Setup"><div class="titlepage"><div><div><h2 class="title"><a name="N10832"></a>10.4.&nbsp;Setup</h2></div></div></div><p>The Setup tab allows configuration of some general settings.</p><div class="figure"><a name="N10837"></a><p class="title"><b>Figure&nbsp;10.2.&nbsp;GUI Setup</b></p><div class="figure-contents"><table cellpadding="0" cellspacing="0" summary="manufactured viewport for HTML img" border="0" width="586"><tr height="597"><td><img src="images/guiSetup.png" width="586" alt="GUI Setup"></td></tr></table></div></div><br class="figure-break"><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Current Directory</p><p>Defines the root directory of your gradle project (typically where build.gradle is located).</p></li><li class="listitem"><p>Stack Trace Output</p><p>
                    This determines how much information to write out stack traces when errors occur.
                    Note: if you specify a stack trace level on either  the Command Line or Favorites tab, it will override
                    this stack trace level.
                </p></li><li class="listitem"><p>Only Show Output When Errors Occur</p><p>Enabling this option hides any output when a task is executed unless the build fails.</p></li><li class="listitem"><p>Use Custom Gradle Executor - Advanced feature</p><p>
                    This provides you with an alternate way to launch gradle commands.
                    This is useful if your project requires some extra setup that is done inside another batch file or shell script
                    (such as specifying an init script).
                </p></li></ul></div></div></div><div class="chapter" title="Chapter&nbsp;11.&nbsp;Tutorial - 'This and That'"><div class="titlepage"><div><div><h1><a name="tutorial_this_and_that"></a>Chapter&nbsp;11.&nbsp;Tutorial - 'This and That'</h1></div></div></div><div class="section" title="11.1.&nbsp;Directory creation"><div class="titlepage"><div><div><h2 class="title"><a name="sec:directory_creation"></a>11.1.&nbsp;Directory creation</h2></div></div></div><p>There is a common situation, that multiple tasks depend on the existence of a directory. Of course you can
            deal with this by adding a
            <code class="literal">mkdir</code>
            to the beginning of those tasks. But this is kind of bloated. There is a better solution (works only if the
            tasks that need the directory have a
            <span class="emphasis"><em>dependsOn</em></span>
            relationship):
        </p><div class="example"><a name="makeDirectory"></a><p class="title"><b>Example&nbsp;11.1.&nbsp;Directory creation with mkdir</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">classesDir = <span class="hl-keyword">new</span> File(<span class="hl-string">'build/classes'</span>)
task resources &lt;&lt; {
    classesDir.mkdirs()
    <span class="hl-comment">// do something</span>
}
task compile(dependsOn: <span class="hl-string">'resources'</span>) &lt;&lt; {
    <span class="hl-keyword">if</span> (classesDir.isDirectory()) {
        println <span class="hl-string">'The class directory exists. I can operate'</span>
    }
    <span class="hl-comment">// do something</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q compile</code></strong>
        </p><pre class="screen">&gt; gradle -q compile
The class directory exists. I can operate</pre></div></div><br class="example-break"><p>But Gradle offers you also <span class="emphasis"><em>Directory Tasks</em></span> to deal with this.</p><div class="example"><a name="directoryTask"></a><p class="title"><b>Example&nbsp;11.2.&nbsp;Directory creation with Directory tasks</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">classes = dir(<span class="hl-string">'build/classes'</span>)
task resources(dependsOn: classes) &lt;&lt; {
    <span class="hl-comment">// do something</span>
}
task otherResources(dependsOn: classes) &lt;&lt; {
    <span class="hl-keyword">if</span> (classes.dir.isDirectory()) {
        println <span class="hl-string">'The class directory exists. I can operate'</span>
    }
    <span class="hl-comment">// do something</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q otherResources</code></strong>
        </p><pre class="screen">&gt; gradle -q otherResources
The class directory exists. I can operate</pre></div></div><br class="example-break"><p>A <span class="emphasis"><em>Directory Task</em></span>
            is a simple task whose name is a relative path to the project dir
            <sup>[<a href="#ftn.N10896" name="N10896" class="footnote">6</a>]</sup>
            . During the execution phase the directory corresponding to this path gets created if it does not exist yet.
            Another interesting thing to note in this example, is that you can also pass tasks objects to the dependsOn
            declaration of a task.
        </p></div><div class="section" title="11.2.&nbsp;Gradle properties and system properties"><div class="titlepage"><div><div><h2 class="title"><a name="sec:gradle_properties_and_system_properties"></a>11.2.&nbsp;Gradle properties and system properties</h2></div></div></div><p>Gradle offers a variety of ways to add properties to your build. With the <code class="option">-D</code> command line
            option you can pass a system property to the JVM which runs Gradle. The <code class="option">-D</code> option of the
            <span class="command"><strong>gradle</strong></span> command has the same effect as the <code class="option">-D</code> option of the
            <span class="command"><strong>java</strong></span> command.
        </p><p>You can also directly add properties to your project objects using properties files. You can place a
            <code class="filename">gradle.properties</code> file in the Gradle user home directory (defaults to
            <code class="filename">
          <em class="replaceable"><code>USER_HOME</code></em>/.gradle</code>) or in your project directory. For
            multi-project builds you can place <code class="filename">gradle.properties</code> files in any subproject directory.
            The properties of the <code class="filename">gradle.properties</code> can be accessed via the project object. The
            properties file in the user's home directory has precedence over property files in the project directories.
        </p><p>You can also add properties directly to your project object via the <code class="option">-P</code>
            command line option. For more exotic use cases you can even pass properties <span class="emphasis"><em>directly</em></span>
            to the project object via system and environment properties. For example if you run a build on a continuous
            integration server where you have no admin rights for the <span class="emphasis"><em>machine</em></span>. Your build script
            needs properties which values should not be seen by others. Therefore you can't use the <code class="option">-P</code>
            option. In this case you can add an environment property in the project administration section (invisible to
            normal users).
            <sup>[<a href="#ftn.N108D4" name="N108D4" class="footnote">7</a>]</sup>
            If the environment property follows the pattern
            <code class="literal">ORG_GRADLE_PROJECT_<em class="replaceable"><code>propertyName</code></em>=somevalue</code>,
            <code class="literal">propertyName</code> is added to your project object. If in the future CI servers support Gradle
            directly, they might start Gradle via its main method. Therefore we already support the same mechanism for
            system properties. The only difference is the pattern, which is
            <code class="literal">org.gradle.project.<em class="replaceable"><code>propertyName</code></em>
        </code>.
        </p><p>With the <code class="filename">gradle.properties</code> files you can also set system properties. If a property
            in such a file has the prefix <code class="literal">systemProp.</code> the property and its value are added to the 
            system properties, without the prefix.
        </p><div class="example"><a name="properties"></a><p class="title"><b>Example&nbsp;11.3.&nbsp;Setting properties with a gradle.properties file</b></p><div class="example-contents"><p>
          <code class="filename">gradle.properties</code>
        </p><pre class="programlisting">gradlePropertiesProp=gradlePropertiesValue
systemPropertiesProp=shouldBeOverWrittenBySystemProp
envPropertiesProp=shouldBeOverWrittenByEnvProp
systemProp.system=systemValue</pre><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task printProps &lt;&lt; {
    println commandLineProjectProp
    println gradlePropertiesProp
    println systemProjectProp
    println envProjectProp
    println System.properties[<span class="hl-string">'system'</span>]
}</pre><p>Output of <strong class="userinput"><code>gradle -q -PcommandLineProjectProp=commandLineProjectPropValue -Dorg.gradle.project.systemProjectProp=systemPropertyValue printProps</code></strong>
        </p><pre class="screen">&gt; gradle -q -PcommandLineProjectProp=commandLineProjectPropValue -Dorg.gradle.project.systemProjectProp=systemPropertyValue printProps
commandLineProjectPropValue
gradlePropertiesValue
systemPropertyValue
envPropertyValue
systemValue</pre></div></div><br class="example-break"><div class="section" title="11.2.1.&nbsp;Checking for project properties"><div class="titlepage"><div><div><h3 class="title"><a name="sub:checking_for_project_properties"></a>11.2.1.&nbsp;Checking for project properties</h3></div></div></div><p>You can access a project property in your build script simply by using its name as you would use a
                variable. In case this property does not exists, an exception is thrown and the build fails. If your
                build script relies on optional properties the user might set for example in a gradle.properties file,
                you need to check for existence before you can access them. You can do this by using the method
                <code class="literal">hasProperty('propertyName')</code>
                which returns
                <code class="literal">true</code>
                or <code class="literal">false</code>.
            </p></div></div><div class="section" title="11.3.&nbsp;Accessing the web via a proxy"><div class="titlepage"><div><div><h2 class="title"><a name="sec:accessing_the_web_via_a_proxy"></a>11.3.&nbsp;Accessing the web via a proxy</h2></div></div></div><p>Setting a proxy for web access (for example for downloading dependencies) is easy. Gradle does not need to
            provide special functionality for this. The JVM can be instructed to go via proxy by setting certain system
            properties. You could set these system properties directly in your build script with <code class="literal">
                System.properties['proxy.proxyUser'] = 'userid'</code>. An arguably nicer way is shown in
            <a class="xref" href="#sec:gradle_properties_and_system_properties" title="11.2.&nbsp;Gradle properties and system properties">Section&nbsp;11.2, &ldquo;Gradle properties and system properties&rdquo;</a>. Your gradle.properties file could look like
            this:
        </p><div class="example"><a name="N1092A"></a><p class="title"><b>Example&nbsp;11.4.&nbsp;Accessing the web via a proxy</b></p><div class="example-contents"><p>
          <code class="filename">gradle.properties</code>
        </p><pre class="programlisting">systemProp.http.proxyHost=www.somehost.org
systemProp.http.proxyPort=8080
systemProp.http.proxyUser=userid
systemProp.http.proxyPassword=password
systemProp.http.nonProxyHosts=*.nonproxyrepos.com|localhost</pre></div></div><br class="example-break"><p>We could not find a good overview for all possible proxy settings. One place to look are the constants
            in a file from the ant project. Here a
            <a class="ulink" href="http://svn.apache.org/viewvc/ant/core/trunk/src/main/org/apache/tools/ant/util/ProxySetup.java?view=markup&amp;pathrev=556977" target="_top">
                link
            </a> to the svn view. The other is a
            <a class="ulink" href="http://java.sun.com/javase/6/docs/technotes/guides/net/properties.html" target="_top">
                Networking Properties page
            </a> from the JDK docs. If anyone knows a better overview please let us know via the mailing list.
        </p></div><div class="section" title="11.4.&nbsp;Caching"><div class="titlepage"><div><div><h2 class="title"><a name="sec:caching"></a>11.4.&nbsp;Caching</h2></div></div></div><p>To improve the responsiveness Gradle caches the compiled build script by default. The first time you run a
            build for a project, Gradle creates a
            <code class="literal">.gradle</code>
            directory in which it puts the compiled build script. The next time you run this build, Gradle uses the
            compiled build script, if the timestamp of the compiled script is newer than the timestamp of the actual
            build script. Otherwise the build script gets compiled and the new version is stored in the cache. If you
            run Gradle with the
            <code class="literal">-x</code>
            option, any existing cache is ignored and the build script is compiled and executed on the fly. If you run
            Gradle with the
            <code class="literal">-r</code>
            option, the build script is always compiled and stored in the cache. That way you can always rebuild the
            cache if for example the timestamps for some reasons don't reflect that the build script needs to be
            recompiled.
        </p></div><div class="section" title="11.5.&nbsp;Configuring arbitrary objects"><div class="titlepage"><div><div><h2 class="title"><a name="sec:configuring_arbitrary_objects"></a>11.5.&nbsp;Configuring arbitrary objects</h2></div></div></div><p>You can configure arbitrary objects in the following very readable way.
        </p><div class="example"><a name="configureObject"></a><p class="title"><b>Example&nbsp;11.5.&nbsp;Configuring arbitrary objects</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task configure &lt;&lt; {
    pos = configure(<span class="hl-keyword">new</span> java.text.FieldPosition(<span class="hl-number">10</span>)) {
        beginIndex = <span class="hl-number">1</span>
        endIndex = <span class="hl-number">5</span>
    }
    println pos.beginIndex
    println pos.endIndex
}</pre><p>Output of <strong class="userinput"><code>gradle -q configure</code></strong>
        </p><pre class="screen">&gt; gradle -q configure
1
5</pre></div></div><br class="example-break"></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N10896" name="ftn.N10896" class="para">6</a>] </sup>The notation <code class="literal">dir('/somepath')</code> is a convenience method for
                    <code class="literal">tasks.add('somepath', type: Directory)</code>
                </p></div><div class="footnote"><p><sup>[<a href="#N108D4" name="ftn.N108D4" class="para">7</a>] </sup>
                    <span class="emphasis"><em>Teamcity</em></span> or <span class="emphasis"><em>Bamboo</em></span> are for example CI servers which
                    offer this functionality.
                </p></div></div></div><div class="chapter" title="Chapter&nbsp;12.&nbsp;The Project and Task API"><div class="titlepage"><div><div><h1><a name="project_and_task_api"></a>Chapter&nbsp;12.&nbsp;The Project and Task API</h1></div></div></div><div class="section" title="12.1.&nbsp;Project API"><div class="titlepage"><div><div><h2 class="title"><a name="sec:project_api"></a>12.1.&nbsp;Project API</h2></div></div></div><p>In the tutorial in <a class="xref" href="#tutorial_using_tasks" title="Chapter&nbsp;4.&nbsp;Build Script Basics">Chapter&nbsp;4, <i>Build Script Basics</i></a> we used, for example, the
            <code class="literal">task()</code> method. Where does this method come from? We said earlier that the build script
            defines a project in Gradle. For Gradle, this means that it creates an instance of
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/Project.html" target="_top">
          <code class="classname">Project</code>
        </a> and associates this <code class="classname">Project</code> object with
            the build script. As the build script executes, it configures this <code class="classname">Project</code> object.
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Any method you call in your build script, which <span class="emphasis"><em>is not defined</em></span>
                    in the build script, is delegated to the <code class="classname">Project</code> object.
                </p></li><li class="listitem"><p>Any property you access in your build script, which <span class="emphasis"><em>is not defined</em></span>
                    in the build script, is delegated to the <code class="classname">Project</code> object.
                </p></li></ul></div><p>Let's try this out and try to access the <code class="literal">name</code> property of the
            <code class="classname">Project</code> object.
        </p><div class="example"><a name="projectApi"></a><p class="title"><b>Example&nbsp;12.1.&nbsp;Accessing property of the Project object</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task check &lt;&lt; {
    println name
    println project.name
}</pre><p>Output of <strong class="userinput"><code>gradle -q check</code></strong>
        </p><pre class="screen">&gt; gradle -q check
projectApi
projectApi</pre></div></div><br class="example-break"><p>Both <code class="literal">println</code> statements print out the same property. The first uses auto-delegation to
            the <code class="classname">Project</code> object, for properties not defined in the build script. The other
            statement uses the <code class="literal">project</code> property available to any build script, which returns the
            associated <code class="classname">Project</code> object. Only if you define a property or a method which has the
            same name as a member of the <code class="classname">Project</code> object, you need to use the <code class="literal">project</code>
            property.
        </p><p>Have a look at the <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/Project.html" target="_top">
          <code class="classname">Project</code>
        </a> API to find out more about project
            properties and methods.</p><div class="section" title="12.1.1.&nbsp;Standard project properties"><div class="titlepage"><div><div><h3 class="title"><a name="N109D0"></a>12.1.1.&nbsp;Standard project properties</h3></div></div></div><p>The <code class="classname">Project</code> object provides some standard properties, which are available in
                your build script. The following table lists a few of the commonly used ones.
            </p><div class="table"><p class="title"><b>Table&nbsp;12.1.&nbsp;Project Properties</b></p><div class="table-contents"><table id="N109D8"><thead><tr>
                        <td>Name</td>
                        <td>Type</td>
                        <td>Default Value</td>
                    </tr></thead><tr>
                    <td>
              <code class="literal">project</code>
            </td>
                    <td>
              <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/Project.html" target="_top">
                <code class="classname">Project</code>
              </a>
            </td>
                    <td>The <code class="classname">Project</code> instance</td>
                </tr><tr>
                    <td>
              <code class="literal">name</code>
            </td>
                    <td>
              <code class="classname">String</code>
            </td>
                    <td>The name of the directory containing the build script.</td>
                </tr><tr>
                    <td>
              <code class="literal">path</code>
            </td>
                    <td>
              <code class="classname">String</code>
            </td>
                    <td>The absolute path of the project.</td>
                </tr><tr>
                    <td>
              <code class="literal">buildFile</code>
            </td>
                    <td>
              <code class="classname">File</code>
            </td>
                    <td>The build script.</td>
                </tr><tr>
                    <td>
              <code class="literal">projectDir</code>
            </td>
                    <td>
              <code class="classname">File</code>
            </td>
                    <td>The directory containing the build script.</td>
                </tr><tr>
                    <td>
              <code class="literal">buildDirName</code>
            </td>
                    <td>
              <code class="classname">String</code>
            </td>
                    <td>
              <code class="filename">build</code>
            </td>
                </tr><tr>
                    <td>
              <code class="literal">buildDir</code>
            </td>
                    <td>
              <code class="classname">File</code>
            </td>
                    <td>
              <code class="filename">
                <em class="replaceable"><code>projectDir</code></em>/build</code>
            </td>
                </tr><tr>
                    <td>
              <code class="literal">group</code>
            </td>
                    <td>
              <code class="classname">Object</code>
            </td>
                    <td>
              <code class="literal">unspecified</code>
            </td>
                </tr><tr>
                    <td>
              <code class="literal">version</code>
            </td>
                    <td>
              <code class="classname">Object</code>
            </td>
                    <td>
              <code class="literal">unspecified</code>
            </td>
                </tr><tr>
                    <td>
              <code class="literal">ant</code>
            </td>
                    <td>
              <code class="classname">AntBuilder</code>
            </td>
                    <td>An <code class="classname">AntBuilder</code> instance</td>
                </tr></table></div></div><p>Below is a sample build which demonstrates some of these properties.</p><div class="example"><a name="projectCoreProperties"></a><p class="title"><b>Example&nbsp;12.2.&nbsp;Project properties</b></p><div class="example-contents"><p>Build layout</p><pre class="programlisting">projectCoreProperties/
  build.gradle
  subProject/
    build.gradle</pre><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">task check &lt;&lt; {
    allprojects {
        println <span class="hl-string">"project path $path"</span>
        println <span class="hl-string">"  project name = $name"</span>
        println <span class="hl-string">"  project dir = '${rootProject.relativePath(projectDir)}'"</span>
        println <span class="hl-string">"  build file = '${rootProject.relativePath(buildFile)}'"</span>
        println <span class="hl-string">"  build dir = '${rootProject.relativePath(buildDir)}'"</span>
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q check</code></strong>
          </p><pre class="screen">&gt; gradle -q check
project path :
  project name = projectCoreProperties
  project dir = ''
  build file = 'build.gradle'
  build dir = 'build'
project path :subProject
  project name = subProject
  project dir = 'subProject'
  build file = 'subProject/build.gradle'
  build dir = 'subProject/build'</pre></div></div><br class="example-break"></div></div><div class="section" title="12.2.&nbsp;Task API"><div class="titlepage"><div><div><h2 class="title"><a name="sec:task_api"></a>12.2.&nbsp;Task API</h2></div></div></div><p>Many of the methods of the <code class="classname">Project</code> instance return task objects. We have already seen some ways that you can
            use task objects in <a class="xref" href="#tutorial_using_tasks" title="Chapter&nbsp;4.&nbsp;Build Script Basics">Chapter&nbsp;4, <i>Build Script Basics</i></a>.
            Look here to learn more about <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/Task.html" target="_top">
          <code class="classname">Task</code>
        </a>.
        </p></div><div class="section" title="12.3.&nbsp;Summary"><div class="titlepage"><div><div><h2 class="title"><a name="N10AD6"></a>12.3.&nbsp;Summary</h2></div></div></div><p>The project and the task API constitute the core layer of Gradle and provide all the possible interaction
            options with this layer.
            <sup>[<a href="#ftn.N10ADB" name="N10ADB" class="footnote">8</a>]</sup>
            This core-layer constitutes a language for dependency based programming.
            <sup>[<a href="#ftn.N10AE2" name="N10AE2" class="footnote">9</a>]</sup>
            There are many other projects providing such a language. There is Ant for Java, Rake and Rant for Ruby,
            SCons for Python, the good old Make and many more.
            <sup>[<a href="#ftn.N10AE9" name="N10AE9" class="footnote">10</a>]</sup>
            We think that one thing that makes Gradle special compared to the other tools, is its strong support for
            applying dependency based programming on <span class="emphasis"><em>multi-project</em></span> builds. We also think that just
            Gradle's core layer (together with its integration of the Ant tasks), provides a more convenient build
            system than Ant's core layer.
        </p></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N10ADB" name="ftn.N10ADB" class="para">8</a>] </sup>There is more to come for this layer in the other chapters, e.g. support for multi-project builds
                    (see <a class="xref" href="#multi_project_builds" title="Chapter&nbsp;31.&nbsp;Multi-project Builds">Chapter&nbsp;31, <i>Multi-project Builds</i></a>).
                </p></div><div class="footnote"><p><sup>[<a href="#N10AE2" name="ftn.N10AE2" class="para">9</a>] </sup>Martin Fowler has written about this:
                    <a class="ulink" href="http://martinfowler.com/articles/rake.html#DependencyBasedProgramming" target="_top">http://martinfowler.com/articles/rake.html#DependencyBasedProgramming</a>
                </p></div><div class="footnote"><p><sup>[<a href="#N10AE9" name="ftn.N10AE9" class="para">10</a>] </sup>Interestingly, Maven2 is the only major build system which does not use dependency based
                    programming.
                </p></div></div></div><div class="chapter" title="Chapter&nbsp;13.&nbsp;More about Tasks"><div class="titlepage"><div><div><h1><a name="more_about_tasks"></a>Chapter&nbsp;13.&nbsp;More about Tasks</h1></div></div></div><p>In the introductory tutorial (<a class="xref" href="#tutorial_using_tasks" title="Chapter&nbsp;4.&nbsp;Build Script Basics">Chapter&nbsp;4, <i>Build Script Basics</i></a>) you have learned how to
        create simple tasks. You have also learned how to add additional behavior to these tasks later on. And you have
        learned how to create dependencies between tasks. This was all about simple tasks. But Gradle takes the concept
        of tasks further. Gradle supports <em class="firstterm">enhanced tasks</em>, that is, tasks which have their own
        properties and methods. This is really different to what you are used to with Ant targets. Such enhanced tasks are
        either provided by you or are provided by Gradle.
    </p><div class="section" title="13.1.&nbsp;Defining tasks"><div class="titlepage"><div><div><h2 class="title"><a name="N10AFE"></a>13.1.&nbsp;Defining tasks</h2></div></div></div><p>We have already seen how to define tasks using a keyword style in <a class="xref" href="#tutorial_using_tasks" title="Chapter&nbsp;4.&nbsp;Build Script Basics">Chapter&nbsp;4, <i>Build Script Basics</i></a>.
            There are a few variations on this style, which you may need to use in certain situations. For example,
            the keyword style does not work in expressions.
        </p><div class="example"><a name="defineAsExpression"></a><p class="title"><b>Example&nbsp;13.1.&nbsp;Defining tasks</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task(hello) &lt;&lt; {
    println <span class="hl-string">"hello"</span>
}

task(copy, type: Copy) {
    from(file(<span class="hl-string">'srcDir'</span>))
    into(buildDir)
}</pre></div></div><br class="example-break"><p>You can also use strings for the task names:</p><div class="example"><a name="defineUsingStringTaskNames"></a><p class="title"><b>Example&nbsp;13.2.&nbsp;Defining tasks - using strings</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task(<span class="hl-string">'hello'</span>) &lt;&lt;
{
    println <span class="hl-string">"hello"</span>
}

task(<span class="hl-string">'copy'</span>, type: Copy) {
    from(file(<span class="hl-string">'srcDir'</span>))
    into(buildDir)
}</pre></div></div><br class="example-break"><p>There is an alternative syntax for defining tasks, which you may prefer to use:</p><div class="example"><a name="addToTaskContainer"></a><p class="title"><b>Example&nbsp;13.3.&nbsp;Defining tasks with alternative syntax</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">tasks.add(name: <span class="hl-string">'hello'</span>) &lt;&lt; {
    println <span class="hl-string">"hello"</span>
}

tasks.add(name: <span class="hl-string">'copy'</span>, type: Copy) {
    from(file(<span class="hl-string">'srcDir'</span>))
    into(buildDir)
}</pre></div></div><br class="example-break"><p>Here we add tasks to the <code class="literal">tasks</code> collection. Have a look at
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/TaskContainer.html" target="_top">
          <code class="classname">TaskContainer</code>
        </a> for more variations of the <code class="literal">add()</code>
            method.</p></div><div class="section" title="13.2.&nbsp;Locating tasks"><div class="titlepage"><div><div><h2 class="title"><a name="N10B3D"></a>13.2.&nbsp;Locating tasks</h2></div></div></div><p>You often need to locate the tasks that you have defined in the build file, for example, to configure them
            or use them for dependencies. There are a number of ways you can do this. Firstly, each task is available as
            a property of the project, using the task name as the property name:
        </p><div class="example"><a name="accessAsProperty"></a><p class="title"><b>Example&nbsp;13.4.&nbsp;Accessing tasks as properties</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task hello

println hello.name
println project.hello.name</pre></div></div><br class="example-break"><p>Tasks are also available through the <code class="literal">tasks</code> collection.</p><div class="example"><a name="accessFromTaskContainer"></a><p class="title"><b>Example&nbsp;13.5.&nbsp;Accessing tasks via tasks collection</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task hello

println tasks.hello.name
println tasks[<span class="hl-string">'hello'</span>].name</pre></div></div><br class="example-break"><p>You can access tasks from any project using the task's path using the <code class="literal">tasks.getByPath()</code>
            method. You can call the <code class="literal">getByPath()</code> method with a task name, or a relative path, or an
            absolute path.</p><div class="example"><a name="accessUsingPath"></a><p class="title"><b>Example&nbsp;13.6.&nbsp;Accessing tasks by path</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">project(<span class="hl-string">':projectA'</span>) {
    task hello
}

task hello

println tasks.getByPath(<span class="hl-string">'hello'</span>).path
println tasks.getByPath(<span class="hl-string">':hello'</span>).path
println tasks.getByPath(<span class="hl-string">'projectA:hello'</span>).path
println tasks.getByPath(<span class="hl-string">':projectA:hello'</span>).path</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong>
        </p><pre class="screen">&gt; gradle -q hello
:hello
:hello
:projectA:hello
:projectA:hello</pre></div></div><br class="example-break"><p>Have a look at <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/TaskContainer.html" target="_top">
          <code class="classname">TaskContainer</code>
        </a> for more options for locating tasks.</p></div><div class="section" title="13.3.&nbsp;Configuring tasks"><div class="titlepage"><div><div><h2 class="title"><a name="sec:configuring_tasks"></a>13.3.&nbsp;Configuring tasks</h2></div></div></div><p>As an example, let's look at the <code class="classname">Copy</code> task provided by Gradle. To create a
            <code class="classname">Copy</code> task for your build, you can declare in your build script:
            <sup>[<a href="#ftn.N10B8F" name="N10B8F" class="footnote">11</a>]</sup>
        </p><div class="example"><a name="declareTask"></a><p class="title"><b>Example&nbsp;13.7.&nbsp;Creating a copy task</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task myCopy(type: Copy)</pre></div></div><br class="example-break"><p>This creates a copy task with no default behavior.
            The task can be configured using its API (see <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/Copy.html" target="_top">
          <code class="classname">Copy</code>
        </a>).
			The following examples show several different ways to achieve the same configuration.
        </p><div class="example"><a name="configureUsingVar"></a><p class="title"><b>Example&nbsp;13.8.&nbsp;Configuring a task - various ways</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">Copy myCopy = task(myCopy, type: Copy)
myCopy.from <span class="hl-string">'resources'</span>
myCopy.into <span class="hl-string">'target'</span>
myCopy.include(<span class="hl-string">'**/*.txt'</span>, <span class="hl-string">'**/*.xml'</span>, <span class="hl-string">'**/*.properties'</span>)</pre></div></div><br class="example-break"><p>This is similar to the way we would normally configure objects in Java. You have to repeat the context
            (<code class="literal">myCopy</code>) in the configuration statement every time. This is a redundancy and not very
            nice to read.
        </p><p>There is a more convenient way of doing this.
        </p><div class="example"><a name="configureUsingLiterateStyle"></a><p class="title"><b>Example&nbsp;13.9.&nbsp;Configuring a task - fluent interface</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task(myCopy, type: Copy)
    .from(<span class="hl-string">'resources'</span>)
    .into(<span class="hl-string">'target'</span>)
    .include(<span class="hl-string">'**/*.txt'</span>, <span class="hl-string">'**/*.xml'</span>, <span class="hl-string">'**/*.properties'</span>)</pre></div></div><br class="example-break"><p>You might know this approach from the Hibernates Criteria Query API or JMock. Of course the API of a task
            has to support this. The <code class="literal">from</code>, <code class="literal">to</code> and <code class="literal">include</code>
            methods all return an object that may be used to chain to additional configuration methods. Gradle's build-in tasks usually
            support this configuration style.
        </p><p>But there is yet another way of configuring a task. It also preserves the context and it is arguably the
            most readable. It is usually our favorite.
        </p><div class="example"><a name="configureUsingClosure"></a><p class="title"><b>Example&nbsp;13.10.&nbsp;Configuring a task - with closure</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task myCopy(type: Copy)

myCopy {
   from <span class="hl-string">'resources'</span>
   into <span class="hl-string">'target'</span>
   include(<span class="hl-string">'**/*.txt'</span>, <span class="hl-string">'**/*.xml'</span>, <span class="hl-string">'**/*.properties'</span>)
}</pre></div></div><br class="example-break"><p>This works for <span class="emphasis"><em>any</em></span> task. Line 3 of the example is just a shortcut for the
            <code class="literal">tasks.getByName()</code> method. It is important to note that if you pass a closure to the
            <code class="literal">getByName()</code> method, this closure is applied to <span class="emphasis"><em>configure</em></span> the task.
        </p><p>There is a slightly different ways of doing this.</p><div class="example"><a name="configureUsingConfigure"></a><p class="title"><b>Example&nbsp;13.11.&nbsp;Configuring a task - with configure() method</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task myCopy(type: Copy)

myCopy.configure {
   from(<span class="hl-string">'source'</span>)
   into(<span class="hl-string">'target'</span>)
   include(<span class="hl-string">'**/*.txt'</span>, <span class="hl-string">'**/*.xml'</span>, <span class="hl-string">'**/*.properties'</span>)
}</pre></div></div><br class="example-break"><p>Every task has a <code class="literal">configure()</code> method, which you can pass a closure for configuring the task.
            Gradle uses this style for configuring objects in many places, not just for tasks.
        </p><p>You can also use a configuration closure when you define a task.</p><div class="example"><a name="defineAndConfigure"></a><p class="title"><b>Example&nbsp;13.12.&nbsp;Defining a task with closure</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task copy(type: Copy) {
   from <span class="hl-string">'resources'</span>
   into <span class="hl-string">'target'</span>
   include(<span class="hl-string">'**/*.txt'</span>, <span class="hl-string">'**/*.xml'</span>, <span class="hl-string">'**/*.properties'</span>)
}</pre></div></div><br class="example-break"></div><div class="section" title="13.4.&nbsp;Adding dependencies to a task"><div class="titlepage"><div><div><h2 class="title"><a name="sec:adding_dependencies_to_tasks"></a>13.4.&nbsp;Adding dependencies to a task</h2></div></div></div><p>There are several ways you can define the dependencies of a task. In
            <a class="xref" href="#sec:task_dependencies" title="4.3.&nbsp;Task dependencies">Section&nbsp;4.3, &ldquo;Task dependencies&rdquo;</a>
            you were introduced to defining dependencies using task names. Task names can refer to tasks in the same
            project as the task, or to tasks in other projects. To refer to a task in another project, you prefix the
            name of the task with the path of the project it belongs to. Below is an example which adds a dependency
            from
            <code class="literal">projectA:taskX</code>
            to
            <code class="literal">projectB:taskY</code>:
        </p><div class="example"><a name="addDependencyUsingPath"></a><p class="title"><b>Example&nbsp;13.13.&nbsp;Adding dependency on task from another project</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">project(<span class="hl-string">'projectA'</span>) {
    task taskX(dependsOn: <span class="hl-string">':projectB:taskY'</span>) &lt;&lt; {
        println <span class="hl-string">'taskX'</span>
    }
}

project(<span class="hl-string">'projectB'</span>) {
    task taskY &lt;&lt; {
        println <span class="hl-string">'taskY'</span>
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q taskX</code></strong>
        </p><pre class="screen">&gt; gradle -q taskX
taskY
taskX</pre></div></div><br class="example-break"><p>Instead of using a task name, you can define a dependency using a
            <code class="classname">Task</code> object, as shown in this example:
        </p><div class="example"><a name="addDependencyUsingTask"></a><p class="title"><b>Example&nbsp;13.14.&nbsp;Adding dependency using task object</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task taskX &lt;&lt; {
    println <span class="hl-string">'taskX'</span>
}

task taskY &lt;&lt; {
    println <span class="hl-string">'taskY'</span>
}

taskX.dependsOn taskY</pre><p>Output of <strong class="userinput"><code>gradle -q taskX</code></strong>
        </p><pre class="screen">&gt; gradle -q taskX
taskY
taskX</pre></div></div><br class="example-break"><p>For more advanced uses, you can define a task dependency using a closure. When evaluated, the closure is
            passed the task whose dependencies are being calculated. The closure should return a single
            <code class="classname">Task</code> or collection of <code class="classname">Task</code> objects, which are then treated
            as dependencies of the task. The following example adds a dependency from <code class="literal">taskX</code>
            to all the tasks in the project whose name starts with <code class="literal">lib</code>:
        </p><div class="example"><a name="addDependencyUsingClosure"></a><p class="title"><b>Example&nbsp;13.15.&nbsp;Adding dependency using closure</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task taskX &lt;&lt; {
    println <span class="hl-string">'taskX'</span>
}

taskX.dependsOn {
    tasks.findAll { task -&gt; task.name.startsWith(<span class="hl-string">'lib'</span>) }
}

task lib1 &lt;&lt; {
    println <span class="hl-string">'lib1'</span>
}

task lib2 &lt;&lt; {
    println <span class="hl-string">'lib2'</span>
}

task notALib &lt;&lt; {
    println <span class="hl-string">'notALib'</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q taskX</code></strong>
        </p><pre class="screen">&gt; gradle -q taskX
lib1
lib2
taskX</pre></div></div><br class="example-break"><p>For more information about task dependencies, see the <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/Task.html" target="_top">
          <code class="classname">Task</code>
        </a> API.</p></div><div class="section" title="13.5.&nbsp;Adding a description to a task"><div class="titlepage"><div><div><h2 class="title"><a name="N10C73"></a>13.5.&nbsp;Adding a description to a task</h2></div></div></div><p>You can add a description to your task. This description is for example displayed when executing
            <code class="code">gradle -t</code>.
        </p><div class="example"><a name="describeTask"></a><p class="title"><b>Example&nbsp;13.16.&nbsp;Adding a description to a task</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task copy(type: Copy) {
   description = <span class="hl-string">'Copies the resource directory to the target directory.'</span>
   from <span class="hl-string">'resources'</span>
   into <span class="hl-string">'target'</span>
   include(<span class="hl-string">'**/*.txt'</span>, <span class="hl-string">'**/*.xml'</span>, <span class="hl-string">'**/*.properties'</span>)
}</pre></div></div><br class="example-break"></div><div class="section" title="13.6.&nbsp;Replacing tasks"><div class="titlepage"><div><div><h2 class="title"><a name="N10C87"></a>13.6.&nbsp;Replacing tasks</h2></div></div></div><p>Sometimes you want to replace a task. For example if you want to exchange a task added by the Java Plugin
            with a custom task of a different type. You can achieve this with:
        </p><div class="example"><a name="replaceTask"></a><p class="title"><b>Example&nbsp;13.17.&nbsp;Overwriting a task</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task copy(type: Copy)

task copy(overwrite: true) &lt;&lt; {
    println(<span class="hl-string">'I am the new one.'</span>)
}</pre><p>Output of <strong class="userinput"><code>gradle -q copy</code></strong>
        </p><pre class="screen">&gt; gradle -q copy
I am the new one.</pre></div></div><br class="example-break"><p>Here we replace a task of type <code class="literal">Copy</code> with a simple task. When creating the simple
            task, you have to set the <code class="literal">overwrite</code> property to true. Otherwise Gradle throws an
            exception, saying that a task with such a name already exists.
        </p></div><div class="section" title="13.7.&nbsp;Skipping tasks"><div class="titlepage"><div><div><h2 class="title"><a name="N10CA7"></a>13.7.&nbsp;Skipping tasks</h2></div></div></div><p>Gradle offers multiple ways to skip the execution of a task.</p><div class="section" title="13.7.1.&nbsp;Using a predicate"><div class="titlepage"><div><div><h3 class="title"><a name="N10CAC"></a>13.7.1.&nbsp;Using a predicate</h3></div></div></div><p>You can use the <code class="literal">onlyIf()</code> method to attach a predicate to a task. The task's
                actions are only executed if the predicate evaluates to true. You implement the predicate as a closure.
                The closure is passed the task as a parameter, and should return true if the task should execute
                and false if the task should be skipped. The predicate is evaluated just before the task is due
                to be executed.
                </p><div class="example"><a name="taskOnlyIf"></a><p class="title"><b>Example&nbsp;13.18.&nbsp;Skipping a task using a predicate</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">task hello &lt;&lt; {
    println <span class="hl-string">'hello world'</span>
}

hello.onlyIf { !project.hasProperty(<span class="hl-string">'skipHello'</span>) }</pre><p>Output of <strong class="userinput"><code>gradle hello -PskipHello</code></strong>
          </p><pre class="screen">&gt; gradle hello -PskipHello
:hello SKIPPED as onlyIf is false

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"></div><div class="section" title="13.7.2.&nbsp;Using StopExecutionException"><div class="titlepage"><div><div><h3 class="title"><a name="N10CC7"></a>13.7.2.&nbsp;Using StopExecutionException</h3></div></div></div><p>If the rules for skipping a task can't be expressed with predicate, you can use the
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/StopExecutionException.html" target="_top">
            <code class="classname">StopExecutionException</code>
          </a>. If this exception is thrown by an action,
            the further execution of this action as well as the execution of
            any following action of this task is skipped. The build continues with executing the next task.
        </p><div class="example"><a name="stopExecutionException"></a><p class="title"><b>Example&nbsp;13.19.&nbsp;Skipping tasks with StopExecutionException</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">task compile &lt;&lt; {
    println <span class="hl-string">'We are doing the compile.'</span>
}

compile.doFirst {
    <span class="hl-comment">// Here you would put arbitrary conditions in real life. But we use this as an integration test, so we want defined behavior.</span>
    <span class="hl-keyword">if</span> (true) { <span class="hl-keyword">throw</span> <span class="hl-keyword">new</span> StopExecutionException() }
}
task myTask(dependsOn: <span class="hl-string">'compile'</span>) &lt;&lt; {
   println <span class="hl-string">'I am not affected'</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q myTask</code></strong>
          </p><pre class="screen">&gt; gradle -q myTask
I am not affected</pre></div></div><br class="example-break"><p>This feature is helpful if you work with tasks provided by Gradle. It allows you to add
            <span class="emphasis"><em>conditional</em></span> execution of the built-in actions of such a task.
            <sup>[<a href="#ftn.N10CEB" name="N10CEB" class="footnote">12</a>]</sup>
        </p></div><div class="section" title="13.7.3.&nbsp;Enabling and disabling tasks"><div class="titlepage"><div><div><h3 class="title"><a name="N10CF5"></a>13.7.3.&nbsp;Enabling and disabling tasks</h3></div></div></div><p>Every task has also an <code class="literal">enabled</code>
            flag which defaults to <code class="literal">true</code>. Setting it to <code class="literal">false</code> prevents the
            execution of any of the task's actions.
        </p><div class="example"><a name="disableTask"></a><p class="title"><b>Example&nbsp;13.20.&nbsp;Enabling and disabling tasks</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">task disableMe &lt;&lt; {
    println <span class="hl-string">'This should not be printed if the task is disabled.'</span>
}
disableMe.enabled = false</pre><p>Output of <strong class="userinput"><code>gradle disableMe</code></strong>
          </p><pre class="screen">&gt; gradle disableMe
:disableMe SKIPPED

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"></div></div><div class="section" title="13.8.&nbsp;Task rules"><div class="titlepage"><div><div><h2 class="title"><a name="N10D16"></a>13.8.&nbsp;Task rules</h2></div></div></div><p>Sometimes you want to have a task which behavior depends on a large or infinite number value range
            of parameters. A very nice and expressive way to provide such tasks are task rules: 
        </p><div class="example"><a name="taskRule"></a><p class="title"><b>Example&nbsp;13.21.&nbsp;Task rule</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">tasks.addRule(<span class="hl-string">"Pattern: ping&lt;ID&gt;"</span>) { String taskName -&gt;
    <span class="hl-keyword">if</span> (taskName.startsWith(<span class="hl-string">"ping"</span>)) {
        task(taskName) &lt;&lt; {
            println <span class="hl-string">"Pinging: "</span> + (taskName - <span class="hl-string">'ping'</span>)
        }
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q pingServer1</code></strong>
        </p><pre class="screen">&gt; gradle -q pingServer1
Pinging: Server1</pre></div></div><br class="example-break"><p>The String parameter is used as a description for the rule. This description is shown when doing
            for example <code class="code">gradle -t</code>.
        </p><p>Rules not just work for calling tasks from the command line. You can also create dependsOn relations
            on rule based tasks:
        </p><div class="example"><a name="taskRuleDependsOn"></a><p class="title"><b>Example&nbsp;13.22.&nbsp;Dependency on rule based tasks</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">tasks.addRule(<span class="hl-string">"Pattern: ping&lt;ID&gt;"</span>) { String taskName -&gt;
    <span class="hl-keyword">if</span> (taskName.startsWith(<span class="hl-string">"ping"</span>)) {
        task(taskName) &lt;&lt; {
            println <span class="hl-string">"Pinging: "</span> + (taskName - <span class="hl-string">'ping'</span>)
        }
    }
}

task groupPing {
    dependsOn pingServer1, pingServer2
}</pre><p>Output of <strong class="userinput"><code>gradle -q groupPing</code></strong>
        </p><pre class="screen">&gt; gradle -q groupPing
Pinging: Server1
Pinging: Server2</pre></div></div><br class="example-break"></div><div class="section" title="13.9.&nbsp;Summary"><div class="titlepage"><div><div><h2 class="title"><a name="sec:the_idea_behind_gradle_tasks"></a>13.9.&nbsp;Summary</h2></div></div></div><p>If you are coming from Ant, such an enhanced Gradle task as <span class="emphasis"><em>Copy</em></span> looks like a mixture
            between an Ant target and an Ant task. And this is actually the case. The separation that Ant does between
            tasks and targets is not done by Gradle. The simple Gradle tasks are like Ant's targets and the enhanced
            Gradle tasks also include the Ant task aspects. All of Gradle's tasks share a common API and you can create
            dependencies between them. Such a task might be nicer to configure than an Ant task.
            It makes full use of the type system, is more expressive and easier to maintain.
        </p></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N10B8F" name="ftn.N10B8F" class="para">11</a>] </sup>If you use the Java Plugin, this task is automatically created and added to your project.
                </p></div><div class="footnote"><p><sup>[<a href="#N10CEB" name="ftn.N10CEB" class="para">12</a>] </sup>You might be wondering why there is neither an import for the
                    <code class="literal">StopExecutionException</code>
                    nor do we access it via its fully qualified name. The reason is, that Gradle adds a set of default imports
                    to your script. These imports are customizable (see <a class="xref" href="#ide_support" title="Appendix&nbsp;C.&nbsp;Existing IDE Support and how to cope without it">Appendix&nbsp;C, <i>Existing IDE Support and how to cope without it</i></a>).
                </p></div></div></div><div class="chapter" title="Chapter&nbsp;14.&nbsp;Working With Files"><div class="titlepage"><div><div><h1><a name="working_with_files"></a>Chapter&nbsp;14.&nbsp;Working With Files</h1></div></div></div><div class="note" title="Note"><p>This chapter is a work in progress.</p></div><p>
        Most builds work with files. Gradle adds some concepts and APIs to help you do this.
    </p><div class="section" title="14.1.&nbsp;Locating files"><div class="titlepage"><div><div><h2 class="title"><a name="sec:locating_files"></a>14.1.&nbsp;Locating files</h2></div></div></div><p>You can locate a file relative to the project directory using the
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/Project.html" target="_top">
          <code class="classname">Project.file()</code>
        </a> method.
        </p><div class="example"><a name="resolveFile"></a><p class="title"><b>Example&nbsp;14.1.&nbsp;Locating files</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting"><span class="hl-comment">// Using a relative path</span>
File configFile = file(<span class="hl-string">'src/config.xml'</span>)

<span class="hl-comment">// Using an absolute path</span>
configFile = file(configFile.absolutePath)

<span class="hl-comment">// Using a File object with a relative path</span>
configFile = file(<span class="hl-keyword">new</span> File(<span class="hl-string">'src/config.xml'</span>))</pre></div></div><br class="example-break"><p>You can pass any object to the <code class="literal">file()</code> method, though usually you would pass it a
            <code class="classname">String</code> or <code class="classname">File</code>. The supplied object's <code class="literal">toString()</code>
            value is treated as a file path. If this path is an absolute path, it is used to construct a
            <code class="classname">File</code> instance. Otherwise, a <code class="classname">File</code> instance is constructed by
            prepending the project directory path to the supplied path.
        </p><p>Using this method is a useful way to convert some user provided value into an absolute <code class="classname">File</code>.
            It is preferable to using <code class="literal">new File(somePath)</code>, as <code class="literal">file()</code> always evaluates
            the supplied path relative to the project directory, which is fixed, rather than the current working
            directory, which may not always be the same.
        </p></div><div class="section" title="14.2.&nbsp;File collections"><div class="titlepage"><div><div><h2 class="title"><a name="sec:file_collections"></a>14.2.&nbsp;File collections</h2></div></div></div><p>
            A <em class="firstterm">file collection</em> is simply a set of files. It is represented by the
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/file/FileCollection.html" target="_top">
          <code class="classname">FileCollection</code>
        </a> interface. Many objects in Gradle implement this
            interface. For example, <a class="link" href="#sub:configurations" title="28.3.1.&nbsp;Configurations">dependency configurations</a> implement
            <code class="literal">FileCollection</code>.
        </p><p>
            One way to obtain a <code class="literal">FileCollection</code> instance is to use the <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/Project.html" target="_top">
          <code class="classname">Project.files()</code>
        </a>
            method. You can pass this method any number of objects, which are then converted into a set of <code class="classname">File</code>
            objects. The <code class="literal">files()</code> method accepts <code class="classname">File</code> and <code class="classname">String</code>
            arguments. These are evaluated relative to the project directory, as described in <a class="xref" href="#sec:locating_files" title="14.1.&nbsp;Locating files">Section&nbsp;14.1, &ldquo;Locating files&rdquo;</a>.
            You can also pass collections, maps and arrays to the <code class="literal">files()</code> method. These are flattened
            and the contents converted to <code class="classname">File</code> instances.
        </p><div class="example"><a name="fileCollections"></a><p class="title"><b>Example&nbsp;14.2.&nbsp;Creating a file collection</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">FileCollection collection = files(<span class="hl-string">'src/file1.txt'</span>, file(<span class="hl-string">'src/file2.txt'</span>), [<span class="hl-string">'src/file3.txt'</span>, <span class="hl-string">'src/file4.txt'</span>])</pre></div></div><br class="example-break"><p>A file collection is iterable, and can be converted to a number of other types using the <code class="literal">as</code>
            operator. You can also add 2 file collections together using the <code class="literal">+</code> operator. Here are some examples.
        </p><div class="example"><a name="fileCollections"></a><p class="title"><b>Example&nbsp;14.3.&nbsp;Using a file collection</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting"><span class="hl-comment">// Iterate over the files in the collection</span>
collection.each {File file -&gt;
    file.name
}

<span class="hl-comment">// Convert the collection to various types</span>
Set set = collection.files
Set set2 = collection as Set
List list = collection as List
String path = collection.asPath
File file = collection.singleFile
File file2 = collection as File

<span class="hl-comment">// Add collections together</span>
def collection2 = collection + files(<span class="hl-string">'src/file3.txt'</span>)</pre></div></div><br class="example-break"><p>You can also pass the <code class="literal">files()</code> method a closure or a <code class="classname">Callable</code>
            instance. This is called when the contents of the collection are queried, and its return value is converted
            to a set of <code class="classname">File</code> instances. The return value can be an object of any of the types
            supported by the <code class="literal">files()</code> method. This is a simple way to 'implement' the
            <code class="classname">FileCollection</code> interface.
        </p><div class="example"><a name="fileCollections"></a><p class="title"><b>Example&nbsp;14.4.&nbsp;Implementing a file collection</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task list &lt;&lt; {
    File srcDir

    <span class="hl-comment">// Create a file collection using a closure</span>
    collection = files { srcDir.listFiles() }

    <span class="hl-comment">// Create a file collection using a Callable</span>
    Callable callable = { srcDir.listFiles() } as Callable
    collection = files(callable)

    srcDir = file(<span class="hl-string">'src'</span>)
    println <span class="hl-string">"Contents of $srcDir.name"</span>
    collection.each { println relativePath(it) }

    srcDir = file(<span class="hl-string">'src2'</span>)
    println <span class="hl-string">"Contents of $srcDir.name"</span>
    collection.each { println relativePath(it) }
}</pre><p>Output of <strong class="userinput"><code>gradle -q list</code></strong>
        </p><pre class="screen">&gt; gradle -q list
Contents of src
src/dir1
src/file1.txt
Contents of src2
src2/dir1
src2/dir2</pre></div></div><br class="example-break"><p>The <code class="literal">files()</code> method also accepts <code class="classname">FileCollection</code> instances.</p></div><div class="section" title="14.3.&nbsp;File trees"><div class="titlepage"><div><div><h2 class="title"><a name="sec:file_trees"></a>14.3.&nbsp;File trees</h2></div></div></div><p>
            A <em class="firstterm">file tree</em> is a hierarchy of files, such as a directory tree. It is represented
            by the <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/file/FileTree.html" target="_top">
          <code class="classname">FileTree</code>
        </a> interface. The <code class="literal">FileTree</code> interface
            extends <code class="literal">FileCollection</code>, so you can treat a file tree exactly the same way as you would a
            file collection. Several objects in Gradle implement the <code class="literal">FileTree</code> interface, such as
            <a class="link" href="#sec:source_sets" title="18.6.&nbsp;Working with source sets">source sets</a>.
        </p><p>
            One way to obtain a <code class="literal">FileTree</code> instance is to use the
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/Project.html" target="_top">
          <code class="classname">Project.fileTree()</code>
        </a> method.
            This creates a <code class="literal">FileTree</code> defined with a base directory, and optionally some Ant-style
            include and exclude patterns.
        </p><div class="example"><a name="fileTrees"></a><p class="title"><b>Example&nbsp;14.5.&nbsp;Creating a file tree</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting"><span class="hl-comment">// Create a file tree with a base directory</span>
def tree = fileTree(dir: <span class="hl-string">'src/main'</span>)

<span class="hl-comment">// Add include and exclude patterns to the tree</span>
tree.include <span class="hl-string">'**/*.java'</span>
tree.exclude <span class="hl-string">'**/Abstract*'</span>

<span class="hl-comment">// Create a tree using path</span>
tree = fileTree(<span class="hl-string">'src'</span>).include(<span class="hl-string">'**/*.java'</span>)

<span class="hl-comment">// Create a tree using closure</span>
tree = fileTree {
    from <span class="hl-string">'src'</span>
    include <span class="hl-string">'**/*.java'</span>
}

<span class="hl-comment">// Create a tree using a map</span>
tree = fileTree(dir: <span class="hl-string">'src'</span>, includes: [<span class="hl-string">'**/*.java'</span>])</pre></div></div><br class="example-break"><p>You use a file tree in the same way you use a file collection. You can also visit the contents of the
            tree, and select a subtree using Ant-style patterns:
        </p><div class="example"><a name="fileTrees"></a><p class="title"><b>Example&nbsp;14.6.&nbsp;Using a file tree</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting"><span class="hl-comment">// Iterate over the contents of a tree</span>
tree.each {File file -&gt;
    println file
}

<span class="hl-comment">// Filter a tree</span>
def filtered = tree.matching {
    include <span class="hl-string">'org/gradle/api/**'</span>
}

<span class="hl-comment">// Add trees together</span>
def sum = tree + fileTree(dir: <span class="hl-string">'src/test'</span>)

<span class="hl-comment">// Visit the nodes of the tree</span>
tree.visit {node -&gt;
    println <span class="hl-string">"$node.relativePath =&gt; $node.file"</span>
}</pre></div></div><br class="example-break"></div><div class="section" title="14.4.&nbsp;Specifying a set of files"><div class="titlepage"><div><div><h2 class="title"><a name="sec:specifying_multiple_files"></a>14.4.&nbsp;Specifying a set of files</h2></div></div></div><p>Many objects in Gradle have properties which accept a logical set of files. For example, the
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/compile/Compile.html" target="_top">
          <code class="classname">Compile</code>
        </a> task has a <code class="literal">source</code> property,
            which defines the source files to compile. You can set the value of this property using any of the types
            supported by the <a class="link" href="#sec:file_collections" title="14.2.&nbsp;File collections">files()</a> method, which we have seen above. This
            means you can set the property using, for example, a <code class="classname">File</code>, <code class="classname">String</code>,
            collection, <code class="classname">FileCollection</code> or even a closure.
            Here are some examples:
        </p><div class="example"><a name="inputFiles"></a><p class="title"><b>Example&nbsp;14.7.&nbsp;Specifying a set of files</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">compile {
    source = file(<span class="hl-string">'src/main/java'</span>)
}

compile {
    source = <span class="hl-string">'src/main/java'</span>
}

compile {
    source = [<span class="hl-string">'src/main/java'</span>, <span class="hl-string">'../shared/java'</span>]
}

compile {
    source = fileTree(dir: <span class="hl-string">'src/main/java'</span>).matching { include <span class="hl-string">'org/gradle/api/**'</span> }
}

compile {
    source = {
        fileTree(dir: <span class="hl-string">'src/main/java'</span>) + fileTree(dir: <span class="hl-string">'../shared/java'</span>)
    }
}</pre></div></div><br class="example-break"><p>Usually, there is a method with the same name as the property, which appends to the set of files. Again,
            this method accepts any of the types supported by the <a class="link" href="#sec:file_collections" title="14.2.&nbsp;File collections">files()</a>
            method.
        </p><div class="example"><a name="inputFiles"></a><p class="title"><b>Example&nbsp;14.8.&nbsp;Specifying a set of files</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">compile {
    source <span class="hl-string">'src/main/java'</span>, <span class="hl-string">'src/main/groovy'</span>
    source file(<span class="hl-string">'../shared/java'</span>)
    source { file(<span class="hl-string">'src/test/'</span>).listFiles() }
}</pre></div></div><br class="example-break"></div><div class="section" title="14.5.&nbsp;Copying files"><div class="titlepage"><div><div><h2 class="title"><a name="sec:copying_files"></a>14.5.&nbsp;Copying files</h2></div></div></div><p>You can use the <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/Copy.html" target="_top">
          <code class="classname">Copy</code>
        </a> task to copy files. The copy task allows
            you to filter the contents of the files as they are copied, and to map the files names.
        </p><div class="example"><a name="copy"></a><p class="title"><b>Example&nbsp;14.9.&nbsp;Copying files using the copy task</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task copyTask(type: Copy) {
    from <span class="hl-string">'src/main/webapp'</span>
    into <span class="hl-string">'build/explodedWar'</span>
    include <span class="hl-string">'**/*.html'</span>
    include <span class="hl-string">'**/*.jsp'</span>
    include <span class="hl-string">'assets/**'</span>
}</pre></div></div><br class="example-break"><p>You can also use the <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/Project.html" target="_top">
          <code class="classname">Project.copy()</code>
        </a> method.</p><div class="example"><a name="copy"></a><p class="title"><b>Example&nbsp;14.10.&nbsp;Copying files using the copy() method</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task copyMethod &lt;&lt; {
    copy {
        from <span class="hl-string">'src/main/webapp'</span>
        into <span class="hl-string">'build/explodedWar'</span>
        include <span class="hl-string">'**/*.html'</span>
        include <span class="hl-string">'**/*.jsp'</span>
        include <span class="hl-string">'assets/**'</span>
    }
}</pre></div></div><br class="example-break"></div></div><div class="chapter" title="Chapter&nbsp;15.&nbsp;Logging"><div class="titlepage"><div><div><h1><a name="logging"></a>Chapter&nbsp;15.&nbsp;Logging</h1></div></div></div><p>The log is the main 'UI' of a build tool. If it is too verbose, real warnings and problems are easily hidden
        by this. On the other hand you need the relevant information for figuring out if things have gone wrong. Gradle
        defines 6 log levels, as shown in <a class="xref" href="#logLevels" title="Table&nbsp;15.1.&nbsp;Log levels">Table&nbsp;15.1, &ldquo;Log levels&rdquo;</a>. There are two Gradle-specific log levels, in
        addition to the ones you might normally see. Those levels are <span class="emphasis"><em>QUIET</em></span> and
        <span class="emphasis"><em>LIFECYCLE</em></span>. The latter is the default, and is used to report build progress.
    </p><div class="table"><p class="title"><b>Table&nbsp;15.1.&nbsp;Log levels</b></p><div class="table-contents"><table id="logLevels"><thead><tr>
                <td>Level</td>
                <td>Used for</td>
            </tr></thead><tr>
            <td>ERROR</td>
            <td>Error messages</td>
        </tr><tr>
            <td>QUIET</td>
            <td>Important information messages</td>
        </tr><tr>
            <td>WARNING</td>
            <td>Warning messages</td>
        </tr><tr>
            <td>LIFECYCLE</td>
            <td>Progress information messages</td>
        </tr><tr>
            <td>INFO</td>
            <td>Information messages</td>
        </tr><tr>
            <td>DEBUG</td>
            <td>Debug messages</td>
        </tr></table></div></div><div class="section" title="15.1.&nbsp;Choosing a log level"><div class="titlepage"><div><div><h2 class="title"><a name="sec:choosing_a_log_level"></a>15.1.&nbsp;Choosing a log level</h2></div></div></div><p>You can use the command line switches shown in <a class="xref" href="#logLevelCommandLineOptions" title="Table&nbsp;15.2.&nbsp;Log level command-line options">Table&nbsp;15.2, &ldquo;Log level command-line options&rdquo;</a> to choose
            different log levels. In <a class="xref" href="#stacktraces" title="Table&nbsp;15.3.&nbsp;Stacktrace command-line options">Table&nbsp;15.3, &ldquo;Stacktrace command-line options&rdquo;</a> you find the command line switches which affect
            stacktrace logging.
        </p><div class="table"><p class="title"><b>Table&nbsp;15.2.&nbsp;Log level command-line options</b></p><div class="table-contents"><table id="logLevelCommandLineOptions"><thead><tr>
                    <td>Option</td>
                    <td>Outputs Log Levels</td>
                </tr></thead><tr>
                <td>no logging options</td>
                <td>LIFECYCLE and higher</td>
            </tr><tr>
                <td>
                    <code class="literal">-q</code>
                </td>
                <td>QUIET and higher</td>
            </tr><tr>
                <td>
                    <code class="literal">-i</code>
                </td>
                <td>INFO and higher</td>
            </tr><tr>
                <td>
                    <code class="literal">-d</code>
                </td>
                <td>DEBUG and higher (that is, all log messages)</td>
            </tr></table></div></div><div class="table"><p class="title"><b>Table&nbsp;15.3.&nbsp;Stacktrace command-line options</b></p><div class="table-contents"><table id="stacktraces"><thead><tr>
                    <td>Option</td>
                    <td>Meaning</td>
                </tr></thead><tr>
                <td>No stacktrace options</td>
                <td>No stacktraces are printed to the console in case of a build error (e.g. a compile error). Only in
                    case of internal exceptions will stacktraces be printed. If the loglevel option <code class="literal">-d</code>
                    is chosen, truncated stacktraces are always printed.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">-s</code>
                </td>
                <td>Truncated stacktraces are printed. We recommend this over full stacktraces. Groovy full stacktraces
                    are extremely verbose (Due to the underlying dynamic invocation mechanisms. Yet they usually do not
                    contain relevant information for what has gone wrong in <span class="emphasis"><em>your</em></span> code.)
                </td>
            </tr><tr>
                <td>
                    <code class="literal">-f</code>
                </td>
                <td>The full stacktraces are printed out.</td>
            </tr></table></div></div></div><div class="section" title="15.2.&nbsp;Writing your own log messages"><div class="titlepage"><div><div><h2 class="title"><a name="sec:sending_your_own_log_messages"></a>15.2.&nbsp;Writing your own log messages</h2></div></div></div><p>A simple option for logging in your build file is to write messages to standard output. Gradle redirects
            anything written to standard output to it's logging system at the <code class="literal">QUIET</code> log level.</p><div class="example"><a name="logging_to_stdout"></a><p class="title"><b>Example&nbsp;15.1.&nbsp;Using stdout to write log messages</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">println <span class="hl-string">'A message which is logged at QUIET level'</span></pre></div></div><br class="example-break"><p>Gradle also provides a <code class="literal">logger</code> property to a build script, which is an instance of
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/logging/Logger.html" target="_top">
          <code class="classname">Logger</code>
        </a>. This interface extends the SLF4J
            <code class="classname">Logger</code> interface and adds a few Gradle specific methods to it. Below is an example
            of how this is used in the build script:
        </p><div class="example"><a name="logging_ex"></a><p class="title"><b>Example&nbsp;15.2.&nbsp;Writing your own log messages</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">logger.quiet(<span class="hl-string">'An info log message which is always logged.'</span>)
logger.error(<span class="hl-string">'An error log message.'</span>)
logger.warn(<span class="hl-string">'A warning log message.'</span>)
logger.lifecycle(<span class="hl-string">'A lifecycle info log message.'</span>)
logger.info(<span class="hl-string">'An info log message.'</span>)
logger.debug(<span class="hl-string">'A debug log message.'</span>)
logger.trace(<span class="hl-string">'A trace log message.'</span>)</pre></div></div><br class="example-break"><p>You can also hook into Gradle's logging system from within other classes used in the build (classes from
            the <code class="filename">buildSrc</code> directory for example). Simply use an SLF4J logger. You can use this
            logger the same way as you use the provided logger in the build script.
        </p><div class="example"><a name="logging_with_slf4j"></a><p class="title"><b>Example&nbsp;15.3.&nbsp;Using SLF4J to write log messages</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">org.slf4j.Logger slf4jLogger = org.slf4j.LoggerFactory.getLogger(<span class="hl-string">'some-logger'</span>)
slf4jLogger.info(<span class="hl-string">'An info log message logged using SLF4j'</span>)</pre></div></div><br class="example-break"></div><div class="section" title="15.3.&nbsp;Logging from external tools and libraries"><div class="titlepage"><div><div><h2 class="title"><a name="sec:external_tools"></a>15.3.&nbsp;Logging from external tools and libraries</h2></div></div></div><p>Internally, Gradle uses Ant and Ivy. Both have their own logging system. Gradle redirects their logging
            output into the Gradle logging system. There is a 1:1 mapping from the Ant/Ivy log levels to the Gradle log
            levels, except the Ant/Ivy <code class="literal">TRACE</code> log level, which is mapped to Gradle
            <code class="literal">DEBUG</code> log level. This means the default Gradle log level will not show any Ant/Ivy output
            unless it is an error or a warning.
        </p><p>There are many tools out there which still use standard output for logging. By default, Gradle redirects
            standard output to the <code class="literal">QUIET</code> log level and standard error to the <code class="literal">ERROR</code>
            level. This behavior is configurable. Gradle provides a couple of switches for this. To change the log
            level that standard out is redirected to when your build script gets evaluated, the project object offers a
            method called <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/Project.html" target="_top">
          <code class="classname">Project.captureStandardOutput()</code>
        </a>.</p><div class="example"><a name="project_stdout_capture"></a><p class="title"><b>Example&nbsp;15.4.&nbsp;Configuring standard output capture</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">captureStandardOutput LogLevel.INFO
println <span class="hl-string">'A message which is logged at INFO level'</span></pre></div></div><br class="example-break"><p>
            To change the log level for standard out during task execution, tasks offer a method also with the name
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/Task.html" target="_top">
          <code class="classname">Task.captureStandardOutput()</code>
        </a>.</p><div class="example"><a name="task_stdout_capture"></a><p class="title"><b>Example&nbsp;15.5.&nbsp;Configuring standard output capture for a task</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task logInfo &lt;&lt; {
    println <span class="hl-string">'A task message which is logged at INFO level'</span>
}
logInfo.captureStandardOutput(LogLevel.INFO)</pre></div></div><br class="example-break"><p>
            Tasks and projects also offer a method <code class="literal">disableStandardOutputCapture()</code> which causes the
            standard output to be send to the default standard output. If you need more fine grained control on how
            standard output is redirected you can use the class <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/logging/StandardOutputLogging.html" target="_top">
          <code class="classname">StandardOutputLogging</code>
        </a>.
        </p><p>Gradle also provides integration with the Java Util Logging, Jakarta Commons Logging and Log4j logging
            toolkits. Any log messages which your build classes write using these logging toolkits will be redirected to
            Gradle's logging system.
        </p></div></div><div class="chapter" title="Chapter&nbsp;16.&nbsp;Using Ant from Gradle"><div class="titlepage"><div><div><h1><a name="ant"></a>Chapter&nbsp;16.&nbsp;Using Ant from Gradle</h1></div></div></div><p>Gradle provides excellent integration with Ant. You can use individual Ant tasks or entire Ant builds in your
        Gradle builds. In fact, you will find that it's far easier and more powerful using Ant tasks in a Gradle build
        script, than it is to use Ant's XML format. You could even use Gradle simply as a powerful Ant task scripting
        tool.
    </p><p>Ant can be divided into two layers. The first layer is the Ant language. It provides the syntax for the
        <code class="filename">build.xml</code>, the handling of the targets, special constructs like macrodefs, and so on.
        In other words, everything except the Ant tasks and types. Gradle understands this language, and allows you to
        import your Ant <code class="filename">build.xml</code> directly into a Gradle project. You can then use the targets of
        your Ant build as if they were Gradle tasks.
    </p><p>The second layer of Ant is its wealth of Ant tasks and types, like <code class="literal">javac</code>,
        <code class="literal">copy</code> or <code class="literal">jar</code>. For this layer Gradle provides integration
        simply by relying on Groovy, and the fantastic <code class="literal">AntBuilder</code>.
    </p><p>Finally, since build scripts are Groovy scripts, you can always execute an Ant build as an external process.
        Your build script may contain statements like:<code class="literal">"ant clean compile".execute()</code>.
        <sup>[<a href="#ftn.N11036" name="N11036" class="footnote">13</a>]</sup>
    </p><p>You can use Gradle's Ant integration as a path for migrating your build from Ant to Gradle. For example, you
        could start by importing your existing Ant build. Then you could move your dependency declarations from the Ant
        script to your build file. Finally, you could move your tasks across to your build file, or replace them with
        some of Gradle's plugins. This process can be done in parts over time, and you can have a working Gradle build
        during the entire process.
    </p><div class="section" title="16.1.&nbsp;Using Ant tasks and types in your build"><div class="titlepage"><div><div><h2 class="title"><a name="N1103C"></a>16.1.&nbsp;Using Ant tasks and types in your build</h2></div></div></div><p>In your build script, a property called <code class="literal">ant</code> is provided by Gradle. This is a reference
            to an <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/AntBuilder.html" target="_top">
          <code class="classname">AntBuilder</code>
        </a> instance. This <code class="literal">AntBuilder</code> is used to
            access Ant tasks, types and properties from your build script. There is a very simple mapping from Ant's
            <code class="filename">build.xml</code> format to Groovy, which is explained below.
        </p><p>You execute an Ant task by calling a method on the <code class="literal">AntBuilder</code> instance. You use the task
            name as the method name. For example, you execute the Ant <code class="literal">echo</code> task by calling the
            <code class="literal">ant.echo()</code> method. The attributes of the Ant task are passed as Map parameters to the
            method. Below is an example which executes the <code class="literal">echo</code> task. Notice that we can also mix
            Groovy code and the Ant task markup. This can be extremely powerful.</p><div class="example"><a name="useAntTask"></a><p class="title"><b>Example&nbsp;16.1.&nbsp;Using an Ant task</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task hello &lt;&lt; {
    String greeting = <span class="hl-string">'hello from Ant'</span>
    ant.echo(message: greeting)
}</pre><p>Output of <strong class="userinput"><code>gradle hello</code></strong>
        </p><pre class="screen">&gt; gradle hello
:hello
[ant:echo] hello from Ant

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>
            You pass nested text to an Ant task by passing it as a parameter of the task method call. In this example, we
            pass the message for the <code class="literal">echo</code> task as nested text:
        </p><div class="example"><a name="taskWithNestedText"></a><p class="title"><b>Example&nbsp;16.2.&nbsp;Passing nested text to an Ant task</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task hello &lt;&lt; {
    ant.echo(<span class="hl-string">'hello from Ant'</span>)
}</pre><p>Output of <strong class="userinput"><code>gradle hello</code></strong>
        </p><pre class="screen">&gt; gradle hello
:hello
[ant:echo] hello from Ant

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>You pass nested elements to an Ant task inside a closure. Nested elements are defined in the same way
            as tasks, by calling a method with the same name as the element we want to define.</p><div class="example"><a name="taskWithNestedElements"></a><p class="title"><b>Example&nbsp;16.3.&nbsp;Passing nested elements to an Ant task</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task zip &lt;&lt; {
    ant.zip(destfile: <span class="hl-string">'archive.zip'</span>) {
        fileset(dir: <span class="hl-string">'src'</span>) {
            include(name: <span class="hl-string">'**.xml'</span>)
            exclude(name: <span class="hl-string">'**.java'</span>)
        }
    }
}</pre></div></div><br class="example-break"><p>You can access Ant types in the same way that you access tasks, using the name of the type as the
            method name. The method call returns the Ant data type, which you can then use directly in your build script. In the
            following example, we create an Ant <code class="literal">path</code> object, then iterate over the contents of it.</p><div class="example"><a name="useAntType"></a><p class="title"><b>Example&nbsp;16.4.&nbsp;Using an Ant type</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task list &lt;&lt; {
    def path = ant.path {
        fileset(dir: <span class="hl-string">'libs'</span>, includes: <span class="hl-string">'*.jar'</span>)
    }
    path.list().each {
        println it
    }
}</pre></div></div><br class="example-break"><p>More information about <code class="literal">AntBuilder</code> can be found in 'Groovy in Action' 8.4 or at the
            <a class="ulink" href="http://groovy.codehaus.org/Using+Ant+from+Groovy" target="_top">Groovy Wiki</a>
        </p><div class="section" title="16.1.1.&nbsp;Using custom Ant tasks in your build"><div class="titlepage"><div><div><h3 class="title"><a name="N110B2"></a>16.1.1.&nbsp;Using custom Ant tasks in your build</h3></div></div></div><p>To make custom tasks available in your build, you use the <code class="literal">typedef</code> Ant task, just
                as you would in a <code class="literal">build.xml</code> file. You can then refer to the custom Ant task as you
                would a built-in Ant task.
            </p><div class="example"><a name="useExternalAntTask"></a><p class="title"><b>Example&nbsp;16.5.&nbsp;Using a custom Ant task</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">task check &lt;&lt; {
    ant.taskdef(resource: <span class="hl-string">'checkstyletask.properties'</span>) {
        classpath {
            fileset(dir: <span class="hl-string">'libs'</span>, include: <span class="hl-string">'*.jar'</span>)
        }
    }
    ant.checkstyle(config: <span class="hl-string">'checkstyle.xml'</span>) {
        fileset(dir: <span class="hl-string">'src'</span>)
    }
}</pre></div></div><br class="example-break"><p>
                You can use Gradle's dependency management to assemble the classpath to use for the custom tasks.
                To do this, you need to define a custom configuration for the classpath, then add some dependencies 
                to the configuration. This is described in more detail in <a class="xref" href="#sec:how_to_declare_your_dependencies" title="28.3.&nbsp;How to declare your dependencies">Section&nbsp;28.3, &ldquo;How to declare your dependencies&rdquo;</a>.
            </p><div class="example"><a name="useExternalAntTaskWithConfig"></a><p class="title"><b>Example&nbsp;16.6.&nbsp;Declaring the classpath for a custom Ant task</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">configurations {
    checkstyle
}

dependencies {
    checkstyle group: <span class="hl-string">'checkstyle'</span>, name: <span class="hl-string">'checkstyle'</span>, version: <span class="hl-string">'5.0'</span>
}</pre></div></div><br class="example-break"><p>To use the classpath configuration, use the <code class="literal">asPath</code> property of the custom configuration.</p><div class="example"><a name="useExternalAntTaskWithConfig"></a><p class="title"><b>Example&nbsp;16.7.&nbsp;Using a custom Ant task and dependency management together</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">task check &lt;&lt; {
    ant.taskdef(resource: <span class="hl-string">'checkstyletask.properties'</span>, classpath: configurations.checkstyle.asPath)
    ant.checkstyle(config: <span class="hl-string">'checkstyle.xml'</span>) {
        fileset(dir: <span class="hl-string">'src'</span>)
    }
}</pre></div></div><br class="example-break"></div></div><div class="section" title="16.2.&nbsp;Importing an Ant build"><div class="titlepage"><div><div><h2 class="title"><a name="N110EB"></a>16.2.&nbsp;Importing an Ant build</h2></div></div></div><p>You can use the <code class="literal">ant.importBuild()</code> method to import an Ant build into your Gradle
            project. When you import an Ant build, each Ant target is treated as a Gradle task. This means you can
            manipulate and execute the Ant targets in exactly the same way as Gradle tasks.
        </p><div class="example"><a name="antHello"></a><p class="title"><b>Example&nbsp;16.8.&nbsp;Importing an Ant build</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">ant.importBuild <span class="hl-string">'build.xml'</span></pre><p>
          <code class="filename">build.xml</code>
        </p><pre class="programlisting"><span class="hl-tag">&lt;project&gt;</span>
    <span class="hl-tag">&lt;target</span> <span class="hl-attribute">name</span>=<span class="hl-value">"hello"</span><span class="hl-tag">&gt;</span>
        <span class="hl-tag">&lt;echo&gt;</span>Hello, from Ant<span class="hl-tag">&lt;/echo&gt;</span>
    <span class="hl-tag">&lt;/target&gt;</span>
<span class="hl-tag">&lt;/project&gt;</span></pre><p>Output of <strong class="userinput"><code>gradle hello</code></strong>
        </p><pre class="screen">&gt; gradle hello
:hello
[ant:echo] Hello, from Ant

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>You can add a task which depends on an Ant target:
        </p><div class="example"><a name="dependsOnAntTarget"></a><p class="title"><b>Example&nbsp;16.9.&nbsp;Task that depends on Ant target</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">ant.importBuild <span class="hl-string">'build.xml'</span>

task intro(dependsOn: hello) &lt;&lt; {
    println <span class="hl-string">'Hello, from Gradle'</span>
}</pre><p>Output of <strong class="userinput"><code>gradle intro</code></strong>
        </p><pre class="screen">&gt; gradle intro
:hello
[ant:echo] Hello, from Ant
:intro
Hello, from Gradle

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>Or, you can add behaviour to an Ant target:</p><div class="example"><a name="addBehaviourToAntTarget"></a><p class="title"><b>Example&nbsp;16.10.&nbsp;Adding behaviour to an Ant target</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">ant.importBuild <span class="hl-string">'build.xml'</span>

hello &lt;&lt; {
    println <span class="hl-string">'Hello, from Gradle'</span>
}</pre><p>Output of <strong class="userinput"><code>gradle hello</code></strong>
        </p><pre class="screen">&gt; gradle hello
:hello
[ant:echo] Hello, from Ant
Hello, from Gradle

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>It is also possible for an Ant target to depend on a Gradle task:</p><div class="example"><a name="dependsOnTask"></a><p class="title"><b>Example&nbsp;16.11.&nbsp;Ant target that depends on Gradle task</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">ant.importBuild <span class="hl-string">'build.xml'</span>

task intro &lt;&lt; {
    println <span class="hl-string">'Hello, from Gradle'</span>
}</pre><p>
          <code class="filename">build.xml</code>
        </p><pre class="programlisting"><span class="hl-tag">&lt;project&gt;</span>
    <span class="hl-tag">&lt;target</span> <span class="hl-attribute">name</span>=<span class="hl-value">"hello"</span> <span class="hl-attribute">depends</span>=<span class="hl-value">"intro"</span><span class="hl-tag">&gt;</span>
        <span class="hl-tag">&lt;echo&gt;</span>Hello, from Ant<span class="hl-tag">&lt;/echo&gt;</span>
    <span class="hl-tag">&lt;/target&gt;</span>
<span class="hl-tag">&lt;/project&gt;</span></pre><p>Output of <strong class="userinput"><code>gradle hello</code></strong>
        </p><pre class="screen">&gt; gradle hello
:intro
Hello, from Gradle
:hello
[ant:echo] Hello, from Ant

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"></div><div class="section" title="16.3.&nbsp;Ant properties and references"><div class="titlepage"><div><div><h2 class="title"><a name="N11155"></a>16.3.&nbsp;Ant properties and references</h2></div></div></div><p>There are several ways to set an Ant property, so that the property can be used by Ant tasks. You can
            set the property directly on the <code class="literal">AntBuilder</code> instance. The Ant properties are also
            available as a Map which you can change. You can also use the Ant <code class="literal">property</code> task.
            Below are some examples of how to do this.
        </p><div class="example"><a name="antProperties"></a><p class="title"><b>Example&nbsp;16.12.&nbsp;Setting an Ant property</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">ant.buildDir = buildDir
ant.properties.buildDir = buildDir
ant.properties[<span class="hl-string">'buildDir'</span>] = buildDir
ant.property(name: <span class="hl-string">'buildDir'</span>, location: buildDir)</pre><p>
          <code class="filename">build.xml</code>
        </p><pre class="programlisting"><span class="hl-tag">&lt;echo&gt;</span>buildDir = ${buildDir}<span class="hl-tag">&lt;/echo&gt;</span></pre></div></div><br class="example-break"><p>Many Ant tasks set properties when they execute. There are several ways to get the value of these properties.
            You can get the property directly from the <code class="literal">AntBuilder</code> instance. The Ant properties are
            also available as a Map. Below are some examples.</p><div class="example"><a name="antProperties"></a><p class="title"><b>Example&nbsp;16.13.&nbsp;Getting an Ant property</b></p><div class="example-contents"><p>
          <code class="filename">build.xml</code>
        </p><pre class="programlisting"><span class="hl-tag">&lt;property</span> <span class="hl-attribute">name</span>=<span class="hl-value">"antProp"</span> <span class="hl-attribute">value</span>=<span class="hl-value">"a property defined in an Ant build"</span><span class="hl-tag">/&gt;</span></pre><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">println ant.antProp
println ant.properties.antProp
println ant.properties[<span class="hl-string">'antProp'</span>]</pre></div></div><br class="example-break"><p>There are several ways to set an Ant reference:</p><div class="example"><a name="antProperties"></a><p class="title"><b>Example&nbsp;16.14.&nbsp;Setting an Ant reference</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">ant.path(id: <span class="hl-string">'classpath'</span>, location: <span class="hl-string">'libs'</span>)
ant.references.classpath = ant.path(location: <span class="hl-string">'libs'</span>)
ant.references[<span class="hl-string">'classpath'</span>] = ant.path(location: <span class="hl-string">'libs'</span>)</pre><p>
          <code class="filename">build.xml</code>
        </p><pre class="programlisting"><span class="hl-tag">&lt;path</span> <span class="hl-attribute">refid</span>=<span class="hl-value">"classpath"</span><span class="hl-tag">/&gt;</span></pre></div></div><br class="example-break"><p>There are several ways to get an Ant reference:</p><div class="example"><a name="antProperties"></a><p class="title"><b>Example&nbsp;16.15.&nbsp;Getting an Ant reference</b></p><div class="example-contents"><p>
          <code class="filename">build.xml</code>
        </p><pre class="programlisting"><span class="hl-tag">&lt;path</span> <span class="hl-attribute">id</span>=<span class="hl-value">"antPath"</span> <span class="hl-attribute">location</span>=<span class="hl-value">"libs"</span><span class="hl-tag">/&gt;</span></pre><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">println ant.references.antPath
println ant.references[<span class="hl-string">'antPath'</span>]</pre></div></div><br class="example-break"></div><div class="section" title="16.4.&nbsp;API"><div class="titlepage"><div><div><h2 class="title"><a name="N111B9"></a>16.4.&nbsp;API</h2></div></div></div><p>The Ant integration is provided by <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/AntBuilder.html" target="_top">
          <code class="classname">AntBuilder</code>
        </a>.</p></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N11036" name="ftn.N11036" class="para">13</a>] </sup>In Groovy you can execute Strings. To learn more about executing external processes with Groovy have a
                look in 'Groovy in Action' 9.3.2 or at the Groovy wiki
            </p></div></div></div><div class="chapter" title="Chapter&nbsp;17.&nbsp;Using Plugins"><div class="titlepage"><div><div><h1><a name="plugins"></a>Chapter&nbsp;17.&nbsp;Using Plugins</h1></div></div></div><p>Now we look at <span class="emphasis"><em>how</em></span> Gradle provides build-by-convention and out of the box functionality.
        These features are decoupled from the core of Gradle, and are provided via plugins. Although the plugins are
        decoupled, we would like to point out that the Gradle core plugins are NEVER updated or changed for a
        particular Gradle distribution. If there is a bug in the compile functionality of Gradle, we will release a new
        version of Gradle. There is no change of behavior for the lifetime of a given distribution of Gradle.
    </p><div class="section" title="17.1.&nbsp;Declaring plugins"><div class="titlepage"><div><div><h2 class="title"><a name="sec:using_plugins"></a>17.1.&nbsp;Declaring plugins</h2></div></div></div><p>If you want to use the plugin for building a Java project, simply include
        </p><pre class="programlisting">usePlugin('java')</pre><p>in your script. That's all. From a technological point of view plugins use just the same
            operations as you can use from your build scripts. That is, they use the Project and Task API (see
            <a class="xref" href="#project_and_task_api" title="Chapter&nbsp;12.&nbsp;The Project and Task API">Chapter&nbsp;12, <i>The Project and Task API</i></a>). The Gradle plugins use this API to:
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Add tasks to the project (e.g. compile, test)
                </p></li><li class="listitem"><p>Create dependencies between those tasks to let them execute in the appropriate order.
                </p></li><li class="listitem"><p>Add dependency configurations to the project.</p></li><li class="listitem"><p>Add a so called <em class="firstterm">convention object</em> to the project.
                </p></li></ul></div><p>Let's check this out:
        </p><div class="example"><a name="pluginIntro"></a><p class="title"><b>Example&nbsp;17.1.&nbsp;Using plugin</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">usePlugin <span class="hl-string">'java'</span>

task show &lt;&lt; {
    println relativePath(compileJava.destinationDir)
    println relativePath(processResources.destinationDir)
}</pre><p>Output of <strong class="userinput"><code>gradle -q show</code></strong>
        </p><pre class="screen">&gt; gradle -q show
build/classes/main
build/classes/main</pre></div></div><br class="example-break"><p>The Java Plugin adds a <code class="literal">compileJava</code> task and a <code class="literal">processResources</code> task
            to the project object which can be accessed by a build script. It has configured the <code class="literal">destinationDir</code>
            property of both of these tasks.
        </p><p>The <code class="literal">usePlugin()</code> method either takes a string or a class as an argument. You can write
            <sup>[<a href="#ftn.N11212" name="N11212" class="footnote">14</a>]</sup>
        </p><pre class="programlisting">usePlugin(org.gradle.api.plugins.JavaPlugin)</pre><p>Any class, which implements the <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/Plugin.html" target="_top">
          <code class="classname">Plugin</code>
        </a> interface, can be used as a
            plugin. Just pass the class as an
            argument. You don't need to configure anything else for this. If you want to access a custom plugin via a
            string identifier, you must inform Gradle about the mapping. You can do this in the file
            <code class="literal">plugin.properties</code>
            in the top level directory of Gradle. It looks like this for the current release:
        </p><div class="figure"><a name="N1122A"></a><p class="title"><b>Figure&nbsp;17.1.&nbsp;plugin.properties</b></p><div class="figure-contents"><pre class="programlisting">#
# Copyright 2009 the original author or authors.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
base=org.gradle.api.plugins.BasePlugin
java=org.gradle.api.plugins.JavaPlugin
eclipse=org.gradle.api.plugins.EclipsePlugin
groovy=org.gradle.api.plugins.GroovyPlugin
war=org.gradle.api.plugins.WarPlugin
osgi=org.gradle.api.plugins.osgi.OsgiPlugin
jetty=org.gradle.api.plugins.jetty.JettyPlugin
maven=org.gradle.api.plugins.MavenPlugin
project-reports=org.gradle.api.plugins.ProjectReportsPlugin
code-quality=org.gradle.api.plugins.quality.CodeQualityPlugin
scala=org.gradle.api.plugins.scala.ScalaPlugin</pre></div></div><br class="figure-break"><p>If you want to use your own plugins, you must make sure that they are accessible via the build script
            classpath (see <a class="xref" href="#organizing_build_logic" title="Chapter&nbsp;34.&nbsp;Organizing Build Logic">Chapter&nbsp;34, <i>Organizing Build Logic</i></a> for more information). To learn more about how
            to write custom plugins, see <a class="xref" href="#custom_plugins" title="Chapter&nbsp;33.&nbsp;Writing Custom Plugins">Chapter&nbsp;33, <i>Writing Custom Plugins</i></a>.
        </p></div><div class="section" title="17.2.&nbsp;Using the convention object"><div class="titlepage"><div><div><h2 class="title"><a name="sub:more_about_convention_objects"></a>17.2.&nbsp;Using the convention object</h2></div></div></div><p>If you use the Java Plugin
            for example, there are a <code class="literal">compileJava</code> and a <code class="literal">processResources</code> task for
            your production code (the same is true for your test
            code). The default location for the output of those tasks is the directory <code class="literal">build/classes/main</code>.
            What if you want to change this? Let's try:
        </p><div class="example"><a name="pluginConfig"></a><p class="title"><b>Example&nbsp;17.2.&nbsp;Configuring a plugin task</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">usePlugin <span class="hl-string">'java'</span>

task show &lt;&lt; {
    processResources.destinationDir = <span class="hl-keyword">new</span> File(buildDir, <span class="hl-string">'output'</span>)
    println relativePath(processResources.destinationDir)
    println relativePath(compileJava.destinationDir)
}</pre><p>Output of <strong class="userinput"><code>gradle -q show</code></strong>
        </p><pre class="screen">&gt; gradle -q show
build/output
build/classes/main</pre></div></div><br class="example-break"><p>Setting the <code class="literal">destinationDir</code>
            of the <code class="literal">processResources</code> task had only an effect on the <code class="literal">processResources</code>
            task. Maybe this was what you wanted. But what if
            you want to change the output directory for all tasks? It would be unfortunate if you had to do this for
            each task separately.
        </p><p>Gradle's tasks are usually <em class="firstterm">convention aware</em>. A plugin can add a convention object to
            your project, and map certain values of this convention object to task properties.
        </p><div class="example"><a name="pluginConvention"></a><p class="title"><b>Example&nbsp;17.3.&nbsp;Plugin convention object</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">usePlugin <span class="hl-string">'java'</span>

task show &lt;&lt; {
    sourceSets.main.classesDir = <span class="hl-keyword">new</span> File(buildDir, <span class="hl-string">'output'</span>)
    println relativePath(processResources.destinationDir)
    println relativePath(compileJava.destinationDir)
}</pre><p>Output of <strong class="userinput"><code>gradle -q show</code></strong>
        </p><pre class="screen">&gt; gradle -q show
build/output
build/output</pre></div></div><br class="example-break"><p>The Java Plugin has added a convention object with a <code class="literal">sourceSets</code>
            property, which we use to set the classes directory. Notice that setting this has changed the <code class="literal">destinationDir</code>
            property of both the <code class="literal">processResources</code> and
            <code class="literal">compileJava</code> tasks.</p><p>By setting a task attribute explicitly (as we have done in the first example) you overwrite the convention
            value for this particular task.
        </p><p>Not all of the tasks attributes are mapped to convention object values. It is the decision of the plugin
            to decide what are the shared properties and then bundle them in a convention object and map them to the
            tasks.
        </p><p>
            The properties of a convention object can be accessed as project properties. As shown in the following
            example, you can also access the convention object explicitly.
        </p><div class="example"><a name="pluginAccessConvention"></a><p class="title"><b>Example&nbsp;17.4.&nbsp;Using the plugin convention object</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">usePlugin <span class="hl-string">'java'</span>

task show &lt;&lt; {
    <span class="hl-comment">// Access the convention property as a project property</span>
    println relativePath(sourceSets.main.classesDir)
    println relativePath(project.sourceSets.main.classesDir)

    <span class="hl-comment">// Access the convention property via the convention object</span>
    println relativePath(convention.sourceSets.main.classesDir)
    println relativePath(convention.plugins.java.sourceSets.main.classesDir)
}</pre><p>Output of <strong class="userinput"><code>gradle -q show</code></strong>
        </p><pre class="screen">&gt; gradle -q show
build/classes/main
build/classes/main
build/classes/main
build/classes/main</pre></div></div><br class="example-break"><p>Every project object has a <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/plugins/Convention.html" target="_top">
          <code class="classname">Convention</code>
        </a> object which is a
            container for convention objects contributed
            by the plugins declared for your project. If you simply access or set a property or access a method in
            your build script, the project object first looks if this is a property of itself. If not, it delegates
            the request to its convention object. The convention object checks if any of the plugin convention
            objects can fulfill the request (first wins and the order is not defined). The plugin convention objects
            also introduce a namespace.
        </p><div class="section" title="17.2.1.&nbsp;Declaring plugins multiple times"><div class="titlepage"><div><div><h3 class="title"><a name="sub:declaring_plugins_multiple_times"></a>17.2.1.&nbsp;Declaring plugins multiple times</h3></div></div></div><p>A plugin is only called once for a given project, even if you have multiple
                <code class="literal">usePlugin()</code>
                statements. An additional call after the first call has no effect but doesn't hurt either. This can be
                important if you use plugins which extend other plugins. For example
                <code class="literal">usePlugin('groovy')</code>
                calls also the Java Plugin. We say the Groovy plugin extends the Java plugin. But you might as well
                write:
            </p><pre class="programlisting">usePlugin('java')
usePlugin('groovy')</pre><p>If you use cross-project configuration in multi-project builds this is a useful feature.
            </p></div></div><div class="section" title="17.3.&nbsp;Summary"><div class="titlepage"><div><div><h2 class="title"><a name="N112BC"></a>17.3.&nbsp;Summary</h2></div></div></div><p>Plugins provide tasks, which are glued together via dependsOn relations and a convention object.
        </p></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N11212" name="ftn.N11212" class="para">14</a>] </sup>Thanks to Gradle's default imports (see <a class="xref" href="#ide_support" title="Appendix&nbsp;C.&nbsp;Existing IDE Support and how to cope without it">Appendix&nbsp;C, <i>Existing IDE Support and how to cope without it</i></a>) you can also write
                    <code class="literal">usePlugin(JavaPlugin)</code>
                    in this case.
                </p></div></div></div><div class="chapter" title="Chapter&nbsp;18.&nbsp;The Java Plugin"><div class="titlepage"><div><div><h1><a name="java_plugin"></a>Chapter&nbsp;18.&nbsp;The Java Plugin</h1></div></div></div><p>The Java plugin adds Java compilation, testing and bundling capabilities to a project. It serves as the basis
        for many of the other Gradle plugins.
    </p><div class="section" title="18.1.&nbsp;Source sets"><div class="titlepage"><div><div><h2 class="title"><a name="N112C9"></a>18.1.&nbsp;Source sets</h2></div></div></div><p>The Java plugin introduces the concept of a <em class="firstterm">source set</em>. A source set is a group of
            source files which are compiled and executed together. These source files may include Java source files and
            resource files. Other plugins add the ability to include Groovy and Scala source files in a source set.
            A source set has an associated compile classpath, and runtime classpath.
        </p><p>
            You might use a source set to define an integration test suite, or for the API classes of your project, or
            to separate source which needs to be compiled against different Java versions.
        </p><p>The Java plugin defines two standard source sets, called <code class="literal">main</code> and <code class="literal">test</code>.
            The <code class="literal">main</code> source set contains your production source code, which is compiled and assembled
            into a JAR file. The <code class="literal">test</code> source set contains your unit test source code, which is
            compiled and executed using JUnit or TestNG.
        </p></div><div class="section" title="18.2.&nbsp;Tasks"><div class="titlepage"><div><div><h2 class="title"><a name="N112E1"></a>18.2.&nbsp;Tasks</h2></div></div></div><p>The Java plugin adds a number of tasks to your project, as shown below.</p><div class="table"><p class="title"><b>Table&nbsp;18.1.&nbsp;Java plugin - tasks</b></p><div class="table-contents"><table id="N112E6"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">clean</code>
                </td>
                <td>-</td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/Clean.html" target="_top">
              <code class="classname">Clean</code>
            </a>
          </td>
                <td>Deletes the project build directory.</td>
            </tr><tr>
                <td>
                    <code class="literal">compileJava</code>
                </td>
                <td>All tasks which produce the compile classpath. This includes the <code class="literal">jar</code> task for
                    project dependencies included in the <code class="literal">compile</code> configuration.
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/compile/Compile.html" target="_top">
              <code class="classname">Compile</code>
            </a>
          </td>
                <td>Compiles production Java source files using javac.</td>
            </tr><tr>
                <td>
                    <code class="literal">processResources</code>
                </td>
                <td>-</td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/Copy.html" target="_top">
              <code class="classname">Copy</code>
            </a>
          </td>
                <td>Copies production resources into the production classes directory.</td>
            </tr><tr>
                <td>
                    <code class="literal">classes</code>
                </td>
                <td>
                    <code class="literal">compileJava</code> and <code class="literal">processResources</code>.
                    Some plugins add additional compilation tasks.
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/Task.html" target="_top">
              <code class="classname">Task</code>
            </a>
          </td>
                <td>Assembles the production classes directory.</td>
            </tr><tr>
                <td>
                    <code class="literal">compileTestJava</code>
                </td>
                <td>
                    <code class="literal">compile</code>, plus all tasks which produce the test compile classpath.
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/compile/Compile.html" target="_top">
              <code class="classname">Compile</code>
            </a>
          </td>
                <td>Compiles test Java source files using javac.</td>
            </tr><tr>
                <td>
                    <code class="literal">processTestResources</code>
                </td>
                <td>-</td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/Copy.html" target="_top">
              <code class="classname">Copy</code>
            </a>
          </td>
                <td>Copies test resources into the test classes directory.</td>
            </tr><tr>
                <td>
                    <code class="literal">testClasses</code>
                </td>
                <td>
                    <code class="literal">compileTestJava</code> and <code class="literal">processTestResources</code>.
                    Some plugins add additional test compilation tasks.
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/Task.html" target="_top">
              <code class="classname">Task</code>
            </a>
          </td>
                <td>Assembles the test classes directory.</td>
            </tr><tr>
                <td>
                    <code class="literal">jar</code>
                </td>
                <td>
                    <code class="literal">compile</code>
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/groovydoc/org/gradle/api/tasks/bundling/Jar.html" target="_top">
              <code class="classname">Jar</code>
            </a>
          </td>
                <td>Assembles the JAR file</td>
            </tr><tr>
                <td>
                    <code class="literal">javadoc</code>
                </td>
                <td>
            <code class="literal">compile</code>
          </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/javadoc/Javadoc.html" target="_top">
              <code class="classname">Javadoc</code>
            </a>
          </td>
                <td>Generates API documentation for the production Java source, using Javadoc </td>
            </tr><tr>
                <td>
                    <code class="literal">test</code>
                </td>
                <td>
                    <code class="literal">compile</code>,
                    <code class="literal">compileTest</code>,
                    plus all tasks which produce the test runtime classpath.
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/testing/Test.html" target="_top">
              <code class="classname">Test</code>
            </a>
          </td>
                <td>Runs the unit tests using JUnit or TestNG.</td>
            </tr><tr>
                <td>
                    <code class="literal">uploadArchives</code>
                </td>
                <td>
                    The tasks which produce the artifacts in the <code class="literal">archives</code> configuration, including <code class="literal">jar</code>.
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/Upload.html" target="_top">
              <code class="classname">Upload</code>
            </a>
          </td>
                <td>Uploads the artifacts in the <code class="literal">archives</code> configuration, including the JAR file.</td>
            </tr></table></div></div><p>For each source set you add to the project, the Java plugin adds the following compilation tasks:</p><div class="table"><p class="title"><b>Table&nbsp;18.2.&nbsp;Java plugin - source set tasks</b></p><div class="table-contents"><table id="java_source_set_tasks"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">compile<em class="replaceable"><code>SourceSet</code></em>Java</code>
                </td>
                <td>
                    All tasks which produce the source set's compile classpath.
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/compile/Compile.html" target="_top">
              <code class="classname">Compile</code>
            </a>
          </td>
                <td>Compiles the given source set's Java source files using javac.</td>
            </tr><tr>
                <td>
                    <code class="literal">process<em class="replaceable"><code>SourceSet</code></em>Resources</code>
                </td>
                <td>-</td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/Copy.html" target="_top">
              <code class="classname">Copy</code>
            </a>
          </td>
                <td>Copies the given source set's resources into the classes directory.</td>
            </tr><tr>
                <td>
                    <code class="literal">
              <em class="replaceable"><code>sourceSet</code></em>Classes</code>
                </td>
                <td>
                    <code class="literal">compile<em class="replaceable"><code>SourceSet</code></em>Java</code> and
                    <code class="literal">process<em class="replaceable"><code>SourceSet</code></em>Resources</code>.
                    Some plugins add additional compilation tasks for the source set.
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/Task.html" target="_top">
              <code class="classname">Task</code>
            </a>
          </td>
                <td>Assembles the given source set's classes directory.</td>
            </tr></table></div></div><p>The Java plugin also adds a number of tasks which form a lifecycle for the project:</p><div class="table"><p class="title"><b>Table&nbsp;18.3.&nbsp;Java plugin - lifecycle tasks</b></p><div class="table-contents"><table id="N1149E"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">assemble</code>
                </td>
                <td>
                    All archive tasks in the project, including <code class="literal">jar</code>. Some plugins add additional
                    archive tasks to the project.
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/Task.html" target="_top">
              <code class="classname">Task</code>
            </a>
          </td>
                <td>Assembles all the archives in the project.</td>
            </tr><tr>
                <td>
                    <code class="literal">check</code>
                </td>
                <td>
                    All verification tasks in the project, including <code class="literal">test</code>. Some plugins add
                    additional verification tasks to the project.
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/Task.html" target="_top">
              <code class="classname">Task</code>
            </a>
          </td>
                <td>Performs all verification tasks in the project.</td>
            </tr><tr>
                <td>
                    <code class="literal">build</code>
                </td>
                <td>
                    <code class="literal">check</code> and <code class="literal">assemble</code>
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/Task.html" target="_top">
              <code class="classname">Task</code>
            </a>
          </td>
                <td>Performs a full build of the project.</td>
            </tr><tr>
                <td>
                    <code class="literal">buildNeeded</code>
                </td>
                <td>
                    <code class="literal">build</code> and <code class="literal">build</code> tasks in all project lib dependencies of the
                    <code class="literal">testRuntime</code> configuration.
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/Task.html" target="_top">
              <code class="classname">Task</code>
            </a>
          </td>
                <td>Performs a full build of the project and all projects it depends on.</td>
            </tr><tr>
                <td>
                    <code class="literal">buildDependents</code>
                </td>
                <td>
                    <code class="literal">build</code> and <code class="literal">build</code> tasks in all projects with a project lib
                    dependency on this project in a <code class="literal">testRuntime</code> configuration.
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/Task.html" target="_top">
              <code class="classname">Task</code>
            </a>
          </td>
                <td>Performs a full build of the project and all projects which depend on it.</td>
            </tr><tr>
                <td>
                    <code class="literal">build<em class="replaceable"><code>ConfigurationName</code></em>
            </code>
                </td>
                <td>
                    The tasks which produce the artifacts in configuration <em class="replaceable"><code>ConfigurationName</code></em>.
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/Task.html" target="_top">
              <code class="classname">Task</code>
            </a>
          </td>
                <td>Assembles the artifacts in the specified configuration.</td>
            </tr><tr>
                <td>
                    <code class="literal">upload<em class="replaceable"><code>ConfigurationName</code></em>
            </code>
                </td>
                <td>
                    The tasks which uploads the artifacts in configuration <em class="replaceable"><code>ConfigurationName</code></em>.
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/Upload.html" target="_top">
              <code class="classname">Upload</code>
            </a>
          </td>
                <td>Assembles and uploads the artifacts in the specified configuration.</td>
            </tr></table></div></div><p>The following diagram shows the relationships between these tasks.</p><div class="figure"><a name="N11584"></a><p class="title"><b>Figure&nbsp;18.1.&nbsp;Java plugin - tasks</b></p><div class="figure-contents"><img src="images/javaPluginTasks.png" alt="Java plugin - tasks"></div></div><br class="figure-break"></div><div class="section" title="18.3.&nbsp;Project layout"><div class="titlepage"><div><div><h2 class="title"><a name="N1158A"></a>18.3.&nbsp;Project layout</h2></div></div></div><p>The Java plugin assumes the project layout shown below. None of these directories need exist or have
            anything in them. The Java plugin will compile whatever it finds, and handles anything which is missing.
        </p><div class="table"><p class="title"><b>Table&nbsp;18.4.&nbsp;Java plugin - default project layout</b></p><div class="table-contents"><table id="javalayout"><thead><tr>
                    <td>Directory</td>
                    <td>Meaning</td>
                </tr></thead><tr>
        <td>
            <code class="filename">src/main/java</code>
        </td>
        <td>Production Java source</td>
    </tr><tr>
        <td>
            <code class="filename">src/main/resources</code>
        </td>
        <td>Production resources</td>
    </tr><tr>
        <td>
            <code class="filename">src/test/java</code>
        </td>
        <td>Test Java source</td>
    </tr><tr>
        <td>
            <code class="filename">src/test/resources</code>
        </td>
        <td>Test resources</td>
    </tr><tr>
        <td>
            <code class="filename">src/<em class="replaceable"><code>sourceSet</code></em>/java</code>
        </td>
        <td>Java source for the given source set</td>
    </tr><tr>
        <td>
            <code class="filename">src/<em class="replaceable"><code>sourceSet</code></em>/resources</code>
        </td>
        <td>Resources for the given source set</td>
    </tr></table></div></div><div class="section" title="18.3.1.&nbsp;Changing the project layout"><div class="titlepage"><div><div><h3 class="title"><a name="N115ED"></a>18.3.1.&nbsp;Changing the project layout</h3></div></div></div><p>You configure the project layout by configuring the appropriate source set. This is discussed in
                more detail in the following sections. Here is a brief example which changes the main Java and resource
                source directories.
            </p><div class="example"><a name="customJavaSourceLayout"></a><p class="title"><b>Example&nbsp;18.1.&nbsp;Custom Java source layout</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">sourceSets {
    main {
        java {
            srcDir <span class="hl-string">'src/java'</span>
        }
        resources {
            srcDir <span class="hl-string">'src/resources'</span>
        }
    }
}</pre></div></div><br class="example-break"></div></div><div class="section" title="18.4.&nbsp;Dependency management"><div class="titlepage"><div><div><h2 class="title"><a name="sec:java_plugin_and_dependency_management"></a>18.4.&nbsp;Dependency management</h2></div></div></div><p>The Java plugin adds a number of dependency configurations to your project, as shown below. It assigns
            those configurations to tasks such as <code class="literal">compileJava</code> and <code class="literal">test</code>.
            To learn more about configurations see <a class="xref" href="#sub:configurations" title="28.3.1.&nbsp;Configurations">Section&nbsp;28.3.1, &ldquo;Configurations&rdquo;</a> and
            <a class="xref" href="#artifacts_and_configurations" title="29.2.&nbsp;Artifacts and configurations">Section&nbsp;29.2, &ldquo;Artifacts and configurations&rdquo;</a>. Note also that transitive dependencies
            are disabled by default for the compile configuration. This can be overridden using:
        </p><pre class="programlisting">configurations.compile.transitive = true</pre><div class="table"><p class="title"><b>Table&nbsp;18.5.&nbsp;Java plugin - dependency configurations</b></p><div class="table-contents"><table id="tab:configurations"><thead><tr>
                    <td>Name</td>
                    <td>Extends</td>
                    <td>Used by tasks</td>
                    <td>Meaning</td>
                </tr></thead><tr>
                <td>compile</td>
                <td>-</td>
                <td>compileJava</td>
                <td>Compile time dependencies</td>
            </tr><tr>
                <td>runtime</td>
                <td>compile</td>
                <td>-</td>
                <td>Runtime dependencies</td>
            </tr><tr>
                <td>testCompile</td>
                <td>compile</td>
                <td>compileTestJava</td>
                <td>Additional dependencies for compiling tests.</td>
            </tr><tr>
                <td>testRuntime</td>
                <td>runtime, testCompile</td>
                <td>test</td>
                <td>Additional dependencies for running tests only.</td>
            </tr><tr>
                <td>archives</td>
                <td>-</td>
                <td>uploadArchives</td>
                <td>Artifacts (e.g. jars) produced by this project.</td>
            </tr><tr>
                <td>default</td>
                <td>runtime, archives</td>
                <td>-</td>
                <td>Artifacts produced <code class="literal">and</code> dependencies required by this project.
                </td>
            </tr></table></div></div><div class="figure"><a name="N1167C"></a><p class="title"><b>Figure&nbsp;18.2.&nbsp;Java plugin - dependency configurations</b></p><div class="figure-contents"><img src="images/javaPluginConfigurations.png" alt="Java plugin - dependency configurations"></div></div><br class="figure-break"></div><div class="section" title="18.5.&nbsp;Convention properties"><div class="titlepage"><div><div><h2 class="title"><a name="N11682"></a>18.5.&nbsp;Convention properties</h2></div></div></div><p>
            The Java plugin adds a number of convention properties to the project, shown below. You can use these properties
            in your build script as though they were properties of the project object (see
            <a class="xref" href="#sub:more_about_convention_objects" title="17.2.&nbsp;Using the convention object">Section&nbsp;17.2, &ldquo;Using the convention object&rdquo;</a>).
        </p><div class="table"><p class="title"><b>Table&nbsp;18.6.&nbsp;Java plugin - directory properties</b></p><div class="table-contents"><table id="javaconventionDir"><thead><tr>
                    <td>Property name</td>
                    <td>Type</td>
                    <td>Default value</td>
                    <td>Description</td>
                </tr></thead><tr>
        <td>
            <code class="literal">reportsDirName</code>
        </td>
        <td>
            <code class="classname">String</code>
        </td>
        <td>
            <code class="filename">reports</code>
        </td>
        <td>
            The name of the directory to generate reports into, relative to the build directory.
        </td>
    </tr><tr>
        <td>
            <code class="literal">reportsDir</code>
        </td>
        <td>
            <code class="classname">File</code> (read-only)
        </td>
        <td>
            <code class="filename">
                <em class="replaceable"><code>buildDir</code></em>/<em class="replaceable"><code>reportsDirName</code></em>
              </code>
        </td>
        <td>
            The directory to generate reports into.
        </td>
    </tr><tr>
                <td>
                    <code class="literal">testResultsDirName</code>
                </td>
                <td>
                    <code class="classname">String</code>
                </td>
                <td>
                    <code class="literal">test-results</code>
                </td>
                <td>
                    The name of the directory to generate test result .xml files into, relative to the build directory.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">testResultsDir</code>
                </td>
                <td>
                    <code class="classname">File</code> (read-only)
                </td>
                <td>
                    <code class="literal">
              <em class="replaceable"><code>buildDir</code></em>/<em class="replaceable"><code>testResultsDirName</code></em>
            </code>
                </td>
                <td>
                    The directory to generate test result .xml files into.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">testReportDirName</code>
                </td>
                <td>
                    <code class="classname">String</code>
                </td>
                <td>
                    <code class="literal">tests</code>
                </td>
                <td>
                    The name of the directory to generate the test report into, relative to the reports directory.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">testReportDir</code>
                </td>
                <td>
                    <code class="classname">File</code> (read-only)
                </td>
                <td>
                    <code class="literal">
              <em class="replaceable"><code>reportsDir</code></em>/<code class="literal">testReportDirName</code>
            </code>
                </td>
                <td>
                    The directory to generate the test report into.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">libsDirName</code>
                </td>
                <td>
                    <code class="classname">String</code>
                </td>
                <td>
                    <code class="literal">libs</code>
                </td>
                <td>
                    The name of the directory to generate libraries into, relative to the build directory.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">libsDir</code>
                </td>
                <td>
                    <code class="classname">File</code> (read-only)
                </td>
                <td>
                    <code class="literal">
              <em class="replaceable"><code>buildDir</code></em>/<em class="replaceable"><code>libsDirName</code></em>
            </code>
                </td>
                <td>
                    The directory to generate libraries into.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">distsDirName</code>
                </td>
                <td>
                    <code class="classname">String</code>
                </td>
                <td>
                    <code class="literal">dists</code>
                </td>
                <td>
                    The name of the directory to generate distributions into, relative to the build directory.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">distsDir</code>
                </td>
                <td>
                    <code class="classname">File</code> (read-only)
                </td>
                <td>
                    <code class="literal">
              <em class="replaceable"><code>buildDir</code></em>/<em class="replaceable"><code>distsDirName</code></em>
            </code>
                </td>
                <td>
                    The directory to generate distributions into.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">docsDirName</code>
                </td>
                <td>
                    <code class="classname">String</code>
                </td>
                <td>
                    <code class="literal">docs</code>
                </td>
                <td>
                    The name of the directory to generate documentation into, relative to the build directory.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">docsDir</code>
                </td>
                <td>
                    <code class="classname">File</code> (read-only)
                </td>
                <td>
                    <code class="literal">
              <em class="replaceable"><code>buildDir</code></em>/<em class="replaceable"><code>docsDirName</code></em>
            </code>
                </td>
                <td>
                    The directory to generate documentation into.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">dependencyCacheDirName</code>
                </td>
                <td>
                    <code class="classname">String</code>
                </td>
                <td>
                    <code class="literal">dependency-cache</code>
                </td>
                <td>
                    The name of the directory to use to cache source dependency information, relative to the build directory.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">dependencyCacheDir</code>
                </td>
                <td>
                    <code class="classname">File</code> (read-only)
                </td>
                <td>
                    <code class="literal">
              <em class="replaceable"><code>buildDir</code></em>/<em class="replaceable"><code>dependencyCacheDirName</code></em>
            </code>
                </td>
                <td>
                    The directory to use to cache source dependency information.
                </td>
            </tr></table></div></div><div class="table"><p class="title"><b>Table&nbsp;18.7.&nbsp;Java plugin - other properties</b></p><div class="table-contents"><table id="javaconventionNonDir"><thead><tr>
                    <td>Property name</td>
                    <td>Type</td>
                    <td>Default value</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">sourceSets</code>
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/SourceSetContainer.html" target="_top">
              <code class="classname">SourceSetContainer</code>
            </a> (read-only)</td>
                <td>Not null</td>
                <td>Contains the project's source sets.</td>
            </tr><tr>
                <td>
                    <code class="literal">sourceCompatibility</code>
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/JavaVersion.html" target="_top">
              <code class="classname">JavaVersion</code>
            </a>. Can also set using a String or a Number, eg
                    <code class="literal">'1.5'</code> or <code class="literal">1.5</code>.
                </td>
                <td>
                    <code class="literal">1.5</code>
                </td>
                <td>Java version compatibility to use when compiling Java source.</td>
            </tr><tr>
                <td>
                    <code class="literal">targetCompatibility</code>
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/JavaVersion.html" target="_top">
              <code class="classname">JavaVersion</code>
            </a>. Can also set using a String or Number, eg
                    <code class="literal">'1.5'</code> or <code class="literal">1.5</code>.
                </td>
                <td>
                    <code class="literal">
              <em class="replaceable"><code>sourceCompatibility</code></em>
            </code>
                </td>
                <td>Java version to generate classes for.</td>
            </tr><tr>
                <td>
                    <code class="literal">archivesBaseName</code>
                </td>
                <td>
                    <code class="classname">String</code>
                </td>
                <td>
            <code class="literal">
              <em class="replaceable"><code>projectName</code></em>
            </code>
          </td>
                <td>The basename to use for archives, such as JAR or ZIP files.</td>
            </tr><tr>
                <td>
                    <code class="literal">manifest</code>
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/groovydoc/org/gradle/api/tasks/bundling/GradleManifest.html" target="_top">
              <code class="classname">GradleManifest</code>
            </a>
          </td>
                <td>an empty manifest</td>
                <td>The manifest to include in all JAR files.</td>
            </tr><tr>
                <td>
                    <code class="literal">metaInf</code>
                </td>
                <td>
                    <code class="classname">List</code>
                </td>
                <td>
            <code class="literal">[]</code>
          </td>
                <td>A set of <a class="link" href="#sec:file_collections" title="14.2.&nbsp;File collections">file collections</a> which specify the files to
                    include in the <code class="filename">META-INF</code> directory or all JAR files.</td>
            </tr></table></div></div><p>
            These properties are provided by convention objects of type <a class="ulink" href="http://www.gradle.org/0.8/docs/groovydoc/org/gradle/api/plugins/JavaPluginConvention.html" target="_top">
          <code class="classname">JavaPluginConvention</code>
        </a>,
            <a class="ulink" href="http://www.gradle.org/0.8/docs/groovydoc/org/gradle/api/plugins/BasePluginConvention.html" target="_top">
          <code class="classname">BasePluginConvention</code>
        </a> and
            <a class="ulink" href="http://www.gradle.org/0.8/docs/groovydoc/org/gradle/api/plugins/ReportingBasePluginConvention.html" target="_top">
          <code class="classname">ReportingBasePluginConvention</code>
        </a>.
        </p></div><div class="section" title="18.6.&nbsp;Working with source sets"><div class="titlepage"><div><div><h2 class="title"><a name="sec:source_sets"></a>18.6.&nbsp;Working with source sets</h2></div></div></div><p>You can access the source sets of a project using the <code class="literal">sourceSets</code> property. This
            is a container for the project's source sets, of type <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/SourceSetContainer.html" target="_top">
          <code class="classname">SourceSetContainer</code>
        </a>.
            There is also a <code class="literal">sourceSets()</code> method, which you can pass a closure to which configures the
            source set container. The source set container works pretty much the same way as other containers, such
            as <code class="literal">tasks</code>.
        </p><div class="example"><a name="defineSourceSet"></a><p class="title"><b>Example&nbsp;18.2.&nbsp;Accessing a source set</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting"><span class="hl-comment">// Various ways to access the main source set</span>
println sourceSets.main.classesDir
println sourceSets[<span class="hl-string">'main'</span>].classesDir
sourceSets {
    println main.classesDir
}
sourceSets {
    main {
        println classesDir
    }
}

<span class="hl-comment">// Iterate over the source sets</span>
sourceSets.each {SourceSet set -&gt;
    println set.name
}</pre></div></div><br class="example-break"><p>To configure an existing source set, you simply use one of the above access methods to set the
            properties of the source set. The properties are described below. Here is an example which configures the
            main Java and resources directories:</p><div class="example"><a name="configureSourceSet"></a><p class="title"><b>Example&nbsp;18.3.&nbsp;Configuring the source directories of a source set</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">sourceSets {
    main {
        java {
            srcDir <span class="hl-string">'src/java'</span>
        }
        resources {
            srcDir <span class="hl-string">'src/resources'</span>
        }
    }
}</pre></div></div><br class="example-break"><p>To define a new source set, you simply reference it in the <code class="literal">sourceSets { }</code> block.
            When you define a source set, the Java plugin adds a number of tasks which assemble the classes for the
            source set, as shown in <a class="xref" href="#java_source_set_tasks" title="Table&nbsp;18.2.&nbsp;Java plugin - source set tasks">Table&nbsp;18.2, &ldquo;Java plugin - source set tasks&rdquo;</a>. For example, if you add a source set called
            <code class="literal">intTest</code>, the Java plugin adds <code class="literal">compileIntTestJava</code>, <code class="literal">processIntTestResources</code>
            and <code class="literal">intTestClasses</code> tasks.
        </p><div class="example"><a name="defineSourceSet"></a><p class="title"><b>Example&nbsp;18.4.&nbsp;Defining a source set</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">sourceSets {
    intTest
}</pre></div></div><br class="example-break"><div class="section" title="18.6.1.&nbsp;Source set properties"><div class="titlepage"><div><div><h3 class="title"><a name="N11933"></a>18.6.1.&nbsp;Source set properties</h3></div></div></div><p>The following table lists some of the important properties of a source set.
                You can find more details in the API documentation for <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/SourceSet.html" target="_top">
            <code class="classname">SourceSet</code>
          </a>.
            </p><div class="table"><p class="title"><b>Table&nbsp;18.8.&nbsp;Java plugin - source set properties</b></p><div class="table-contents"><table id="N1193F"><thead><tr>
                        <td>Property name</td>
                        <td>Type</td>
                        <td>Default value</td>
                        <td>Description</td>
                    </tr></thead><tr>
                    <td>
                        <code class="literal">name</code>
                    </td>
                    <td>
                        <code class="classname">String</code> (read-only)
                    </td>
                    <td>
                        Not null
                    </td>
                    <td>
                        The name of the source set, used to identify it.
                    </td>
                </tr><tr>
                    <td>
                        <code class="literal">classesDir</code>
                    </td>
                    <td>
                        <code class="classname">File</code>
                    </td>
                    <td>
                        <code class="literal">
                <em class="replaceable"><code>buildDir</code></em>/classes/<em class="replaceable"><code>name</code></em>
              </code>
                    </td>
                    <td>
                        The directory to generate the classes of this source set into.
                    </td>
                </tr><tr>
                    <td>
                        <code class="literal">compileClasspath</code>
                    </td>
                    <td>
                        <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/file/FileCollection.html" target="_top">
                <code class="classname">FileCollection</code>
              </a>
                    </td>
                    <td>
                        <code class="literal">compile</code> Configuration.
                    </td>
                    <td>
                        The classpath to use when compiling the source files of this source set.
                    </td>
                </tr><tr>
                    <td>
                        <code class="literal">runtimeClasspath</code>
                    </td>
                    <td>
                        <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/file/FileCollection.html" target="_top">
                <code class="classname">FileCollection</code>
              </a>
                    </td>
                    <td>
                        <code class="literal">classesDir</code> + <code class="literal">runtime</code> Configuration.
                    </td>
                    <td>
                        The classpath to use when executing the classes of this source set.
                    </td>
                </tr><tr>
                    <td>
                        <code class="literal">java</code>
                    </td>
                    <td>
                        <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/file/SourceDirectorySet.html" target="_top">
                <code class="classname">SourceDirectorySet</code>
              </a> (read-only)
                    </td>
                    <td>
                        Not null
                    </td>
                    <td>
                        The Java source files of this source set. Contains only <code class="filename">.java</code> files
                        found in the Java source directories, and excludes all other files.
                    </td>
                </tr><tr>
                    <td>
                        <code class="literal">java.srcDirs</code>
                    </td>
                    <td>
                        <code class="classname">Set&lt;File&gt;</code>. Can set using anything described in <a class="xref" href="#sec:specifying_multiple_files" title="14.4.&nbsp;Specifying a set of files">Section&nbsp;14.4, &ldquo;Specifying a set of files&rdquo;</a>.
                    </td>
                    <td>
                        <code class="literal">[<em class="replaceable"><code>projectDir</code></em>/src/<em class="replaceable"><code>name</code></em>/java]</code>
                    </td>
                    <td>
                        The source directories containing the Java source files of this source set.
                    </td>
                </tr><tr>
                    <td>
                        <code class="literal">resources</code>
                    </td>
                    <td>
                        <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/file/SourceDirectorySet.html" target="_top">
                <code class="classname">SourceDirectorySet</code>
              </a> (read-only)
                    </td>
                    <td>
                        Not null
                    </td>
                    <td>
                        The resources of this source set. Contains only resources, and excludes any
                        <code class="filename">.java</code> files found in the resource source directories. Other plugins,
                        such as the Groovy plugin, exclude additional types of files from this collection.
                    </td>
                </tr><tr>
                    <td>
                        <code class="literal">resources.srcDirs</code>
                    </td>
                    <td>
                        <code class="classname">Set&lt;File&gt;</code>. Can set using anything described in <a class="xref" href="#sec:specifying_multiple_files" title="14.4.&nbsp;Specifying a set of files">Section&nbsp;14.4, &ldquo;Specifying a set of files&rdquo;</a>.
                    </td>
                    <td>
                        <code class="literal">[<em class="replaceable"><code>projectDir</code></em>/src/<em class="replaceable"><code>name</code></em>/resources]</code>
                    </td>
                    <td>
                        The source directories containing the resources of this source set.
                    </td>
                </tr><tr>
                    <td>
                        <code class="literal">allJava</code>
                    </td>
                    <td>
                        <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/file/FileTree.html" target="_top">
                <code class="classname">FileTree</code>
              </a> (read-only)
                    </td>
                    <td>
                        <code class="literal">java</code>
                    </td>
                    <td>
                        All <code class="filename">.java</code> files of this source set. Some plugins, such as the Groovy plugin,
                        add additional Java source files to this collection.
                    </td>
                </tr><tr>
                    <td>
                        <code class="literal">allSource</code>
                    </td>
                    <td>
                        <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/file/FileTree.html" target="_top">
                <code class="classname">FileTree</code>
              </a> (read-only)
                    </td>
                    <td>
                        <code class="literal">resources + java</code>
                    </td>
                    <td>
                        All source files of this source set. This include all resource files and all Java source files.
                        Some plugins, such as the Groovy plugin, add additional source files to this collection.
                    </td>
                </tr></table></div></div></div><div class="section" title="18.6.2.&nbsp;Some common source set examples"><div class="titlepage"><div><div><h3 class="title"><a name="N11A6A"></a>18.6.2.&nbsp;Some common source set examples</h3></div></div></div><p>Using dependency configurations to define the source set classpath:</p><div class="example"><a name="configureSourceSet"></a><p class="title"><b>Example&nbsp;18.5.&nbsp;Defining the classpath of a source set</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">configurations {
    intTestCompile { extendsFrom compile }
    intTestRuntime { extendsFrom intTestCompile, runtime }
}

sourceSets {
    intTest {
        compileClasspath = sourceSets.main.classes + configurations.intTestCompile
        runtimeClasspath = classes + sourceSets.main.classes + configurations.intTestRuntime
    }
}</pre></div></div><br class="example-break"><p>Adding a JAR containing the classes of a source set:</p><div class="example"><a name="configureSourceSet"></a><p class="title"><b>Example&nbsp;18.6.&nbsp;Assembling a JAR for a source set</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">task intTestJar(type: Jar) {
    from sourceSets.intTest.classes
}</pre></div></div><br class="example-break"><p>Generating Javadoc for a source set:</p><div class="example"><a name="configureSourceSet"></a><p class="title"><b>Example&nbsp;18.7.&nbsp;Generating the Javadoc for a source set</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">task intTestJavadoc(type: Javadoc) {
    source sourceSets.intTest.allJava
}</pre></div></div><br class="example-break"><p>Adding a test suite to run the tests in a source set:</p><div class="example"><a name="configureSourceSet"></a><p class="title"><b>Example&nbsp;18.8.&nbsp;Running tests in a source set</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">task intTest(type: Test) {
    testClassesDir = sourceSets.intTest.classesDir
    classpath = sourceSets.intTest.runtimeClasspath
}</pre></div></div><br class="example-break"></div></div><div class="section" title="18.7.&nbsp;Javadoc"><div class="titlepage"><div><div><h2 class="title"><a name="sec:javadoc"></a>18.7.&nbsp;Javadoc</h2></div></div></div><p>The <code class="literal">javadoc</code> task is an instance of <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/javadoc/Javadoc.html" target="_top">
          <code class="classname">Javadoc</code>
        </a>.
            It supports the core javadoc options and the options of the standard doclet described in the
            <a class="ulink" href="http://java.sun.com/j2se/1.5.0/docs/tooldocs/windows/javadoc.html#referenceguide" target="_top">reference documentation</a>
            of the Javadoc executable.
            For a complete list of supported Javadoc options consult the API documentation of the following classes:
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/external/javadoc/CoreJavadocOptions.html" target="_top">
          <code class="classname">CoreJavadocOptions</code>
        </a> and <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/external/javadoc/StandardJavadocDocletOptions.html" target="_top">
          <code class="classname">StandardJavadocDocletOptions</code>
        </a>. 
        </p><div class="table"><p class="title"><b>Table&nbsp;18.9.&nbsp;Java plugin - Javadoc properties</b></p><div class="table-contents"><table id="N11AC7"><thead><tr>
                    <td>Task Property</td>
                    <td>Type</td>
                    <td>Default Value</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">classpath</code>
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/file/FileCollection.html" target="_top">
              <code class="classname">FileCollection</code>
            </a>
          </td>
                <td>
            <code class="literal">sourceSets.main.classes + sourceSets.main.compileClasspath</code>
          </td>
            </tr><tr>
                <td>
            <code class="literal">source</code>
          </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/file/FileTree.html" target="_top">
              <code class="classname">FileTree</code>
            </a>. Can set using anything described in <a class="xref" href="#sec:specifying_multiple_files" title="14.4.&nbsp;Specifying a set of files">Section&nbsp;14.4, &ldquo;Specifying a set of files&rdquo;</a>.</td>
                <td>
            <code class="literal">sourceSets.main.allJava</code>
          </td>
            </tr><tr>
                <td>
                    <code class="literal">destinationDir</code>
                </td>
                <td>
            <code class="classname">File</code>
          </td>
                <td>
            <code class="filename">
              <em class="replaceable"><code>docsDir</code></em>/javadoc</code>
          </td>
            </tr><tr>
                <td>
                    <code class="literal">title</code>
                </td>
                <td>
            <code class="classname">String</code>
          </td>
                <td>The name and version of the project</td>
            </tr></table></div></div></div><div class="section" title="18.8.&nbsp;Clean"><div class="titlepage"><div><div><h2 class="title"><a name="sec:clean"></a>18.8.&nbsp;Clean</h2></div></div></div><p>The <code class="literal">clean</code> task is an instance of <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/Clean.html" target="_top">
          <code class="classname">Clean</code>
        </a>. It
            simply removes the directory denoted by its <code class="literal">dir</code>
            property.
        </p><div class="table"><p class="title"><b>Table&nbsp;18.10.&nbsp;Java plugin - Clean properties</b></p><div class="table-contents"><table id="N11B44"><thead><tr>
                    <td>Task Property</td>
                    <td>Type</td>
                    <td>Default Value</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">dir</code>
                </td>
                <td>
            <code class="classname">File</code>
          </td>
                <td>
            <code class="filename">
              <em class="replaceable"><code>buildDir</code></em>
            </code>
          </td>
            </tr></table></div></div></div><div class="section" title="18.9.&nbsp;Resources"><div class="titlepage"><div><div><h2 class="title"><a name="sec:resources"></a>18.9.&nbsp;Resources</h2></div></div></div><p>The Java plugin uses the <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/Copy.html" target="_top">
          <code class="classname">Copy</code>
        </a> task for resource handling. It adds an
            instance for each source set in the project. You can find out more about the copy task in
            <a class="xref" href="#sec:copying_files" title="14.5.&nbsp;Copying files">Section&nbsp;14.5, &ldquo;Copying files&rdquo;</a>.
        </p><div class="table"><p class="title"><b>Table&nbsp;18.11.&nbsp;Java plugin - ProcessResources properties</b></p><div class="table-contents"><table id="N11B7A"><thead><tr>
                    <td>Task Property</td>
                    <td>Type</td>
                    <td>Default Value</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">srcDirs</code>
                </td>
                <td>
            <code class="classname">Object</code>. Can set using anything described in <a class="xref" href="#sec:specifying_multiple_files" title="14.4.&nbsp;Specifying a set of files">Section&nbsp;14.4, &ldquo;Specifying a set of files&rdquo;</a>.</td>
                <td>
            <code class="literal">
              <em class="replaceable"><code>sourceSet</code></em>.resources</code>
          </td>
            </tr><tr>
                <td>
                    <code class="literal">destinationDir</code>
                </td>
                <td>
            <code class="classname">File</code>. Can set using anything described in <a class="xref" href="#sec:locating_files" title="14.1.&nbsp;Locating files">Section&nbsp;14.1, &ldquo;Locating files&rdquo;</a>.</td>
                <td>
            <code class="literal">
              <em class="replaceable"><code>sourceSet</code></em>.classesDir</code>
          </td>
            </tr></table></div></div></div><div class="section" title="18.10.&nbsp;CompileJava"><div class="titlepage"><div><div><h2 class="title"><a name="sec:compile"></a>18.10.&nbsp;CompileJava</h2></div></div></div><p>The Java plugin adds a <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/compile/Compile.html" target="_top">
          <code class="classname">Compile</code>
        </a> instance for each
            source set in the project. The compile task delegates to Ant's javac task to do the compile. You can set most
            of the properties of the Ant javac task.
        </p><div class="table"><p class="title"><b>Table&nbsp;18.12.&nbsp;Java plugin - Compile properties</b></p><div class="table-contents"><table id="N11BCA"><thead><tr>
                    <td>Task Property</td>
                    <td>Type</td>
                    <td>Default Value</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">classpath</code>
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/file/FileCollection.html" target="_top">
              <code class="classname">FileCollection</code>
            </a>
          </td>
                <td>
            <code class="literal">
              <em class="replaceable"><code>sourceSet</code></em>.compileClasspath</code>
          </td>
            </tr><tr>
                <td>
                    <code class="literal">source</code>
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/file/FileTree.html" target="_top">
              <code class="classname">FileTree</code>
            </a>. Can set using anything described in <a class="xref" href="#sec:specifying_multiple_files" title="14.4.&nbsp;Specifying a set of files">Section&nbsp;14.4, &ldquo;Specifying a set of files&rdquo;</a>.</td>
                <td>
            <code class="literal">
              <em class="replaceable"><code>sourceSet</code></em>.java</code>
          </td>
            </tr><tr>
                <td>
                    <code class="literal">destinationDir</code>
                </td>
                <td>
            <code class="classname">File</code>.</td>
                <td>
            <code class="literal">
              <em class="replaceable"><code>sourceSet</code></em>.classesDir</code>
          </td>
            </tr></table></div></div></div><div class="section" title="18.11.&nbsp;Test"><div class="titlepage"><div><div><h2 class="title"><a name="sec:java_test"></a>18.11.&nbsp;Test</h2></div></div></div><p>The <code class="literal">test</code> task is an instance of <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/testing/Test.html" target="_top">
          <code class="classname">Test</code>
        </a>. It
            executes all unit tests found in the <code class="literal">test</code> source set.
        </p><div class="table"><p class="title"><b>Table&nbsp;18.13.&nbsp;Java plugin - test properties</b></p><div class="table-contents"><table id="N11C3C"><thead><tr>
                    <td>Task Property</td>
                    <td>Type</td>
                    <td>Default Value</td>
                </tr></thead><tr>
                <td>
            <code class="literal">testClassesDir</code>
          </td>
                <td>
            <code class="classname">File</code>
          </td>
                <td>
            <code class="literal">sourceSets.test.classesDir</code>
          </td>
            </tr><tr>
                <td>
            <code class="literal">classpath</code>
          </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/file/FileCollection.html" target="_top">
              <code class="classname">FileCollection</code>
            </a>
          </td>
                <td>
            <code class="literal">sourceSets.test.runtimeClasspath</code>
          </td>
            </tr><tr>
                <td>
            <code class="literal">testResultsDir</code>
          </td>
                <td>
            <code class="classname">File</code>
          </td>
                <td>
            <code class="literal">testResultsDir</code>
          </td>
            </tr><tr>
                <td>
            <code class="literal">testReportDir</code>
          </td>
                <td>
            <code class="classname">File</code>
          </td>
                <td>
            <code class="literal">testReportDir</code>
          </td>
            </tr><tr>
                <td>
            <code class="literal">testSrcDirs</code>
          </td>
                <td>
            <code class="classname">List&lt;File&gt;</code>
          </td>
                <td>
            <code class="literal">sourceSets.test.java.srcDirs</code>
          </td>
            </tr></table></div></div><p>Have a look at <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/testing/Test.html" target="_top">
          <code class="classname">Test</code>
        </a>
            for its complete API. Right now the test results are always in XML-format. The task has a
            <code class="literal">stopAtFailuresOrErrors</code>
            property to control the behavior when tests are failing. Test
            <span class="emphasis"><em>always</em></span>
            executes all tests. It stops the build afterwards if
            <code class="literal">stopAtFailuresOrErrors</code>
            is true and there are failing tests or tests that have thrown an uncaught exception.
        </p><p>Per default the tests are run in a forked JVM and the fork is done per test. You can modify this behavior
            by setting forking to false or set the forkmode to once.
        </p><p>The Test task detects which classes are test classes by inspecting the compiled test classes.
            By default it scans all <span class="emphasis"><em>.class</em></span> files. You can set custom includes / excludes, only those
            classes will be scanned. Depending on the Test framework used (JUnit / TestNG) the test class detection uses different criteria.
        </p><p>
            When using JUnit, we scan for both JUnit 3 and 4 test classes. If any of the following criteria match, the
            class is considered to be a JUnit test class. Extend TestCase or GroovyTestCase, Class annotated with RunWith or
            contain a method annotated with Test (inherited test methods are detected).
        </p><p>
            When using TestNG, we scan for methods annotated with Test (inherited test methods are detected).
        </p><p>
            Since 0.6.1 we scan up the inheritance tree into jar files on the test classpath.
        </p><p>
            In case you don't want to use the test class detection, you can disable it by setting scanForTestClasses to false.
            This will make the test task only use the includes / excludes to find test classes.

            If <code class="code">scanForTestClasses</code> is disabled and no include or exclude patterns are specified, the
            respective defaults are used. For include this is <code class="literal">"**/*Tests.class", "**/*Test.class"</code>
            and the for exclude it is <code class="literal">"**/Abstract*.class"</code>.
        </p><p>Both JUnit and TestNG are supported through their Ant tasks.</p><p>
            Regarding TestNG reporting, when the test report is disabled the default TestNG listeners are disabled
            (options.useDefaultListeners is set to false). 
        </p></div><div class="section" title="18.12.&nbsp;Jar"><div class="titlepage"><div><div><h2 class="title"><a name="N11CE1"></a>18.12.&nbsp;Jar</h2></div></div></div><p>The <code class="literal">jar</code> task creates a JAR file containing the class files and resources of the
            project. The JAR file is declared as an artifact in the <code class="literal">archives</code> dependency
            configuration. This means that the JAR is available in the classpath of a dependent project. If you upload
            your project into a repository, this JAR is declared as part of the dependency descriptor. To learn
            more about how to work with archives and artifact configurations see <a class="xref" href="#artifact_management" title="Chapter&nbsp;29.&nbsp;Artifact Management">Chapter&nbsp;29, <i>Artifact Management</i></a>.
        </p></div><div class="section" title="18.13.&nbsp;Adding archives"><div class="titlepage"><div><div><h2 class="title"><a name="N11CEF"></a>18.13.&nbsp;Adding archives</h2></div></div></div><p>If you come from Maven you can have only one library JAR per project. With Gradle you can have as many as
            you want. You can also add WAR, ZIP and TAR archives to your project. They are all added the same way, so
            let's look at how you add a ZIP file.
        </p><div class="example"><a name="zip"></a><p class="title"><b>Example&nbsp;18.9.&nbsp;Creation of ZIP archive</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">usePlugin <span class="hl-string">'java'</span>
version = <span class="hl-number">1.0</span>

task myZip(type: Zip) {
    fileSet(dir: <span class="hl-string">'somedir'</span>)
}

println myZip.archiveName</pre><p>Output of <strong class="userinput"><code>gradle -q myZip</code></strong>
        </p><pre class="screen">&gt; gradle -q myZip
zipProject-1.0.zip</pre></div></div><br class="example-break"><p>This adds a Zip archive task with the name <code class="literal">myZip</code> which produces ZIP file
            <code class="filename">zipProject-1.0.zip</code>. It is important to distinguish between the name of the archive task
            and the name of the archive generated by the archive task. The name of the generated archive file is by
            default the name of the project with the project version appended. The default name for archives can be
            changed with the <code class="literal">archivesBaseName</code> project property. The name of the archive can also be
            changed at any time later on.</p><p>There are a number of properties which you can set on an archive task. You can, for example, change the
            name of the archive:
        </p><div class="example"><a name="zipWithCustomName"></a><p class="title"><b>Example&nbsp;18.10.&nbsp;Configuration of archive task - custom archive name</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">usePlugin <span class="hl-string">'java'</span>
version = <span class="hl-number">1.0</span>

task myZip(type: Zip) {
    fileSet(dir: <span class="hl-string">'somedir'</span>)
    baseName = <span class="hl-string">'customName'</span>
}

println myZip.archiveName</pre><p>Output of <strong class="userinput"><code>gradle -q myZip</code></strong>
        </p><pre class="screen">&gt; gradle -q myZip
customName-1.0.zip</pre></div></div><br class="example-break"><p>You can further customize the archive names:</p><div class="example"><a name="zipWithArguments"></a><p class="title"><b>Example&nbsp;18.11.&nbsp;Configuration of archive task - appendix &amp; classifier</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">usePlugin <span class="hl-string">'java'</span>
archivesBaseName = <span class="hl-string">'gradle'</span>
version = <span class="hl-number">1.0</span>

task myZip(type: Zip) {
    appendix = <span class="hl-string">'wrapper'</span>
    classifier = <span class="hl-string">'src'</span>
    fileSet(dir: <span class="hl-string">'somedir'</span>)
}

println myZip.archiveName</pre><p>Output of <strong class="userinput"><code>gradle -q myZip</code></strong>
        </p><pre class="screen">&gt; gradle -q myZip
gradle-wrapper-1.0-src.zip</pre></div></div><br class="example-break"><p>Often you will want to publish an archive, so that it is usable from another project. This process is
            described in <a class="xref" href="#artifact_management" title="Chapter&nbsp;29.&nbsp;Artifact Management">Chapter&nbsp;29, <i>Artifact Management</i></a>
        </p><div class="section" title="18.13.1.&nbsp;Archive tasks"><div class="titlepage"><div><div><h3 class="title"><a name="sec:archive_tasks"></a>18.13.1.&nbsp;Archive tasks</h3></div></div></div><p>An archive task is a task which produces an archive at execution time. The following archive tasks are
            available:
        </p><div class="table"><p class="title"><b>Table&nbsp;18.14.&nbsp;Archive tasks</b></p><div class="table-contents"><table id="N11D47"><thead><tr>
                    <td>Type</td>
                    <td>Accepted file container</td>
                    <td>Extends</td>
                </tr></thead><tr>
                <td>
                    <a class="ulink" href="http://www.gradle.org/0.8/docs/groovydoc/org/gradle/api/tasks/bundling/Zip.html" target="_top">
                <code class="classname">Zip</code>
              </a>
                </td>
                <td>fileSet, fileCollection, zipFileSet</td>
                <td>AbstractArchiveTask</td>
            </tr><tr>
                <td>
                    <a class="ulink" href="http://www.gradle.org/0.8/docs/groovydoc/org/gradle/api/tasks/bundling/Tar.html" target="_top">
                <code class="classname">Tar</code>
              </a>
                </td>
                <td>fileSet, fileCollection, zipFileSet, tarFileSet</td>
                <td>Zip</td>
            </tr><tr>
                <td>
                    <a class="ulink" href="http://www.gradle.org/0.8/docs/groovydoc/org/gradle/api/tasks/bundling/Jar.html" target="_top">
                <code class="classname">Jar</code>
              </a>
                </td>
                <td>fileSet, fileCollection, zipFileSet</td>
                <td>Zip</td>
            </tr><tr>
                <td>
                    <a class="ulink" href="http://www.gradle.org/0.8/docs/groovydoc/org/gradle/api/tasks/bundling/War.html" target="_top">
                <code class="classname">War</code>
              </a>
                </td>
                <td>fileSet, fileCollection, zipFileSet</td>
                <td>Jar</td>
            </tr></table></div></div><p>The following file containers are available:
        </p><div class="table"><p class="title"><b>Table&nbsp;18.15.&nbsp;File container for archives</b></p><div class="table-contents"><table id="filecontainer"><thead><tr>
                    <td>Type</td>
                    <td>Meaning</td>
                </tr></thead><tr>
                <td>
                    <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/file/FileTree.html" target="_top">
                <code class="classname">FileTree</code>
              </a>
                </td>
                <td>A set of files defined by a common base directory and include/exclude patterns. See <a class="xref" href="#sec:file_trees" title="14.3.&nbsp;File trees">Section&nbsp;14.3, &ldquo;File trees&rdquo;</a>.</td>
            </tr><tr>
                <td>
                    <a class="ulink" href="http://www.gradle.org/0.8/docs/groovydoc/org/gradle/api/tasks/util/ZipFileSet.html" target="_top">
                <code class="classname">ZipFileSet</code>
              </a>
                </td>
                <td>Extends FileSet with additional properties known from Ant's zipfileset task.</td>
            </tr><tr>
                <td>
                    <a class="ulink" href="http://www.gradle.org/0.8/docs/groovydoc/org/gradle/api/tasks/util/TarFileSet.html" target="_top">
                <code class="classname">TarFileSet</code>
              </a>
                </td>
                <td>Extends ZipFileSet with additional properties known from Ant's tarfileset task.</td>
            </tr><tr>
                <td>
                    <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/file/FileCollection.html" target="_top">
                <code class="classname">FileCollection</code>
              </a>
                </td>
                <td>An arbitrary collection of files to include in the archive. In contrast to a
                    <code class="literal">FileTree</code> they don't need to have a common base directory. See <a class="xref" href="#sec:file_collections" title="14.2.&nbsp;File collections">Section&nbsp;14.2, &ldquo;File collections&rdquo;</a>
                    for more details.
                </td>
            </tr><tr>
                <td>
                    <a class="ulink" href="http://www.gradle.org/0.8/docs/groovydoc/org/gradle/api/tasks/util/AntDirective.html" target="_top">
                <code class="classname">AntDirective</code>
              </a>
                </td>
                <td>An arbitrary Ant resource declaration.</td>
            </tr></table></div></div><p>To learn about all the details have a look at the javadoc of the archive task class or the file container
            class itself.
        </p><div class="section" title="18.13.1.1.&nbsp;Common properties"><div class="titlepage"><div><div><h4 class="title"><a name="sub:common_properties"></a>18.13.1.1.&nbsp;Common properties</h4></div></div></div><p>The name of the generated archive is assembled from the task properties <code class="literal">baseName</code>,
                <code class="literal">appendix</code>, <code class="literal">version</code>, <code class="literal">classifier</code> and
                <code class="literal">extension</code> into
                <code class="literal">
              <em class="replaceable"><code>baseName</code></em>-<em class="replaceable"><code>appendix</code></em>-<em class="replaceable"><code>version</code></em>-<em class="replaceable"><code>classifier</code></em>.<em class="replaceable"><code>extension</code></em>
            </code>.
                <sup>[<a href="#ftn.N11E2A" name="N11E2A" class="footnote">15</a>]</sup>
                The assembled name is accessible via the <code class="literal">archiveName</code> property. The
                <code class="literal">name</code> property denotes the name of the task, not the generated archive. An archive
                task has also a <code class="literal">customName</code> property. If this property is set, the
                <code class="literal">archiveName</code> property returns its value instead of assembling a name out of the
                properties mentioned above.
            </p><p>Archives have a <code class="literal">destinationDir</code> property to specify where the generated archive
                should be placed. It has also an <code class="literal">archivePath</code> property, which returns a File object
                with the absolute path of the generated archive.
            </p></div><div class="section" title="18.13.1.2.&nbsp;Adding content"><div class="titlepage"><div><div><h4 class="title"><a name="sub:adding_content"></a>18.13.1.2.&nbsp;Adding content</h4></div></div></div><p>To add content to an archive you must add file container to an archive (see
                <a class="xref" href="#filecontainer" title="Table&nbsp;18.15.&nbsp;File container for archives">Table&nbsp;18.15, &ldquo;File container for archives&rdquo;</a>). You can add as many file containers as you like. They behave pretty much
                the same as the Ant resources with similar names.
            </p><div class="example"><a name="archiveContent"></a><p class="title"><b>Example&nbsp;18.12.&nbsp;Adding content to archive - include &amp; exclude</b></p><div class="example-contents"><p>
              <code class="filename">build.gradle</code>
            </p><pre class="programlisting">task zipWithFileSet(type: Zip) {
    fileSet(dir: <span class="hl-string">'contentDir'</span>) {
        include(<span class="hl-string">'**/*.txt'</span>)
        exclude(<span class="hl-string">'**/*.gif'</span>)
    }
}</pre></div></div><br class="example-break"><p>You can add arbitrary files to an archive:
            </p><div class="example"><a name="archiveContent"></a><p class="title"><b>Example&nbsp;18.13.&nbsp;Adding content to archive - arbitrary files</b></p><div class="example-contents"><p>
              <code class="filename">build.gradle</code>
            </p><pre class="programlisting">task zipWithFiles(type: Zip) {
    files(<span class="hl-string">'path_to_file1'</span>, <span class="hl-string">'path_to_file2'</span>)
}</pre></div></div><br class="example-break"><p>Other examples:
            </p><div class="example"><a name="archiveContent"></a><p class="title"><b>Example&nbsp;18.14.&nbsp;Adding content to archive - zipFileSet</b></p><div class="example-contents"><p>
              <code class="filename">build.gradle</code>
            </p><pre class="programlisting">task zipWithZipFileSet(type: Zip) {
    zipFileSet(dir: <span class="hl-string">'contentDir'</span>) {
        include(<span class="hl-string">'**/*.txt'</span>)
        exclude(<span class="hl-string">'**/*.gif'</span>)
        prefix = <span class="hl-string">'myprefix'</span>
    }
}</pre></div></div><br class="example-break"><div class="example"><a name="archiveContent"></a><p class="title"><b>Example&nbsp;18.15.&nbsp;Creation of TAR archive</b></p><div class="example-contents"><p>
              <code class="filename">build.gradle</code>
            </p><pre class="programlisting">task tarWithFileSet(type: Tar) {
    tarFileSet(dir: <span class="hl-string">'contentDir'</span>) {
        include(<span class="hl-string">'**/*.txt'</span>)
        exclude(<span class="hl-string">'**/*.gif'</span>)
        uid = <span class="hl-string">'myuid'</span>
    }
}</pre></div></div><br class="example-break"><p>There is also the option to add an arbitrary Ant expression describing an Ant resource.
            </p><pre class="programlisting">myZipTask.antDirective {        
   zipgroupfileset(dir: new File(rootDir, 'lib'))    
}</pre><p>This is for rather exotic use cases. Usually you should be fine with the file container provided by
                Gradle.
            </p></div><div class="section" title="18.13.1.3.&nbsp;Merging"><div class="titlepage"><div><div><h4 class="title"><a name="sub:merging"></a>18.13.1.3.&nbsp;Merging</h4></div></div></div><p>If you want to merge the content of other archives into the archive to be generated Gradle offers you
                two methods. One is <code class="literal">merge</code>:
            </p><pre class="programlisting">myZipTask.merge('path1/otherArchive1.zip', 'path2/otherArchive.tar.gz')</pre><p>This merges the whole content of the archive passed to the merge method into the generated archive. If
                you need more control which content of the archive should be merged and to what path, you can pass a
                closure to the merge method:
            </p><pre class="programlisting">myZipTask.merge('path1/otherArchive1.zip', 'path2/otherArchive.tar.gz') {
    include('**/*.txt')
    exclude('**/*.gif')
    prefix = 'myprefix'
}</pre><p>Under the hood Gradle scans the extension of the archives to be merged. According to the extension, it
                creates a
                <code class="literal">ZipFileSet</code>
                or <code class="literal">TarFileSet</code>. The closure is applied to this newly created file container. There
                is another method for merging called <code class="literal">mergeGroup</code>.
            </p><pre class="programlisting">myZipTask.mergeGroup('path_to_dir_with_archives') {
    include('**/*.zip')
    exclude('**/*.tar.gz')
}</pre><p>With this method you can assign a set of archives to be merged. Those archives have to be located
                under the directory you pass as an argument. You can define filters what archives should be included.
                They are always included fully and you can't specify a path. If you need this features, you must use the
                <code class="literal">merge</code> method.
            </p></div><div class="section" title="18.13.1.4.&nbsp;Manifest"><div class="titlepage"><div><div><h4 class="title"><a name="sub:manifest"></a>18.13.1.4.&nbsp;Manifest</h4></div></div></div><p>The convention object of the Java Plugin has a <code class="literal">manifest</code>
                property pointing to an instance of <a class="ulink" href="http://www.gradle.org/0.8/docs/groovydoc/org/gradle/api/tasks/bundling/GradleManifest.html" target="_top">
              <code class="classname">GradleManifest</code>
            </a>.
                With this <code class="classname">GradleManifest</code> object you can define the content of the
                <code class="filename">MANIFEST.MF</code> file for all the jar or a war archives in your project.
            </p><div class="example"><a name="manifest"></a><p class="title"><b>Example&nbsp;18.16.&nbsp;Customization of MANIFEST.MF</b></p><div class="example-contents"><p>
              <code class="filename">build.gradle</code>
            </p><pre class="programlisting">manifest.mainAttributes(<span class="hl-string">"Implementation-Title"</span>: <span class="hl-string">"Gradle"</span>, <span class="hl-string">"Implementation-Version"</span>: version)</pre></div></div><br class="example-break"><p>You can also define sections of a manifest file.
            </p><p>If a particular archive needs unique entries in its manifest you have to create your own
                <code class="classname">GradleManifest</code> instance for it.
            </p><div class="example"><a name="manifest"></a><p class="title"><b>Example&nbsp;18.17.&nbsp;Customization of MANIFEST.MF for a particular archive</b></p><div class="example-contents"><p>
              <code class="filename">build.gradle</code>
            </p><pre class="programlisting">manifest.mainAttributes(<span class="hl-string">"Implementation-Title"</span>: <span class="hl-string">"Gradle"</span>, <span class="hl-string">"Implementation-Version"</span>: version)
myZipTask.manifest = <span class="hl-keyword">new</span> GradleManifest(manifest.createManifest())
myZipTask.manifest.mainAttributes(mykey: <span class="hl-string">"myvalue"</span>)</pre></div></div><br class="example-break"><p>Passing the common manifest object to the constructor of <code class="classname">GradleManifest</code>
                add the common manifest values to the task specific manifest instance.
            </p></div><div class="section" title="18.13.1.5.&nbsp;MetaInf"><div class="titlepage"><div><div><h4 class="title"><a name="sub:metainf"></a>18.13.1.5.&nbsp;MetaInf</h4></div></div></div><p>The convention object of the Java Plugin has a <code class="literal">metaInf</code> property pointing to a list of
                <code class="classname">FileSet</code> objects. With these file sets you can define which files should be in the
                <code class="filename">META-INF</code> directory of a JAR or a WAR archive.
            </p><pre class="programlisting">metaInf &lt;&lt; new FileSet(someDir)</pre></div></div></div><div class="section" title="18.14.&nbsp;Uploading"><div class="titlepage"><div><div><h2 class="title"><a name="sec:upload"></a>18.14.&nbsp;Uploading</h2></div></div></div><p>How to upload your archives is described in <a class="xref" href="#artifact_management" title="Chapter&nbsp;29.&nbsp;Artifact Management">Chapter&nbsp;29, <i>Artifact Management</i></a>.
        </p></div><div class="section" title="18.15.&nbsp;Eclipse"><div class="titlepage"><div><div><h2 class="title"><a name="sec:eclipse"></a>18.15.&nbsp;Eclipse</h2></div></div></div><p>Gradle comes with a number of tasks for generating eclipse files for your projects.
        </p><div class="section" title="18.15.1.&nbsp;Eclipse classpath"><div class="titlepage"><div><div><h3 class="title"><a name="sub:eclipse_classpath"></a>18.15.1.&nbsp;Eclipse classpath</h3></div></div></div><p>
                <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/ide/eclipse/EclipseClasspath.html" target="_top">
            <code class="classname">EclipseClasspath</code>
          </a>
                has a default instance with the name <code class="literal">eclipseCp</code>. It generates a
                <code class="literal">.classpath</code> file.
            </p><div class="table"><p class="title"><b>Table&nbsp;18.16.&nbsp;Java plugin - Eclipse properties</b></p><div class="table-contents"><table id="N11F16"><thead><tr>
                        <td>Task Property</td>
                        <td>Convention Property</td>
                    </tr></thead><tr>
                    <td>srcDirs</td>
                    <td>srcDirs + resourcesDirs</td>
                </tr><tr>
                    <td>testSrcDirs</td>
                    <td>testSrcDirs + testResourcesDirs</td>
                </tr><tr>
                    <td>outputDirectory</td>
                    <td>classesDir</td>
                </tr><tr>
                    <td>testOutputDirectory</td>
                    <td>testClassesDir</td>
                </tr><tr>
                    <td>classpathLibs</td>
                    <td>the resolve result for
                        <code class="literal">testRuntime</code>
                    </td>
                </tr></table></div></div></div><div class="section" title="18.15.2.&nbsp;Eclipse project"><div class="titlepage"><div><div><h3 class="title"><a name="sub:eclipse_project"></a>18.15.2.&nbsp;Eclipse project</h3></div></div></div><p>
                <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/ide/eclipse/EclipseProject.html" target="_top">
            <code class="classname">EclipseProject</code>
          </a>
                has a default instance with the name <code class="literal">eclipseProject</code>. It generates a
                <code class="literal">.project</code> file.
            </p><div class="table"><p class="title"><b>Table&nbsp;18.17.&nbsp;Java plugin - Eclipse project properties</b></p><div class="table-contents"><table id="N11F60"><thead><tr>
                        <td>Task Property</td>
                        <td>Convention Property</td>
                    </tr></thead><tr>
                    <td>name</td>
                    <td>project.name</td>
                </tr><tr>
                    <td>projectType</td>
                    <td>ProjectType.JAVA</td>
                </tr></table></div></div><p>The java plugin also provides a task called
                <code class="literal">eclipse</code>
                which generates both of the eclipse tasks mentioned above. If you are using the war plugin,
                <code class="literal">eclipse</code>
                also leads to the execution of the
                <code class="literal">eclipseWtp</code>
                task.
            </p></div></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N11E2A" name="ftn.N11E2A" class="para">15</a>] </sup>If any of these properties is empty the trailing <code class="literal">-</code> is not added to the name.
                    </p></div></div></div><div class="chapter" title="Chapter&nbsp;19.&nbsp;The Groovy Plugin"><div class="titlepage"><div><div><h1><a name="groovy_plugin"></a>Chapter&nbsp;19.&nbsp;The Groovy Plugin</h1></div></div></div><p>The Groovy Plugin extends the Java Plugin to add support for Groovy projects. It can deal with Groovy-only projects and
        with mixed Java/Groovy projects. It can even deal with Java-only projects.
        <sup>[<a href="#ftn.N11F8F" name="N11F8F" class="footnote">16</a>]</sup>
        The Groovy plugin supports joint compilation of Java and Groovy. This means that your project can contain Groovy
        classes which use Java classes, and vice versa.
    </p><div class="section" title="19.1.&nbsp;Tasks"><div class="titlepage"><div><div><h2 class="title"><a name="N11F99"></a>19.1.&nbsp;Tasks</h2></div></div></div><p>The Groovy plugin adds the following tasks to the project.</p><div class="table"><p class="title"><b>Table&nbsp;19.1.&nbsp;Groovy plugin - tasks</b></p><div class="table-contents"><table id="N11F9E"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
            <code class="literal">compileGroovy</code>
          </td>
                <td>
            <code class="literal">compileJava</code>
          </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/compile/GroovyCompile.html" target="_top">
              <code class="classname">GroovyCompile</code>
            </a>
          </td>
                <td>Compiles production Groovy source files using groovyc.</td>
            </tr><tr>
                <td>
            <code class="literal">compileTestGroovy</code>
          </td>
                <td>
            <code class="literal">compileTestJava</code>
          </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/compile/GroovyCompile.html" target="_top">
              <code class="classname">GroovyCompile</code>
            </a>
          </td>
                <td>Compiles test Groovy source files using groovyc.</td>
            </tr><tr>
                <td>
            <code class="literal">compile<em class="replaceable"><code>SourceSet</code></em>Groovy</code>
          </td>
                <td>
            <code class="literal">compile<em class="replaceable"><code>SourceSet</code></em>Java</code>
          </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/compile/GroovyCompile.html" target="_top">
              <code class="classname">GroovyCompile</code>
            </a>
          </td>
                <td>Compiles the given source set's Groovy source files using groovyc.</td>
            </tr><tr>
                <td>
            <code class="literal">groovydoc</code>
          </td>
                <td>-</td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/javadoc/Groovydoc.html" target="_top">
              <code class="classname">Groovydoc</code>
            </a>
          </td>
                <td>Generates API documentation for the production Groovy source files using groovydoc.</td>
            </tr></table></div></div><p>The Groovy plugin adds the following dependencies to tasks added by the Java plugin.</p><div class="table"><p class="title"><b>Table&nbsp;19.2.&nbsp;Groovy plugin - additional task dependencies</b></p><div class="table-contents"><table id="N12021"><thead><td>Task name</td><td>Depends on</td></thead><tr>
                <td>classes</td>
                <td>compileGroovy</td>
            </tr><tr>
                <td>testClasses</td>
                <td>compileTestGroovy</td>
            </tr><tr>
                <td>
            <em class="replaceable"><code>sourceSet</code></em>Classes</td>
                <td>compile<em class="replaceable"><code>SourceSet</code></em>Groovy</td>
            </tr></table></div></div><div class="figure"><a name="N12047"></a><p class="title"><b>Figure&nbsp;19.1.&nbsp;Groovy plugin - tasks</b></p><div class="figure-contents"><img src="images/groovyPluginTasks.png" alt="Groovy plugin - tasks"></div></div><br class="figure-break"></div><div class="section" title="19.2.&nbsp;Project layout"><div class="titlepage"><div><div><h2 class="title"><a name="N1204D"></a>19.2.&nbsp;Project layout</h2></div></div></div><p>The Groovy plugin assumes the project layout shown in <a class="xref" href="#groovylayout" title="Table&nbsp;19.3.&nbsp;Groovy plugin - project layout">Table&nbsp;19.3, &ldquo;Groovy plugin - project layout&rdquo;</a>. All the Groovy
            source directories can contain Groovy <span class="emphasis"><em>and</em></span> Java code. The Java source directories may
            only contain Java source code.
            <sup>[<a href="#ftn.N12058" name="N12058" class="footnote">17</a>]</sup>
            None of these directories need exist or have anything in them. The Groovy plugin will compile whatever it
            finds, and handles anything which is missing.
        </p><div class="table"><p class="title"><b>Table&nbsp;19.3.&nbsp;Groovy plugin - project layout</b></p><div class="table-contents"><table id="groovylayout"><thead><tr>
                    <td>Directory</td>
                    <td>Meaning</td>
                </tr></thead><tr>
        <td>
            <code class="filename">src/main/java</code>
        </td>
        <td>Production Java source</td>
    </tr><tr>
        <td>
            <code class="filename">src/main/resources</code>
        </td>
        <td>Production resources</td>
    </tr><tr>
                <td>
                    <code class="filename">src/main/groovy</code>
                </td>
                <td>Production Groovy source. May also contain Java source for joint compilation.</td>
            </tr><tr>
        <td>
            <code class="filename">src/test/java</code>
        </td>
        <td>Test Java source</td>
    </tr><tr>
        <td>
            <code class="filename">src/test/resources</code>
        </td>
        <td>Test resources</td>
    </tr><tr>
                <td>
                    <code class="filename">src/test/groovy</code>
                </td>
                <td>Test Groovy source. May also contain Java source for joint compilation.</td>
            </tr><tr>
        <td>
            <code class="filename">src/<em class="replaceable"><code>sourceSet</code></em>/java</code>
        </td>
        <td>Java source for the given source set</td>
    </tr><tr>
        <td>
            <code class="filename">src/<em class="replaceable"><code>sourceSet</code></em>/resources</code>
        </td>
        <td>Resources for the given source set</td>
    </tr><tr>
                <td>
                    <code class="filename">src/<em class="replaceable"><code>sourceSet</code></em>/groovy</code>
                </td>
                <td>Groovy source for the given source set. May also contain Java source for joint compilation.</td>
            </tr></table></div></div><div class="section" title="19.2.1.&nbsp;Changing the project layout"><div class="titlepage"><div><div><h3 class="title"><a name="N120E1"></a>19.2.1.&nbsp;Changing the project layout</h3></div></div></div><p>TBD</p><div class="example"><a name="customGroovySourceLayout"></a><p class="title"><b>Example&nbsp;19.1.&nbsp;Custom Groovy source layout</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">sourceSets {
    main {
        groovy {
            srcDir <span class="hl-string">'src/groovy'</span>
        }
    }
}</pre></div></div><br class="example-break"></div></div><div class="section" title="19.3.&nbsp;Dependency management"><div class="titlepage"><div><div><h2 class="title"><a name="N120F2"></a>19.3.&nbsp;Dependency management</h2></div></div></div><p>The Groovy plugin adds a dependency configuration called <code class="literal">groovy</code>.</p><p>Gradle is written in Groovy and allows you to write your build scripts in Groovy. But this is an internal
            aspect of Gradle which is strictly separated from building Groovy projects. You are free to choose the Groovy
            version your project should be build with. This Groovy version is not just used for compiling your code and
            running your tests. The <code class="literal">groovyc</code> compiler and the the <code class="literal">groovydoc</code>
            tool are also taken from the Groovy version you provide. As usual, with freedom comes responsibility ;). You are
            not just free to choose a Groovy version, you have to provide one. Gradle expects that the groovy libraries are
            assigned to the <code class="literal">groovy</code> dependency configuration. Here is an example using the public Maven
            repository:
        </p><div class="example"><a name="quickstartGroovyDependency"></a><p class="title"><b>Example&nbsp;19.2.&nbsp;Configuration of Groovy plugin</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">repositories {
    mavenCentral()
}

dependencies {
    groovy group: <span class="hl-string">'org.codehaus.groovy'</span>, name: <span class="hl-string">'groovy'</span>, version: <span class="hl-string">'1.6.0'</span>
}</pre></div></div><br class="example-break"><p>And here is an example using the Groovy JARs checked into the <code class="filename">lib</code> directory of the source
            tree:</p><div class="example"><a name="flatDirGroovyDependency"></a><p class="title"><b>Example&nbsp;19.3.&nbsp;Configuration of Groovy plugin</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">repositories {
    flatDir(dirs: file(<span class="hl-string">'lib'</span>))
}

dependencies {
    groovy module(<span class="hl-string">':groovy:1.6.0'</span>) {
        dependency(<span class="hl-string">'asm:asm-all:2.2.3'</span>)
        dependency(<span class="hl-string">'antlr:antlr:2.7.7'</span>)
        dependency(<span class="hl-string">'commons-cli:commons-cli:1.2'</span>)
        module(<span class="hl-string">':ant:1.7.0'</span>) {
            dependencies(<span class="hl-string">':ant-junit:1.7.0:jar'</span>, <span class="hl-string">':ant-launcher:1.7.0'</span>)
        }
    }
}</pre></div></div><br class="example-break"></div><div class="section" title="19.4.&nbsp;Convention properties"><div class="titlepage"><div><div><h2 class="title"><a name="N12122"></a>19.4.&nbsp;Convention properties</h2></div></div></div><p>The Groovy plugin does not add any convention properties to the project.</p></div><div class="section" title="19.5.&nbsp;Source set properties"><div class="titlepage"><div><div><h2 class="title"><a name="N12127"></a>19.5.&nbsp;Source set properties</h2></div></div></div><p>The Groovy plugin adds the following convention properties to each source set in the project. You can
            use these properties in your build script as though they were properties of the source set object (see
            <a class="xref" href="#sub:more_about_convention_objects" title="17.2.&nbsp;Using the convention object">Section&nbsp;17.2, &ldquo;Using the convention object&rdquo;</a>).</p><div class="table"><p class="title"><b>Table&nbsp;19.4.&nbsp;Groovy plugin - source set properties</b></p><div class="table-contents"><table id="N1212F"><thead><tr>
                    <td>Property name</td>
                    <td>Type</td>
                    <td>Default value</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">groovy</code>
                </td>
                <td>
                    <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/file/SourceDirectorySet.html" target="_top">
              <code class="classname">SourceDirectorySet</code>
            </a> (read-only)
                </td>
                <td>
                    Not null
                </td>
                <td>
                    The Groovy source files of this source set. Contains all <code class="filename">.groovy</code> and
                    <code class="filename">.java</code> files found in the Groovy source directories, and excludes all other
                    types of files.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">groovy.srcDirs</code>
                </td>
                <td>
                    <code class="classname">Set&lt;File&gt;</code>. Can set using anything described in <a class="xref" href="#sec:specifying_multiple_files" title="14.4.&nbsp;Specifying a set of files">Section&nbsp;14.4, &ldquo;Specifying a set of files&rdquo;</a>.
                </td>
                <td>
                    <code class="literal">[<em class="replaceable"><code>projectDir</code></em>/src/<em class="replaceable"><code>name</code></em>/groovy]</code>
                </td>
                <td>
                    The source directories containing the Groovy source files of this source set. May also contain
                    Java source files for joint compilation.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">allGroovy</code>
                </td>
                <td>
                    <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/file/FileTree.html" target="_top">
              <code class="classname">FileTree</code>
            </a> (read-only)
                </td>
                <td>
                    Not null
                </td>
                <td>
                    All Groovy source files of this source set. Contains only the <code class="filename">.groovy</code> files
                    found in the Groovy source directories.
                </td>
            </tr></table></div></div><p>These properties are provided by a convention object of type <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/GroovySourceSet.html" target="_top">
          <code class="classname">GroovySourceSet</code>
        </a>.</p><p>The Groovy plugin also modifies some source set properties:</p><div class="table"><p class="title"><b>Table&nbsp;19.5.&nbsp;Groovy plugin - source set properties</b></p><div class="table-contents"><table id="N121A5"><thead><tr>
                    <td>Property name</td>
                    <td>Change</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">allJava</code>
                </td>
                <td>Adds all <code class="filename">.java</code> files found in the Groovy source directories.</td>
            </tr><tr>
                <td>
                    <code class="literal">allSource</code>
                </td>
                <td>Adds all source files found in the Groovy source directories.</td>
            </tr></table></div></div></div><div class="section" title="19.6.&nbsp;CompileGroovy"><div class="titlepage"><div><div><h2 class="title"><a name="sec:groovyCompile"></a>19.6.&nbsp;CompileGroovy</h2></div></div></div><p>The Groovy plugin adds a <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/compile/GroovyCompile.html" target="_top">
          <code class="classname">GroovyCompile</code>
        </a> instance for
            each source set in the project. The task type extends the <code class="literal">Compile</code>
            task (see <a class="xref" href="#sec:compile" title="18.10.&nbsp;CompileJava">Section&nbsp;18.10, &ldquo;CompileJava&rdquo;</a>). The compile task delegates to the Ant Groovyc task to do the
            compile. Via the compile task you can set most of the properties of Ants Groovyc task.
        </p><div class="table"><p class="title"><b>Table&nbsp;19.6.&nbsp;Groovy plugin - CompileGroovy properties</b></p><div class="table-contents"><table id="N121DD"><thead><tr>
                    <td>Task Property</td>
                    <td>Type</td>
                    <td>Default Value</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">classpath</code>
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/file/FileCollection.html" target="_top">
              <code class="classname">FileCollection</code>
            </a>
          </td>
                <td>
            <code class="literal">
              <em class="replaceable"><code>sourceSet</code></em>.compileClasspath</code>
          </td>
            </tr><tr>
                <td>
                    <code class="literal">source</code>
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/file/FileTree.html" target="_top">
              <code class="classname">FileTree</code>
            </a>. Can set using anything described in <a class="xref" href="#sec:specifying_multiple_files" title="14.4.&nbsp;Specifying a set of files">Section&nbsp;14.4, &ldquo;Specifying a set of files&rdquo;</a>.</td>
                <td>
            <code class="literal">
              <em class="replaceable"><code>sourceSet</code></em>.groovy</code>
          </td>
            </tr><tr>
                <td>
                    <code class="literal">destinationDir</code>
                </td>
                <td>
            <code class="classname">File</code>.</td>
                <td>
            <code class="literal">
              <em class="replaceable"><code>sourceSet</code></em>.classesDir</code>
          </td>
            </tr><tr>
                <td>
                    <code class="literal">groovyClasspath</code>
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/file/FileCollection.html" target="_top">
              <code class="classname">FileCollection</code>
            </a>
          </td>
                <td>
            <code class="literal">groovy</code> configuration</td>
            </tr></table></div></div></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N11F8F" name="ftn.N11F8F" class="para">16</a>] </sup>We don't recommend this, as the Groovy plugin uses the <span class="emphasis"><em>Groovyc</em></span>
                Ant task to compile the sources. For pure Java projects you might rather stick with
                <code class="literal">javac</code>. In particular as you would have to supply a groovy jar for doing this.
            </p></div><div class="footnote"><p><sup>[<a href="#N12058" name="ftn.N12058" class="para">17</a>] </sup>We are using the same conventions as introduced by Russel Winders Gant tool (<a class="ulink" href="http://gant.codehaus.org" target="_top">http://gant.codehaus.org</a>).
                </p></div></div></div><div class="chapter" title="Chapter&nbsp;20.&nbsp;The Scala Plugin"><div class="titlepage"><div><div><h1><a name="scala_plugin"></a>Chapter&nbsp;20.&nbsp;The Scala Plugin</h1></div></div></div><p>The Scala Plugin extends the Java Plugin to add support for Scala projects. It can deal with Scala-only
        projects and with mixed Java/Scala projects. It can even deal with Java-only projects.
        The Scala plugin supports joint compilation of Java and Scala source. This means your project can contain
        Scala classes which use Java classes, and vice versa.
    </p><div class="section" title="20.1.&nbsp;Tasks"><div class="titlepage"><div><div><h2 class="title"><a name="N1225C"></a>20.1.&nbsp;Tasks</h2></div></div></div><p>The Scala plugin adds the following tasks to the project.</p><div class="table"><p class="title"><b>Table&nbsp;20.1.&nbsp;Scala plugin - tasks</b></p><div class="table-contents"><table id="N12261"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
            <code class="literal">compileScala</code>
          </td>
                <td>
            <code class="literal">compileJava</code>
          </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/scala/ScalaCompile.html" target="_top">
              <code class="classname">ScalaCompile</code>
            </a>
          </td>
                <td>Compiles production Scala source files using scalac.</td>
            </tr><tr>
                <td>
            <code class="literal">compileTestScala</code>
          </td>
                <td>
            <code class="literal">compileTestJava</code>
          </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/scala/ScalaCompile.html" target="_top">
              <code class="classname">ScalaCompile</code>
            </a>
          </td>
                <td>Compiles test Scala source files using scalac.</td>
            </tr><tr>
                <td>
            <code class="literal">compile<em class="replaceable"><code>SourceSet</code></em>Scala</code>
          </td>
                <td>
            <code class="literal">compile<em class="replaceable"><code>SourceSet</code></em>Java</code>
          </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/scala/ScalaCompile.html" target="_top">
              <code class="classname">ScalaCompile</code>
            </a>
          </td>
                <td>Compiles the given source set's Scala source files using scalac.</td>
            </tr><tr>
                <td>
            <code class="literal">scaladoc</code>
          </td>
                <td>-</td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/scala/ScalaDoc.html" target="_top">
              <code class="classname">ScalaDoc</code>
            </a>
          </td>
                <td>Generates API documentation for the production Scala source files using scaladoc.</td>
            </tr></table></div></div><p>The Scala plugin adds the following dependencies to tasks added by the Java plugin.</p><div class="table"><p class="title"><b>Table&nbsp;20.2.&nbsp;Scala plugin - additional task dependencies</b></p><div class="table-contents"><table id="N122E4"><thead><td>Task name</td><td>Depends on</td></thead><tr>
                <td>
                    <code class="literal">classes</code>
                </td>
                <td>
                    <code class="literal">compileScala</code>
                </td>
            </tr><tr>
                <td>
                    <code class="literal">testClasses</code>
                </td>
                <td>
                    <code class="literal">compileTestScala</code>
                </td>
            </tr><tr>
                <td>
                    <code class="literal">
              <em class="replaceable"><code>sourceSet</code></em>Classes</code>
                </td>
                <td>
                    <code class="literal">compile<em class="replaceable"><code>SourceSet</code></em>Scala</code>
                </td>
            </tr></table></div></div><div class="figure"><a name="N1231C"></a><p class="title"><b>Figure&nbsp;20.1.&nbsp;Scala plugin - tasks</b></p><div class="figure-contents"><img src="images/scalaPluginTasks.png" alt="Scala plugin - tasks"></div></div><br class="figure-break"></div><div class="section" title="20.2.&nbsp;Project layout"><div class="titlepage"><div><div><h2 class="title"><a name="N12322"></a>20.2.&nbsp;Project layout</h2></div></div></div><p>The Scala plugin assumes the project layout shown below.  All the Scala source directories can contain
            Scala <span class="emphasis"><em>and</em></span> Java code. The Java source directories may only contain Java source code.
            None of these directories need exist or have anything in them. The Scala plugin will compile whatever it
            finds, and handles anything which is missing.</p><div class="table"><p class="title"><b>Table&nbsp;20.3.&nbsp;Scala plugin - project layout</b></p><div class="table-contents"><table id="scalalayout"><thead><tr>
                    <td>Directory</td>
                    <td>Meaning</td>
                </tr></thead><tr>
        <td>
            <code class="filename">src/main/java</code>
        </td>
        <td>Production Java source</td>
    </tr><tr>
        <td>
            <code class="filename">src/main/resources</code>
        </td>
        <td>Production resources</td>
    </tr><tr>
                <td>
                    <code class="filename">src/main/scala</code>
                </td>
                <td>Production Scala source. May also contain Java source for joint compilation.</td>
            </tr><tr>
        <td>
            <code class="filename">src/test/java</code>
        </td>
        <td>Test Java source</td>
    </tr><tr>
        <td>
            <code class="filename">src/test/resources</code>
        </td>
        <td>Test resources</td>
    </tr><tr>
                <td>
                    <code class="filename">src/test/scala</code>
                </td>
                <td>Test Scala source. May also contain Java source for joint compilation.</td>
            </tr><tr>
        <td>
            <code class="filename">src/<em class="replaceable"><code>sourceSet</code></em>/java</code>
        </td>
        <td>Java source for the given source set</td>
    </tr><tr>
        <td>
            <code class="filename">src/<em class="replaceable"><code>sourceSet</code></em>/resources</code>
        </td>
        <td>Resources for the given source set</td>
    </tr><tr>
                <td>
                    <code class="filename">src/<em class="replaceable"><code>sourceSet</code></em>/scala</code>
                </td>
                <td>Scala source for the given source set. May also contain Java source for joint compilation.</td>
            </tr></table></div></div><div class="section" title="20.2.1.&nbsp;Changing the project layout"><div class="titlepage"><div><div><h3 class="title"><a name="N123AC"></a>20.2.1.&nbsp;Changing the project layout</h3></div></div></div><p>TBD</p><div class="example"><a name="customScalaSourceLayout"></a><p class="title"><b>Example&nbsp;20.1.&nbsp;Custom Scala source layout</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">sourceSets {
    main {
        scala {
            srcDir <span class="hl-string">'src/scala'</span>
        }
    }
}</pre></div></div><br class="example-break"></div></div><div class="section" title="20.3.&nbsp;Dependency Management"><div class="titlepage"><div><div><h2 class="title"><a name="N123BD"></a>20.3.&nbsp;Dependency Management</h2></div></div></div><p>The Scala plugin adds a <code class="literal">scalaTools</code> configuration, which it uses to locate the Scala
            tools, such as scalac, to use. You must specify the version of Scala to use. Below is an example.
        </p><div class="example"><a name="declareScalaTools"></a><p class="title"><b>Example&nbsp;20.2.&nbsp;Declaring the Scala version to use</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">usePlugin <span class="hl-string">'scala'</span>

repositories {
    mavenRepo urls: <span class="hl-string">'http://scala-tools.org/repo-releases/'</span>
}

dependencies {
    <span class="hl-comment">// Libraries needed to run the scala tools</span>
    scalaTools <span class="hl-string">'org.scala-lang:scala-compiler:2.7.6'</span>
    scalaTools <span class="hl-string">'org.scala-lang:scala-library:2.7.6'</span>

    <span class="hl-comment">// Libraries needed for scala api</span>
    compile <span class="hl-string">'org.scala-lang:scala-library:2.7.6'</span>
}</pre></div></div><br class="example-break"></div><div class="section" title="20.4.&nbsp;Convention Properties"><div class="titlepage"><div><div><h2 class="title"><a name="N123D1"></a>20.4.&nbsp;Convention Properties</h2></div></div></div><p>The Scala plugin does not add any convention properties to the project.</p></div><div class="section" title="20.5.&nbsp;Source set properties"><div class="titlepage"><div><div><h2 class="title"><a name="N123D6"></a>20.5.&nbsp;Source set properties</h2></div></div></div><p>The Scala plugin adds the following convention properties to each source set in the project. You can
            use these properties in your build script as though they were properties of the source set object (see
            <a class="xref" href="#sub:more_about_convention_objects" title="17.2.&nbsp;Using the convention object">Section&nbsp;17.2, &ldquo;Using the convention object&rdquo;</a>).</p><div class="table"><p class="title"><b>Table&nbsp;20.4.&nbsp;Scala plugin - source set properties</b></p><div class="table-contents"><table id="N123DE"><thead><tr>
                    <td>Property name</td>
                    <td>Type</td>
                    <td>Default value</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">scala</code>
                </td>
                <td>
                    <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/file/SourceDirectorySet.html" target="_top">
              <code class="classname">SourceDirectorySet</code>
            </a> (read-only)
                </td>
                <td>
                    Not null
                </td>
                <td>
                    The Scala source files of this source set. Contains all <code class="filename">.scala</code> and
                    <code class="filename">.java</code> files found in the Scala source directories, and excludes all other
                    types of files.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">scala.srcDirs</code>
                </td>
                <td>
                    <code class="classname">Set&lt;File&gt;</code>. Can set using anything described in <a class="xref" href="#sec:specifying_multiple_files" title="14.4.&nbsp;Specifying a set of files">Section&nbsp;14.4, &ldquo;Specifying a set of files&rdquo;</a>.
                </td>
                <td>
                    <code class="literal">[<em class="replaceable"><code>projectDir</code></em>/src/<em class="replaceable"><code>name</code></em>/scala]</code>
                </td>
                <td>
                    The source directories containing the Scala source files of this source set. May also contain
                    Java source files for joint compilation.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">allScala</code>
                </td>
                <td>
                    <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/file/FileTree.html" target="_top">
              <code class="classname">FileTree</code>
            </a> (read-only)
                </td>
                <td>
                    Not null
                </td>
                <td>
                    All Scala source files of this source set. Contains only the <code class="filename">.scala</code> files
                    found in the Scala source directories.
                </td>
            </tr></table></div></div><p>These convention properties are provided by a convention object of type <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/ScalaSourceSet.html" target="_top">
          <code class="classname">ScalaSourceSet</code>
        </a>.</p><p>The Scala plugin also modifies some source set properties:</p><div class="table"><p class="title"><b>Table&nbsp;20.5.&nbsp;Scala plugin - source set properties</b></p><div class="table-contents"><table id="N12454"><thead><tr>
                    <td>Property name</td>
                    <td>Change</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">allJava</code>
                </td>
                <td>Adds all <code class="filename">.java</code> files found in the Scala source directories.</td>
            </tr><tr>
                <td>
                    <code class="literal">allSource</code>
                </td>
                <td>Adds all source files found in the Scala source directories.</td>
            </tr></table></div></div></div></div><div class="chapter" title="Chapter&nbsp;21.&nbsp;The War Plugin"><div class="titlepage"><div><div><h1><a name="war_plugin"></a>Chapter&nbsp;21.&nbsp;The War Plugin</h1></div></div></div><p>The War plugin extends the Java Plugin to add support for assembling web application WAR files.
        It disables the default JAR archive generation of the Java Plugin and adds a default WAR archive task.
    </p><div class="section" title="21.1.&nbsp;Tasks"><div class="titlepage"><div><div><h2 class="title"><a name="N12481"></a>21.1.&nbsp;Tasks</h2></div></div></div><p>The War plugin adds the following tasks to the project.</p><div class="table"><p class="title"><b>Table&nbsp;21.1.&nbsp;War plugin - tasks</b></p><div class="table-contents"><table id="N12486"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">war</code>
                </td>
                <td>
                    <code class="literal">compile</code>
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/groovydoc/org/gradle/api/tasks/bundling/War.html" target="_top">
              <code class="classname">War</code>
            </a>
          </td>
                <td>Assembles the application WAR file.</td>
            </tr></table></div></div><p>The War plugin adds the following dependencies to tasks added by the Java plugin.</p><div class="table"><p class="title"><b>Table&nbsp;21.2.&nbsp;War plugin - additional task dependencies</b></p><div class="table-contents"><table id="N124B5"><thead><td>Task name</td><td>Depends on</td></thead><tr>
                <td>assemble</td>
                <td>war</td>
            </tr></table></div></div><div class="figure"><a name="N124C5"></a><p class="title"><b>Figure&nbsp;21.1.&nbsp;War plugin - tasks</b></p><div class="figure-contents"><img src="images/warPluginTasks.png" alt="War plugin - tasks"></div></div><br class="figure-break"></div><div class="section" title="21.2.&nbsp;Project layout"><div class="titlepage"><div><div><h2 class="title"><a name="N124CB"></a>21.2.&nbsp;Project layout</h2></div></div></div><div class="table"><p class="title"><b>Table&nbsp;21.3.&nbsp;War plugin - project layout</b></p><div class="table-contents"><table id="N124CE"><thead><tr>
                    <td>Directory</td>
                    <td>Meaning</td>
                </tr></thead><tr>
                <td>
                    <code class="filename">src/main/webapp</code>
                </td>
                <td>Web application sources</td>
            </tr></table></div></div></div><div class="section" title="21.3.&nbsp;Dependency management"><div class="titlepage"><div><div><h2 class="title"><a name="N124E5"></a>21.3.&nbsp;Dependency management</h2></div></div></div><p>The War plugin adds two dependency configurations: <code class="literal">providedCompile</code> and
            <code class="literal">providedRuntime</code>. Those configurations have the same scope as the respective
            <code class="literal">compile</code> and <code class="literal">runtime</code> configurations, except that they are not added to
            the WAR archive. It is important to note that those <code class="literal">provided</code> configurations work
            transitively. Let's say you add <code class="literal">commons-httpclient:commons-httpclient:3.0</code> to any of the
            provided configurations. This dependency has a dependency on <code class="literal">commons-codec</code>.
            This means neither <code class="literal">httpclient</code> nor <code class="literal">commons-codec</code> is added to your
            WAR, even if <code class="literal">commons-codec</code> were an explicit dependency of your <code class="literal">compile</code>
            configuration. If you don't want this transitive behavior, simply declare your <code class="literal">provided</code>
            dependencies like <code class="literal">commons-httpclient:commons-httpclient:3.0@jar</code>.
        </p></div><div class="section" title="21.4.&nbsp;Convention properties"><div class="titlepage"><div><div><h2 class="title"><a name="N12511"></a>21.4.&nbsp;Convention properties</h2></div></div></div><div class="table"><p class="title"><b>Table&nbsp;21.4.&nbsp;War plugin - directory properties</b></p><div class="table-contents"><table id="N12514"><thead><tr>
                    <td>Property name</td>
                    <td>Type</td>
                    <td>Default value</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">webAppDirName</code>
                </td>
                <td>
                    <code class="classname">String</code>
                </td>
                <td>
                    <code class="filename">src/main/webapp</code>
                </td>
                <td>
                    The name of the web application source directory, relative to the project directory.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">webAppDir</code>
                </td>
                <td>
                    <code class="classname">File</code> (read-only)
                </td>
                <td>
                    <code class="filename">
              <em class="replaceable"><code>projectDir</code></em>/<em class="replaceable"><code>webAppDirName</code></em>
            </code>
                </td>
                <td>
                    The web application source directory.
                </td>
            </tr></table></div></div><p>These properties are provided by a <a class="ulink" href="http://www.gradle.org/0.8/docs/groovydoc/org/gradle/api/plugins/WarPluginConvention.html" target="_top">
          <code class="classname">WarPluginConvention</code>
        </a>
            convention object.
        </p></div><div class="section" title="21.5.&nbsp;War"><div class="titlepage"><div><div><h2 class="title"><a name="sec:default_settings"></a>21.5.&nbsp;War</h2></div></div></div><p>The default behavior of the War task is to copy the content of <code class="literal">src/main/webapp</code>
            to the root of the archive. Your <code class="literal">webapp</code> folder may of course contain a
            <code class="literal">WEB-INF</code> sub-directory, which again may contain a <code class="literal">web.xml</code> file.
            Your compiled classes are compiled to <code class="literal">WEB-INF/classes</code>. All the dependencies of the
            <code class="literal">runtime</code>
            <sup>[<a href="#ftn.N1257B" name="N1257B" class="footnote">18</a>]</sup>
            configuration are copied to <code class="literal">WEB-INF/lib</code>.</p><p>Have also a look at <a class="ulink" href="http://www.gradle.org/0.8/docs/groovydoc/org/gradle/api/tasks/bundling/War.html" target="_top">
          <code class="classname">War</code>
        </a>.</p></div><div class="section" title="21.6.&nbsp;Customizing"><div class="titlepage"><div><div><h2 class="title"><a name="sec:customizing"></a>21.6.&nbsp;Customizing</h2></div></div></div><p>Here is an example with the most important customization options:
        </p><div class="example"><a name="webproject"></a><p class="title"><b>Example&nbsp;21.1.&nbsp;Customization of war plugin</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting"><span class="hl-keyword">import</span> org.apache.commons.httpclient.HttpClient
<span class="hl-keyword">import</span> org.apache.commons.httpclient.methods.GetMethod

group = <span class="hl-string">'gradle'</span>
version = <span class="hl-string">'1.0'</span>
usePlugin(<span class="hl-string">'war'</span>)
usePlugin(<span class="hl-string">'jetty'</span>)

configurations {
   moreLibs
}

repositories {
   flatDir(dirs: <span class="hl-string">"$rootDir/lib"</span>)
   mavenCentral()
}

dependencies {
    compile <span class="hl-string">":compile:1.0"</span>
    providedCompile <span class="hl-string">":providedCompile:1.0@jar"</span>, <span class="hl-string">"javax.servlet:servlet-api:2.5"</span>
    runtime <span class="hl-string">":runtime:1.0"</span>
    providedRuntime <span class="hl-string">":providedRuntime:1.0@jar"</span>
    testCompile <span class="hl-string">"junit:junit:3.8.2"</span>
    moreLibs <span class="hl-string">":otherLib:1.0"</span>
}

war {
    fileSet(dir: file(<span class="hl-string">'src/rootContent'</span>)) <span class="hl-comment">// adds a file-set to the root of the archive</span>
    webInf(dir: file(<span class="hl-string">'src/additionalWebInf'</span>)) <span class="hl-comment">// adds a file-set to the WEB-INF dir.</span>
    additionalLibs(dir: file(<span class="hl-string">'additionalLibs'</span>)) <span class="hl-comment">// adds a file-set to the WEB-INF/lib dir.</span>
    libConfigurations(<span class="hl-string">'moreLibs'</span>) <span class="hl-comment">// adds a configuration to the WEB-INF/lib dir.</span>
    webXml = file(<span class="hl-string">'src/someWeb.xml'</span>) <span class="hl-comment">// copies a file to WEB-INF/web.xml</span>
}

jar.enabled = true

[jettyRun, jettyRunWar]*.daemon = true
stopKey = <span class="hl-string">'foo'</span>
stopPort = <span class="hl-number">9451</span>
httpPort = <span class="hl-number">8163</span>

task runTest(dependsOn: jettyRun) &lt;&lt; {
    callServlet()
}

task runWarTest(dependsOn: jettyRunWar) &lt;&lt; {
    callServlet()
}

<span class="hl-keyword">private</span> <span class="hl-keyword">void</span> callServlet() {
    HttpClient client = <span class="hl-keyword">new</span> HttpClient()
    GetMethod method = <span class="hl-keyword">new</span> GetMethod(<span class="hl-string">"http://localhost:$httpPort/customised/hello"</span>)
    client.executeMethod(method)
    <span class="hl-keyword">new</span> File(buildDir, <span class="hl-string">"servlet-out.txt"</span>).write(method.getResponseBodyAsString())
    jettyStop.execute()
}</pre></div></div><br class="example-break"><p>Of course one can configure the different file-sets with a closure to define excludes and includes.
        </p><p>If you want to enable the generation of the default jar archive additional to the war archive just type:
        </p><div class="example"><a name="customisedWebApplication"></a><p class="title"><b>Example&nbsp;21.2.&nbsp;Generation of JAR archive in addition to WAR archive</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">jar.enabled = true</pre></div></div><br class="example-break"></div><div class="section" title="21.7.&nbsp;Eclipse WTP"><div class="titlepage"><div><div><h2 class="title"><a name="sec:eclipse_wtp"></a>21.7.&nbsp;Eclipse WTP</h2></div></div></div><p>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/ide/eclipse/EclipseWtp.html" target="_top">
          <code class="classname">EclipseWtp</code>
        </a>
            has a default instance with the name <code class="literal">eclipseWtp</code>. It generates a
            <code class="filename">.settings/org.eclipse.wst.common.component</code> file.
        </p></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N1257B" name="ftn.N1257B" class="para">18</a>] </sup>The
                    <code class="literal">runtime</code>
                    configuration extends the
                    <code class="literal">compile</code>
                    configuration.
                </p></div></div></div><div class="chapter" title="Chapter&nbsp;22.&nbsp;The Jetty Plugin"><div class="titlepage"><div><div><h1><a name="jetty_plugin"></a>Chapter&nbsp;22.&nbsp;The Jetty Plugin</h1></div></div></div><p>The Jetty Plugin extends the War Plugin to add tasks which allow you to deploy your web application to a
        Jetty web container embedded in the build.
    </p><div class="section" title="22.1.&nbsp;Tasks"><div class="titlepage"><div><div><h2 class="title"><a name="N125CE"></a>22.1.&nbsp;Tasks</h2></div></div></div><p>The Jetty plugin defines the following tasks:</p><div class="table"><p class="title"><b>Table&nbsp;22.1.&nbsp;Jetty plugin - tasks</b></p><div class="table-contents"><table id="N125D3"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">jettyRun</code>
                </td>
                <td>
                    <code class="literal">compile</code>
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/plugins/jetty/JettyRun.html" target="_top">
              <code class="classname">JettyRun</code>
            </a>
          </td>
                <td>Starts a Jetty instance and deploys the exploded web application to it.</td>
            </tr><tr>
                <td>
                    <code class="literal">jettyRunWar</code>
                </td>
                <td>
                    <code class="literal">war</code>
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/plugins/jetty/JettyRunWar.html" target="_top">
              <code class="classname">JettyRunWar</code>
            </a>
          </td>
                <td>Starts a Jetty instance and deploys the WAR to it.</td>
            </tr><tr>
                <td>
                    <code class="literal">jettyStop</code>
                </td>
                <td>-</td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/plugins/jetty/JettyStop.html" target="_top">
              <code class="classname">JettyStop</code>
            </a>
          </td>
                <td>Stops the Jetty instance.</td>
            </tr></table></div></div><div class="figure"><a name="N12633"></a><p class="title"><b>Figure&nbsp;22.1.&nbsp;Jetty plugin - tasks</b></p><div class="figure-contents"><img src="images/jettyPluginTasks.png" alt="Jetty plugin - tasks"></div></div><br class="figure-break"></div><div class="section" title="22.2.&nbsp;Project layout"><div class="titlepage"><div><div><h2 class="title"><a name="N12639"></a>22.2.&nbsp;Project layout</h2></div></div></div><p>The Jetty plugin uses the same layout as the War plugin.</p></div><div class="section" title="22.3.&nbsp;Dependency management"><div class="titlepage"><div><div><h2 class="title"><a name="N1263E"></a>22.3.&nbsp;Dependency management</h2></div></div></div><p>The Jetty plugin does not define any dependency configurations.</p></div><div class="section" title="22.4.&nbsp;Convention properties"><div class="titlepage"><div><div><h2 class="title"><a name="N12643"></a>22.4.&nbsp;Convention properties</h2></div></div></div><p>The Jetty plugin defines the following convention properties:</p><div class="table"><p class="title"><b>Table&nbsp;22.2.&nbsp;Jetty plugin - properties</b></p><div class="table-contents"><table id="N12648"><thead><tr>
                    <td>Property name</td>
                    <td>Type</td>
                    <td>Default value</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">httpPort</code>
                </td>
                <td>
                    <code class="classname">Integer</code>
                </td>
                <td>
                    <code class="literal">8080</code>
                </td>
                <td>
                    The TCP port which Jetty should listen for HTTP requests on.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">stopPort</code>
                </td>
                <td>
                    <code class="classname">Integer</code>
                </td>
                <td>
                    <code class="literal">null</code>
                </td>
                <td>
                    The TCP port which Jetty should listen for admin requests on.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">stopKey</code>
                </td>
                <td>
                    <code class="classname">String</code>
                </td>
                <td>
                    <code class="literal">null</code>
                </td>
                <td>
                    The key to pass to Jetty when requesting it to stop.
                </td>
            </tr></table></div></div><p>These properties are provided by a <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/plugins/jetty/JettyPluginConvention.html" target="_top">
          <code class="classname">JettyPluginConvention</code>
        </a>
            convention object.</p></div></div><div class="chapter" title="Chapter&nbsp;23.&nbsp;The Maven Plugin"><div class="titlepage"><div><div><h1><a name="maven_plugin"></a>Chapter&nbsp;23.&nbsp;The Maven Plugin</h1></div></div></div><div class="note" title="Note"><p>This chapter is a work in progress</p></div><div class="section" title="23.1.&nbsp;Tasks"><div class="titlepage"><div><div><h2 class="title"><a name="N126B1"></a>23.1.&nbsp;Tasks</h2></div></div></div><p>TBD</p></div><div class="section" title="23.2.&nbsp;Project layout"><div class="titlepage"><div><div><h2 class="title"><a name="N126B6"></a>23.2.&nbsp;Project layout</h2></div></div></div><p>TBD</p></div><div class="section" title="23.3.&nbsp;Dependency management"><div class="titlepage"><div><div><h2 class="title"><a name="N126BB"></a>23.3.&nbsp;Dependency management</h2></div></div></div><p>TBD</p></div><div class="section" title="23.4.&nbsp;Convention properties"><div class="titlepage"><div><div><h2 class="title"><a name="N126C0"></a>23.4.&nbsp;Convention properties</h2></div></div></div><p>TBD</p></div></div><div class="chapter" title="Chapter&nbsp;24.&nbsp;The Code Quality Plugin"><div class="titlepage"><div><div><h1><a name="code_quality_plugin"></a>Chapter&nbsp;24.&nbsp;The Code Quality Plugin</h1></div></div></div><p>The code quality plugin adds tasks which perform code quality checks and generate reports from these checks.
        The following tools are supported:
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
            <a class="ulink" href="http://checkstyle.sourceforge.net/index.html" target="_top">Checkstyle</a>
          </p></li><li class="listitem"><p>
            <a class="ulink" href="http://codenarc.sourceforge.net/index.html" target="_top">CodeNarc</a>
          </p></li></ul></div><p>
    </p><p>To use the plugin, add the following to your build script:</p><pre class="programlisting">usePlugin 'code-quality'</pre><div class="section" title="24.1.&nbsp;Tasks"><div class="titlepage"><div><div><h2 class="title"><a name="N126E1"></a>24.1.&nbsp;Tasks</h2></div></div></div><p>When used with the Java plugin, the code quality plugin adds the following tasks to the project:</p><div class="table"><p class="title"><b>Table&nbsp;24.1.&nbsp;Code quality plugin - Java tasks</b></p><div class="table-contents"><table id="N126E6"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">checkstyleMain</code>
                </td>
                <td>-</td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/plugins/quality/Checkstyle.html" target="_top">
              <code class="classname">Checkstyle</code>
            </a>
          </td>
                <td>Runs Checkstyle against the production Java source files.</td>
            </tr><tr>
                <td>
                    <code class="literal">checkstyleTest</code>
                </td>
                <td>
            <code class="literal">compile</code>
          </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/plugins/quality/Checkstyle.html" target="_top">
              <code class="classname">Checkstyle</code>
            </a>
          </td>
                <td>Runs Checkstyle against the test Java source files.</td>
            </tr><tr>
                <td>
                    <code class="literal">checkstyle<em class="replaceable"><code>SourceSet</code></em>
            </code>
                </td>
                <td>-</td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/plugins/quality/Checkstyle.html" target="_top">
              <code class="classname">Checkstyle</code>
            </a>
          </td>
                <td>Runs Checkstyle against the given source set's Java source files.</td>
            </tr></table></div></div><p>When used with the Groovy plugin, the code quality plugin adds the following tasks to the project:</p><div class="table"><p class="title"><b>Table&nbsp;24.2.&nbsp;Code quality plugin - tasks</b></p><div class="table-contents"><table id="N12748"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>codenarcMain</td>
                <td>-</td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/plugins/quality/CodeNarc.html" target="_top">
              <code class="classname">CodeNarc</code>
            </a>
          </td>
                <td>Runs CodeNarc against the production Groovy source files.</td>
            </tr><tr>
                <td>codenarcTest</td>
                <td>-</td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/plugins/quality/CodeNarc.html" target="_top">
              <code class="classname">CodeNarc</code>
            </a>
          </td>
                <td>Runs CodeNarc against the test Groovy source files.</td>
            </tr><tr>
                <td>codenarc<em class="replaceable"><code>SourceSet</code></em>
          </td>
                <td>-</td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/plugins/quality/CodeNarc.html" target="_top">
              <code class="classname">CodeNarc</code>
            </a>
          </td>
                <td>Runs CodeNarc against the given source set's Groovy source files.</td>
            </tr></table></div></div><p>The Code quality plugin adds the following dependencies to tasks added by the Java plugin.</p><div class="table"><p class="title"><b>Table&nbsp;24.3.&nbsp;Code quality plugin - additional task dependencies</b></p><div class="table-contents"><table id="N1279E"><thead><td>Task name</td><td>Depends on</td></thead><tr>
                <td>check</td>
                <td>All Checkstyle and CodeNarc tasks, including <code class="literal">checkstyleMain</code>,
                    <code class="literal">checkstyleTest</code>,
                    <code class="literal">codenarcMain</code> and
                    <code class="literal">codenarcTest</code>
                </td>
            </tr></table></div></div><div class="figure"><a name="N127BA"></a><p class="title"><b>Figure&nbsp;24.1.&nbsp;Code quality plugin - tasks</b></p><div class="figure-contents"><img src="images/codeQualityPluginTasks.png" alt="Code quality plugin - tasks"></div></div><br class="figure-break"></div><div class="section" title="24.2.&nbsp;Project layout"><div class="titlepage"><div><div><h2 class="title"><a name="N127C0"></a>24.2.&nbsp;Project layout</h2></div></div></div><p>The code quality plugin expects the following project layout:</p><div class="table"><p class="title"><b>Table&nbsp;24.4.&nbsp;Code quality plugin - project layout</b></p><div class="table-contents"><table id="N127C5"><thead><tr>
                    <td>File</td>
                    <td>Meaning</td>
                </tr></thead><tr>
                <td>
                    <code class="filename">config/checkstyle/checkstyle.xml</code>
                </td>
                <td>Checkstyle configuration file</td>
            </tr><tr>
                <td>
                    <code class="filename">config/codenarc/codenarc.xml</code>
                </td>
                <td>CodeNarc configuration file</td>
            </tr></table></div></div></div><div class="section" title="24.3.&nbsp;Dependency management"><div class="titlepage"><div><div><h2 class="title"><a name="N127E7"></a>24.3.&nbsp;Dependency management</h2></div></div></div><p>The code quality plugin does not add any dependency configurations.</p></div><div class="section" title="24.4.&nbsp;Convention properties"><div class="titlepage"><div><div><h2 class="title"><a name="N127EC"></a>24.4.&nbsp;Convention properties</h2></div></div></div><p>When used with the Java plugin, the code quality plugin adds the following convention properties to the project:</p><div class="table"><p class="title"><b>Table&nbsp;24.5.&nbsp;Code quality plugin - convention properties</b></p><div class="table-contents"><table id="N127F1"><thead><tr>
                    <td>Property name</td>
                    <td>Type</td>
                    <td>Default value</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">checkstyleConfigFileName</code>
                </td>
                <td>
                    <code class="classname">String</code>
                </td>
                <td>
                    <code class="literal">config/checkstyle/checkstyle.xml</code>
                </td>
                <td>
                    The location of the Checkstyle configuration file, relative to the project directory.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">checkstyleConfigFile</code>
                </td>
                <td>
                    <code class="classname">File</code> (read-only)
                </td>
                <td>
                    <code class="literal">
              <em class="replaceable"><code>projectDir</code></em>/<em class="replaceable"><code>checkstyleConfigFileName</code></em>
            </code>
                </td>
                <td>
                    The Checkstyle configuration file.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">checkstyleResultsDirName</code>
                </td>
                <td>
                    <code class="classname">String</code>
                </td>
                <td>
                    <code class="literal">checkstyle</code>
                </td>
                <td>
                    The name of the directory to generate Checkstyle results into, relative to the build directory.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">checkstyleResultsDir</code>
                </td>
                <td>
                    <code class="classname">File</code> (read-only)
                </td>
                <td>
                    <code class="literal">
              <em class="replaceable"><code>buildDir</code></em>/<em class="replaceable"><code>checkstyleResultsDirName</code></em>
            </code>
                </td>
                <td>
                    The directory to generate Checkstyle results into.
                </td>
            </tr></table></div></div><p>These convention properties are provided by a convention object of type
            <a class="ulink" href="http://www.gradle.org/0.8/docs/groovydoc/org/gradle/api/plugins/quality/JavaCodeQualityPluginConvention.html" target="_top">
          <code class="classname">JavaCodeQualityPluginConvention</code>
        </a>.</p><p>When used with the Groovy plugin, the code quality plugin adds the following convention properties to the project:</p><div class="table"><p class="title"><b>Table&nbsp;24.6.&nbsp;Code quality plugin - convention properties</b></p><div class="table-contents"><table id="N12876"><thead><tr>
                    <td>Property name</td>
                    <td>Type</td>
                    <td>Default value</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">codeNarcConfigFileName</code>
                </td>
                <td>
                    <code class="classname">String</code>
                </td>
                <td>
                    <code class="literal">config/codenarc/codenarc.xml</code>
                </td>
                <td>
                    The location of the CodeNarc configuration file, relative to the project directory.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">codeNarcConfigFile</code>
                </td>
                <td>
                    <code class="classname">File</code> (read-only)
                </td>
                <td>
                    <code class="literal">
              <em class="replaceable"><code>projectDir</code></em>/<em class="replaceable"><code>codeNarcConfigFileName</code></em>
            </code>
                </td>
                <td>
                    The CodeNarc configuration file.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">codeNarcReportsDirName</code>
                </td>
                <td>
                    <code class="classname">String</code>
                </td>
                <td>
                    <code class="literal">codenarc</code>
                </td>
                <td>
                    The name of the directory to generate CodeNarc reports into, relative to the reports directory.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">codeNarcReportsDir</code>
                </td>
                <td>
                    <code class="classname">File</code> (read-only)
                </td>
                <td>
                    <code class="literal">
              <em class="replaceable"><code>reportsDir</code></em>/<em class="replaceable"><code>codeNarcReportsDirName</code></em>
            </code>
                </td>
                <td>
                    The directory to generate CodeNarc reports into.
                </td>
            </tr></table></div></div><p>These convention properties are provided by a convention object of type
            <a class="ulink" href="http://www.gradle.org/0.8/docs/groovydoc/org/gradle/api/plugins/quality/GroovyCodeQualityPluginConvention.html" target="_top">
          <code class="classname">GroovyCodeQualityPluginConvention</code>
        </a>.</p></div></div><div class="chapter" title="Chapter&nbsp;25.&nbsp;The OSGi Plugin"><div class="titlepage"><div><div><h1><a name="osgi_plugin"></a>Chapter&nbsp;25.&nbsp;The OSGi Plugin</h1></div></div></div><p>The Gradle OSGi plugin enables the generation of an OSGi manifest. This OSGi manifest is automatically added
        to all the JAR files produced by the project.
        This plugin makes heavy use of Peter Kriens <a class="ulink" href="http://www.aqute.biz/Code/Bnd" target="_top">BND tool</a>.
    </p><div class="section" title="25.1.&nbsp;Tasks"><div class="titlepage"><div><div><h2 class="title"><a name="N12905"></a>25.1.&nbsp;Tasks</h2></div></div></div><p>TBD</p></div><div class="section" title="25.2.&nbsp;Project layout"><div class="titlepage"><div><div><h2 class="title"><a name="N1290A"></a>25.2.&nbsp;Project layout</h2></div></div></div><p>TBD</p></div><div class="section" title="25.3.&nbsp;Dependency management"><div class="titlepage"><div><div><h2 class="title"><a name="N1290F"></a>25.3.&nbsp;Dependency management</h2></div></div></div><p>TBD</p></div><div class="section" title="25.4.&nbsp;Convention properties"><div class="titlepage"><div><div><h2 class="title"><a name="N12914"></a>25.4.&nbsp;Convention properties</h2></div></div></div><p>The OSGi plugin adds an <code class="literal">osgi</code> property to every <span class="emphasis"><em>jar</em></span> task.
            This <code class="literal">osgi</code> property points to an instance of
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/plugins/osgi/OsgiManifest.html" target="_top">
          <code class="classname">OsgiManifest</code>
        </a>. Via the OsgiManifest object you can control the
            generation of the OSGi Manifest of the respective jar. The OSGi plugin assign default values to the
            OsgiManifest object.
        </p><div class="table"><p class="title"><b>Table&nbsp;25.1.&nbsp;OSGi properties</b></p><div class="table-contents"><table id="N12929"><thead><tr>
                    <td>Task Property</td>
                    <td>Convention Property</td>
                </tr></thead><tr>
                <td>classesDir</td>
                <td>project.classesDir</td>
            </tr><tr>
                <td>version</td>
                <td>project.version</td>
            </tr><tr>
                <td>name</td>
                <td>project.archivesBaseName</td>
            </tr><tr>
                <td>symbolicName</td>
                <td>transformation of the name and the group to produce a valid OSGi symbolic name</td>
            </tr><tr>
                <td>classpath</td>
                <td>project.dependencies.resolve('runtime')</td>
            </tr></table></div></div><p>The classes in the classes dir are analyzed regarding there package dependencies and the packages they expose.
            Based on this the <span class="emphasis"><em>Import-Package</em></span> and the <span class="emphasis"><em>Export-Package</em></span> values of the
            OSGi Manifest are calculated. If the classpath contains jars with an OSGi bundle, the bundle
            information is used to specify version information for the <span class="emphasis"><em>Import-Package</em></span>
            value. Beside the explicit properties of the <code class="literal">OsgiManifest</code> object you can add instructions.
        </p><div class="example"><a name="osgi"></a><p class="title"><b>Example&nbsp;25.1.&nbsp;Configuration of OSGi MANIFEST.MF file</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">configure(jar.osgi) {
    name = <span class="hl-string">'overwrittenSpecialOsgiName'</span>
    instruction <span class="hl-string">'Private-Package'</span>,
            <span class="hl-string">'org.mycomp.package1'</span>,
            <span class="hl-string">'org.mycomp.package2'</span>
    instruction <span class="hl-string">'Bundle-Vendor'</span>, <span class="hl-string">'MyCompany'</span>
    instruction <span class="hl-string">'Bundle-Description'</span>, <span class="hl-string">'Platform2: Metrics 2 Measures Framework'</span>
    instruction <span class="hl-string">'Bundle-DocURL'</span>, <span class="hl-string">'http://www.mycompany.com'</span>
}</pre></div></div><br class="example-break"><p>The first argument of the instruction call is the key of the property. The other arguments form the value.
            They are joined by Gradle with the <code class="literal">,</code> separator. To learn more about the available
            instructions have a look at the <a class="ulink" href="http://www.aqute.biz/Code/Bnd" target="_top">BND tool</a>.</p></div></div><div class="chapter" title="Chapter&nbsp;26.&nbsp;The Eclipse Plugin"><div class="titlepage"><div><div><h1><a name="eclipse_plugin"></a>Chapter&nbsp;26.&nbsp;The Eclipse Plugin</h1></div></div></div><div class="note" title="Note"><p>This chapter is a work in progress.</p></div><p>The Eclipse plugin generates files that are used by <a class="ulink" href="http://eclipse.org" target="_top">Eclipse IDE</a>, thus making it possible to import the project into Eclipse (<span class="guimenuitem">File</span> - <span class="guimenuitem">Import...</span> - <span class="guimenuitem">Existing Projects into Workspace</span>). Both external and project dependencies are considered.</p><p>To use the plugin, include in your build script:
</p><pre class="programlisting">usePlugin('eclipse')</pre><p>
</p><p>The Eclipse plugin will create different files depending on the other plugins used. If used together with the Java Plugin, <code class="filename">.project</code> and <code class="filename">.classpath</code> files will be generated. If used with the War plugin, additional wtp files will be generated.</p><div class="section" title="26.1.&nbsp;Usage"><div class="titlepage"><div><div><h2 class="title"><a name="N129A5"></a>26.1.&nbsp;Usage</h2></div></div></div><p>There are several tasks (presented in <a class="xref" href="#eclipsetasks" title="Table&nbsp;26.1.&nbsp;Eclipse plugin - tasks">Table&nbsp;26.1, &ldquo;Eclipse plugin - tasks&rdquo;</a>) that the Eclipse plugin provides, but you will probably use only <code class="literal">eclipse</code> task by executing <strong class="userinput"><code>gradle eclipse</code></strong>.
</p></div><div class="section" title="26.2.&nbsp;Tasks"><div class="titlepage"><div><div><h2 class="title"><a name="N129B3"></a>26.2.&nbsp;Tasks</h2></div></div></div><p>The Eclipse plugin adds the tasks shown in <a class="xref" href="#eclipsetasks" title="Table&nbsp;26.1.&nbsp;Eclipse plugin - tasks">Table&nbsp;26.1, &ldquo;Eclipse plugin - tasks&rdquo;</a> to a project.
        </p><div class="table"><p class="title"><b>Table&nbsp;26.1.&nbsp;Eclipse plugin - tasks</b></p><div class="table-contents"><table id="eclipsetasks"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">eclipse</code>
                </td>
                <td>
            <code class="literal">eclipseCp</code>, <code class="literal">eclipseProject</code>, <code class="literal">eclipseWtp</code>
          </td>
                <td>
            <code class="literal">-</code>
          </td>
            </tr><tr>
                <td>
                    <code class="literal">eclipseClean</code>
                </td>
                <td>
                    <code class="literal">-</code>
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/ide/eclipse/EclipseClean.html" target="_top">
              <code class="classname">EclipseClean</code>
            </a>
          </td>
            </tr><tr>
                <td>
                    <code class="literal">eclipseCp</code>
                </td>
                <td>
                    <code class="literal">-</code>
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/ide/eclipse/EclipseClasspath.html" target="_top">
              <code class="classname">EclipseClasspath</code>
            </a>
          </td>
            </tr><tr>
                <td>
                    <code class="literal">eclipseProject</code>
                </td>
                <td>
                    <code class="literal">-</code>
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/ide/eclipse/EclipseProject.html" target="_top">
              <code class="classname">EclipseProject</code>
            </a>
          </td>
            </tr><tr>
                <td>
                    <code class="literal">eclipseWtp</code>
                </td>
                <td>
                    <code class="literal">-</code>
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/ide/eclipse/EclipseWtp.html" target="_top">
              <code class="classname">EclipseWtp</code>
            </a>
          </td>
            </tr><tr>
                <td>
                    <code class="literal">eclipseWtpModule</code>
                </td>
                <td>
                    <code class="literal">-</code>
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/ide/eclipse/EclipseWtpModule.html" target="_top">
              <code class="classname">EclipseWtpModule</code>
            </a>
          </td>
            </tr></table></div></div></div></div><div class="chapter" title="Chapter&nbsp;27.&nbsp;The Project Report Plugin"><div class="titlepage"><div><div><h1><a name="project_reports_plugin"></a>Chapter&nbsp;27.&nbsp;The Project Report Plugin</h1></div></div></div><div class="note" title="Note"><p>The Project report plugin is currently a work in progress, and at this stage doesn't do particularly
            much. We plan to add much more to these reports in the next release of Gradle.
        </p></div><p>The Project report plugin adds some tasks to your project which generate reports containing useful
        information about your build.
    </p><div class="section" title="27.1.&nbsp;Tasks"><div class="titlepage"><div><div><h2 class="title"><a name="N12A68"></a>27.1.&nbsp;Tasks</h2></div></div></div><p>The project report plugin defines the following tasks:</p><div class="table"><p class="title"><b>Table&nbsp;27.1.&nbsp;Project report plugin - tasks</b></p><div class="table-contents"><table id="N12A6D"><thead><tr>
                    <td>Task name</td>
                    <td>Depends on</td>
                    <td>Type</td>
                    <td>Description</td>
                </tr></thead><tr>
                <td>
                    <code class="literal">dependencyReport</code>
                </td>
                <td>-</td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/diagnostics/DependencyReportTask.html" target="_top">
              <code class="classname">DependencyReportTask</code>
            </a>
          </td>
                <td>Generates the project dependency report.</td>
            </tr><tr>
                <td>
                    <code class="literal">propertyReport</code>
                </td>
                <td>-</td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/diagnostics/PropertyReportTask.html" target="_top">
              <code class="classname">PropertyReportTask</code>
            </a>
          </td>
                <td>Generates the project property report.</td>
            </tr><tr>
                <td>
                    <code class="literal">taskReport</code>
                </td>
                <td>-</td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/diagnostics/TaskReportTask.html" target="_top">
              <code class="classname">TaskReportTask</code>
            </a>
          </td>
                <td>Generates the project task report.</td>
            </tr><tr>
                <td>
                    <code class="literal">projectReport</code>
                </td>
                <td>
                    <code class="literal">dependencyReport</code>, <code class="literal">propertyReport</code>, <code class="literal">taskReport</code>
                </td>
                <td>
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/Task.html" target="_top">
              <code class="classname">Task</code>
            </a>
          </td>
                <td>Generates all project reports.</td>
            </tr></table></div></div></div><div class="section" title="27.2.&nbsp;Project layout"><div class="titlepage"><div><div><h2 class="title"><a name="N12AE8"></a>27.2.&nbsp;Project layout</h2></div></div></div><p>The project report plugin does not require any particular project layout.</p></div><div class="section" title="27.3.&nbsp;Dependency management"><div class="titlepage"><div><div><h2 class="title"><a name="N12AED"></a>27.3.&nbsp;Dependency management</h2></div></div></div><p>The project report plugin does not define any dependency configurations.</p></div><div class="section" title="27.4.&nbsp;Convention properties"><div class="titlepage"><div><div><h2 class="title"><a name="N12AF2"></a>27.4.&nbsp;Convention properties</h2></div></div></div><p>The project report defines the following convention properties:</p><div class="table"><p class="title"><b>Table&nbsp;27.2.&nbsp;Project report plugin - directory properties</b></p><div class="table-contents"><table id="N12AF7"><thead><tr>
                    <td>Property name</td>
                    <td>Type</td>
                    <td>Default value</td>
                    <td>Description</td>
                </tr></thead><tr>
        <td>
            <code class="literal">reportsDirName</code>
        </td>
        <td>
            <code class="classname">String</code>
        </td>
        <td>
            <code class="filename">reports</code>
        </td>
        <td>
            The name of the directory to generate reports into, relative to the build directory.
        </td>
    </tr><tr>
        <td>
            <code class="literal">reportsDir</code>
        </td>
        <td>
            <code class="classname">File</code> (read-only)
        </td>
        <td>
            <code class="filename">
                <em class="replaceable"><code>buildDir</code></em>/<em class="replaceable"><code>reportsDirName</code></em>
              </code>
        </td>
        <td>
            The directory to generate reports into.
        </td>
    </tr><tr>
                <td>
                    <code class="literal">projectReportDirName</code>
                </td>
                <td>
                    <code class="classname">String</code>
                </td>
                <td>
                    <code class="literal">project</code>
                </td>
                <td>
                    The name of the directory to generate the project report into, relative to the reports directory.
                </td>
            </tr><tr>
                <td>
                    <code class="literal">projectReportDir</code>
                </td>
                <td>
                    <code class="classname">File</code> (read-only)
                </td>
                <td>
                    <code class="literal">
              <em class="replaceable"><code>reportsDir</code></em>/<em class="replaceable"><code>projectReportDirName</code></em>
            </code>
                </td>
                <td>
                    The directory to generate the project report into.
                </td>
            </tr></table></div></div><p>These convention properties are provided by a convention object of type <a class="ulink" href="http://www.gradle.org/0.8/docs/groovydoc/org/gradle/api/plugins/ProjectReportsPluginConvention.html" target="_top">
          <code class="classname">ProjectReportsPluginConvention</code>
        </a>.</p></div></div><div class="chapter" title="Chapter&nbsp;28.&nbsp;Dependency Management"><div class="titlepage"><div><div><h1><a name="dependency_management"></a>Chapter&nbsp;28.&nbsp;Dependency Management</h1></div></div></div><div class="section" title="28.1.&nbsp;Introduction"><div class="titlepage"><div><div><h2 class="title"><a name="sec:Introduction"></a>28.1.&nbsp;Introduction</h2></div></div></div><p>This chapter gives an overview of issues related with dependency management and presents how Gradle can be used to overcome them.
        </p><p>Gradle offers a very good support for dependency management. If you are familiar with Maven or Ivy approach you will be delighted to learn that:
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>All the concepts that you already know and like are still there and are fully supported by Gradle. The current dependency management solutions all require to work with XML descriptor files and are usually
        based on remote repositories for downloading the dependencies. Gradle fully supports this approach.
                </p></li><li class="listitem"><p>Gradle works <span class="emphasis"><em>perfectly</em></span> with your existent dependency management
                    infrastructure, be it Maven or Ivy. All the repositories you have set up with your custom pom or
                    ivy files can be used as they are. No changes necessary.
                </p></li><li class="listitem"><p>Additionally, Gradle offers a simpler approach, which might be better suited for some projects.
                </p></li></ul></div><p>
        </p></div><div class="section" title="28.2.&nbsp;Dependency management overview"><div class="titlepage"><div><div><h2 class="title"><a name="sec:dependency_management_overview"></a>28.2.&nbsp;Dependency management overview</h2></div></div></div><p>We think dependency management is very important for almost any project. Yet the kind of dependency
            management you need depends on the complexity and the environment of your project. Is your project a
            distribution or a library? Is it part of an enterprise environment, where it is integrated into other
            projects builds or not? But all types of projects share the following requirements:
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>The version of the jar must be easy to recognize. Sometimes the version is in the Manifest file of
                    the jar, often not. And even if, it is rather painful to always look into the Manifest file to learn
                    about the version. Therefore we think that you should only use jars which have their version as part
                    of their file name.
                </p></li><li class="listitem"><p>It hopes to be clear what are the first level dependencies and what are the transitive ones. There
                    are different ways to achieve this. We will look at this later.
                </p></li><li class="listitem"><p>Conflicting versions of the same jar should be detected and either resolved or cause an exception.
                </p></li></ul></div><div class="section" title="28.2.1.&nbsp;Versioning the jar name"><div class="titlepage"><div><div><h3 class="title"><a name="sub:versioning_the_jar_name"></a>28.2.1.&nbsp;Versioning the jar name</h3></div></div></div><p>Why do we think this is necessary? Without a dependency management as described above, your are likely
                to burn your fingers sooner or later. If it is unclear which version of a jar your are using, this can
                introduce subtle bugs which are very hard to find. For example there might be a project which uses
                Hibernate 3.0.4. There are some problems with Hibernate so a developer installs version 3.0.5 of
                Hibernate on her machine. This did not solve the problem but she forgot to roll back Hibernate to 3.0.4.
                Weeks later there is an exception on the integration machine which can't be reproduced on the developer
                machine. Without a version in the jar name this problem might take a long time to debug. Version in the
                jar names increases the expressiveness of your project and makes it easier to maintain.
            </p></div><div class="section" title="28.2.2.&nbsp;Transitive dependency management"><div class="titlepage"><div><div><h3 class="title"><a name="sub:transitive_dependency_management"></a>28.2.2.&nbsp;Transitive dependency management</h3></div></div></div><p>Why is transitive dependency management so important? If you don't know which dependencies are first
                level dependencies and which ones are transitive you will soon lose control over your build. Even
                Gradle has already 20+ jars. An enterprise project using Spring, Hibernate, etc. easily ends up with
                100+ jars. There is no way to memorize where all these jars come from. If you want to get rid of a first
                level dependency you can't be sure which other jars you should remove. Because a dependency of a
                first level dependency might also be a first level dependency itself. Or it might be a transitive
                dependency of another of your first level dependencies. Many first level dependencies are runtime
                dependencies and the transitive dependencies are of course all runtime dependencies. So the compiler
                won't help you much here. The end of the story is, as we have seen very often, no one dares to remove
                any jar any longer. The project classpath is a complete mess and if a classpath problem arises, hell on
                earth invites you for a ride. In one of my former projects, I found some ldap related jar in the
                classpath, whose sheer presence, as I found out after much research, accelerated LDAP access. So
                removing this jar would not have led to any errors at compile or runtime.
            </p><p>Gradle offers you different ways to express what are first level and what are transitive dependencies.
                Gradle allows you for example to store your jars in CVS or SVN without XML descriptor files and still
                use transitive dependency management. Gradle also validates your dependency hierarchy against the
                reality of your code by using only the first level dependencies for compiling.
            </p></div><div class="section" title="28.2.3.&nbsp;Version conflicts"><div class="titlepage"><div><div><h3 class="title"><a name="sub:version_conflicts"></a>28.2.3.&nbsp;Version conflicts</h3></div></div></div><p>In your dependency description you tell Gradle which version of a dependency is needed by another
                dependency. This frequently leads to conflicts. Different dependencies rely on different versions of
                another dependency. The JVM unfortunately does not offer yet any easy way, to have different versions of
                the same jar in the classpath (see <a class="xref" href="#sub:dependency_management_and_java" title="28.2.4.&nbsp;Dependency management and Java">Section&nbsp;28.2.4, &ldquo;Dependency management and Java&rdquo;</a>). What Gradle
                offers you is a resolution strategy, by default the newest version is used. To deal with problems due to
                version conflicts, reports with dependency graphs are also very helpful. Such reports are another
                feature of dependency management.
            </p></div><div class="section" title="28.2.4.&nbsp;Dependency management and Java"><div class="titlepage"><div><div><h3 class="title"><a name="sub:dependency_management_and_java"></a>28.2.4.&nbsp;Dependency management and Java</h3></div></div></div><p>Traditionally, Java has offered no support at all for dealing with libraries and versions. There are
                no standard ways to say that
                <code class="literal">foo-1.0.jar</code>
                depends on a <code class="literal">bar-2.0.jar</code>. This has led to proprietary solutions. The most popular ones
                are Maven and Ivy. Maven is a complete build system whereas Ivy focuses solely on dependency management.
            </p><p>Both approaches rely on descriptor XML files, which contains information about the dependencies of a
                particular jar. Both also use repositories where the actual jars are placed together with their
                descriptor files. And both offer resolution for conflicting jar versions in one form or the other. Yet
                we think the differences of both approaches are significant
                in terms of flexibility and maintainability. Beside this, Ivy fully supports the Maven dependency
                handling. So with Ivy you have access to both worlds. We like Ivy very much. Gradle uses it under the
                hood for its dependency management. Ivy is most often used via Ant and XML descriptors. But it also has
                an API. We integrate deeply with Ivy via its API. This enables us to build new concepts on top
                of Ivy which Ivy does not offer itself.
            </p><p>Right now there is a lot of movement in the field of dependency handling. There is OSGi and there is
                JSR-294.
                <sup>[<a href="#ftn.N12BD0" name="N12BD0" class="footnote">19</a>]</sup>
                OSGi is available already, JSR-294 is supposed to be shipped with Java 7. These technologies
                deal, amongst many other things, also with a painful problem which is neither solved by Maven nor by Ivy. This is enabling different
                versions of the same jar to be used at runtime.
            </p></div></div><div class="section" title="28.3.&nbsp;How to declare your dependencies"><div class="titlepage"><div><div><h2 class="title"><a name="sec:how_to_declare_your_dependencies"></a>28.3.&nbsp;How to declare your dependencies</h2></div></div></div><p>People who know Ivy have come across most of the concepts we are going to introduce now. But Gradle does not
            use any XML for declaring the dependencies (e.g. no <code class="literal">ivy.xml</code> file). It has its own
            notation which is part of the Gradle build file.
        </p><div class="section" title="28.3.1.&nbsp;Configurations"><div class="titlepage"><div><div><h3 class="title"><a name="sub:configurations"></a>28.3.1.&nbsp;Configurations</h3></div></div></div><p>Dependencies are grouped in configurations. Configurations have a name, a number of other properties,
                and they can extend each other. For examples see: <a class="xref" href="#sec:artifact_configurations" title="8.1.&nbsp;Artifact configurations">Section&nbsp;8.1, &ldquo;Artifact configurations&rdquo;</a>.
                If you use the Java plugin, Gradle adds a number of pre-defined configurations to your build. The
                plugin also assigns configurations to tasks. See <a class="xref" href="#sec:java_plugin_and_dependency_management" title="18.4.&nbsp;Dependency management">Section&nbsp;18.4, &ldquo;Dependency management&rdquo;</a>
                for details. Of course you can add your add custom configurations on top of that. There are many use cases
                for custom configurations. This is very handy for example for adding dependencies not needed for
                building or testing your software (e.g. additional JDBC drivers to be shipped with your distribution).
                The configurations are managed by a <code class="literal">configurations</code> object. The closure you pass to
                the configurations object is applied against its API. To learn more about this API have a look at
                <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/artifacts/dsl/ConfigurationHandler.html" target="_top">
            <code class="classname">ConfigurationHandler</code>
          </a>.
            </p></div><div class="section" title="28.3.2.&nbsp;Module dependencies"><div class="titlepage"><div><div><h3 class="title"><a name="sub:module_dependencies"></a>28.3.2.&nbsp;Module dependencies</h3></div></div></div><p>Module dependencies are the most common dependencies. They correspond to a dependency in an external
                repository.
            </p><div class="example"><a name="moduleDependencies"></a><p class="title"><b>Example&nbsp;28.1.&nbsp;Module dependencies</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">dependencies {
    runtime group: <span class="hl-string">'org.springframework'</span>, name: <span class="hl-string">'spring-core'</span>, version: <span class="hl-string">'2.5'</span>
    runtime <span class="hl-string">'org.springframework:spring-core:2.5'</span>, <span class="hl-string">'org.springframework:spring-aop:2.5'</span>
    runtime(
        [group: <span class="hl-string">'org.springframework'</span>, name: <span class="hl-string">'spring-core'</span>, version: <span class="hl-string">'2.5'</span>],
        [group: <span class="hl-string">'org.springframework'</span>, name: <span class="hl-string">'spring-aop'</span>, version: <span class="hl-string">'2.5'</span>]
    )
    runtime(<span class="hl-string">'org.hibernate:hibernate:3.0.5'</span>) {
        transitive = true
    }
    runtime group: <span class="hl-string">'org.hibernate'</span>, name: <span class="hl-string">'hibernate'</span>, version: <span class="hl-string">'3.0.5'</span>, transitive: true
    runtime(group: <span class="hl-string">'org.hibernate'</span>, name: <span class="hl-string">'hibernate'</span>, version: <span class="hl-string">'3.0.5'</span>) {
        transitive = true
    }
}</pre></div></div><br class="example-break"><p>Gradle provides different notations for module dependencies. There is a string notation and
                a map notation. A module dependency has an API which allows for further configuration. Have a look at
                <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/artifacts/ExternalModuleDependency.html" target="_top">
            <code class="classname">ExternalModuleDependency</code>
          </a> to learn all about the API.
                This API provides properties and configuration methods. Via the string notation you can define a subset
                the properties. With the map notation you can define all properties. To have access to the complete API,
                either with the map or with the string notation, you can assign a single dependency to a configuration
                together with a closure.
            </p><p>If you declare a module dependency, Gradle looks for a corresponding module descriptor file (<code class="literal">pom.xml</code> or
                <code class="literal">ivy.xml</code>) in the repositories. If such a module descriptor file exists, it is parsed and the artifacts of
                this module (e.g. <code class="literal">hibernate-3.0.5.jar</code>) as well as its dependencies (e.g. cglib) are downloaded. If no such
                module descriptor file exists, Gradle looks for a file called <code class="literal">hibernate-3.0.5.jar</code> to retrieve. In Maven
                a module can only have one and only one artifact. In Gradle and Ivy a module can have multiple artifacts.
                Each artifact can have a different set of dependencies.
            </p><div class="section" title="28.3.2.1.&nbsp;Artifact only notation"><div class="titlepage"><div><div><h4 class="title"><a name="ssub:artifact_dependencies"></a>28.3.2.1.&nbsp;Artifact only notation</h4></div></div></div><p>As said above, if no module descriptor file can be found, Gradle by default
                    downloads a jar with the name of the module. But sometimes, even if the repository contains module descriptors,  you want to download only the artifact jar, without
                    the dependencies.
                    <sup>[<a href="#ftn.N12C25" name="N12C25" class="footnote">20</a>]</sup>
                    And sometimes you want to download a zip from a repository, that does not have module descriptors.
                    Gradle provides an <span class="emphasis"><em>artifact only</em></span> notation for those use cases - simply prefix the extension that you want to be downloaded with <code class="literal">'@'</code> sign:
                    </p><div class="example"><a name="artifactOnly"></a><p class="title"><b>Example&nbsp;28.2.&nbsp;Artifact only notation</b></p><div class="example-contents"><p>
                <code class="filename">build.gradle</code>
              </p><pre class="programlisting">dependencies {
    runtime <span class="hl-string">"org.groovy:groovy:1.5.6@jar"</span>
    runtime group: <span class="hl-string">'org.groovy'</span>, name: <span class="hl-string">'groovy'</span>, version: <span class="hl-string">'1.5.6'</span>, ext: <span class="hl-string">'jar'</span>
}</pre></div></div><p><br class="example-break">
                    An artifact only notation creates a module dependency which downloads only the artifact file with
                    the specified extension. Existing module descriptors are ignored.
                </p></div><div class="section" title="28.3.2.2.&nbsp;Classifiers"><div class="titlepage"><div><div><h4 class="title"><a name="ssub:classifiers"></a>28.3.2.2.&nbsp;Classifiers</h4></div></div></div><p>The Maven dependency management has the notion of classifiers.
                    <sup>[<a href="#ftn.N12C45" name="N12C45" class="footnote">21</a>]</sup>
                    Gradle supports this. To retrieve classified dependencies from a maven repository you can write:
                </p><div class="example"><a name="classifier"></a><p class="title"><b>Example&nbsp;28.3.&nbsp;Dependency with classifier</b></p><div class="example-contents"><p>
              <code class="filename">build.gradle</code>
            </p><pre class="programlisting">compile <span class="hl-string">"org.gradle.test.classifiers:service:1.0:jdk15@jar"</span>
    otherConf group: <span class="hl-string">'org.gradle.test.classifiers'</span>, name: <span class="hl-string">'service'</span>, version: <span class="hl-string">'1.0'</span>, classifier: <span class="hl-string">'jdk14'</span></pre></div></div><br class="example-break"><p>As you can see in the example, classifiers can be used together with setting
                an explicit extension (artifact only notation).</p></div></div><div class="section" title="28.3.3.&nbsp;Client module dependencies"><div class="titlepage"><div><div><h3 class="title"><a name="sub:client_module_dependencies"></a>28.3.3.&nbsp;Client module dependencies</h3></div></div></div><p>Client module dependencies enable you to declare <span class="emphasis"><em>transitive</em></span>
                dependencies directly in your build script. They are a replacement for a module descriptor XML file in
                an external repository.
            </p><div class="example"><a name="client-modules"></a><p class="title"><b>Example&nbsp;28.4.&nbsp;Client module dependencies - transitive dependencies</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">dependencies {
    runtime module(<span class="hl-string">"org.codehaus.groovy:groovy-all:1.5.6"</span>) {
        dependency(<span class="hl-string">"commons-cli:commons-cli:1.0"</span>) {
            transitive = false
        }
        module(group: <span class="hl-string">'org.apache.ant'</span>, name: <span class="hl-string">'ant'</span>, version: <span class="hl-string">'1.7.0'</span>) {
            dependencies <span class="hl-string">"org.apache.ant:ant-launcher:1.7.0@jar"</span>, <span class="hl-string">"org.apache.ant:ant-junit:1.7.0"</span>
        }
    }
}</pre></div></div><br class="example-break"><p>This declares a dependency of your project on Groovy. Groovy itself has dependencies. But Gradle does
                not look for an XML descriptor to figure them out but gets the information from the build file. The
                dependencies of a client module can be normal module dependencies or artifact dependencies or another
                client module. Have also a look at the javadoc: <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/artifacts/ClientModule.html" target="_top">
            <code class="classname">ClientModule</code>
          </a>
            </p><p>In the current release client modules have one limitation. Let's say your project is a library and
                you want this library to be uploaded to your company's Maven or Ivy repository. Gradle uploads the
                jars of your project to the company repository together with the XML descriptor file of the dependencies.
                If you use client modules the dependency declaration in the XML descriptor file is not correct. We will
                improve this in a future release of Gradle.
            </p></div><div class="section" title="28.3.4.&nbsp;Project dependencies"><div class="titlepage"><div><div><h3 class="title"><a name="sub:project_dependencies"></a>28.3.4.&nbsp;Project dependencies</h3></div></div></div><p>Gradle distinguishes between external dependencies and dependencies on projects which are part of the
                same multi-project build. For the latter you can declare <em class="firstterm">Project Dependencies</em>.
            </p><div class="example"><a name="project-dependencies"></a><p class="title"><b>Example&nbsp;28.5.&nbsp;Project dependencies</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">dependencies {
    compile project(<span class="hl-string">':shared'</span>)
}</pre></div></div><br class="example-break"><p>For more information see the javadoc for <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/artifacts/ProjectDependency.html" target="_top">
            <code class="classname">ProjectDependency</code>
          </a>
            </p><p>Multi-project builds are discussed in <a class="xref" href="#multi_project_builds" title="Chapter&nbsp;31.&nbsp;Multi-project Builds">Chapter&nbsp;31, <i>Multi-project Builds</i></a>.
            </p><p>Transitive compile dependencies are disabled by default. They can be enabled using:
            </p><pre class="programlisting">configurations.compile.transitive = true</pre></div><div class="section" title="28.3.5.&nbsp;File dependencies"><div class="titlepage"><div><div><h3 class="title"><a name="N12CA1"></a>28.3.5.&nbsp;File dependencies</h3></div></div></div><p>File dependencies allow you to directly add a set of files to a configuration, without first adding
                them to a repository. This can be useful if you cannot, or do not want to, place certain files in a
                repository. Or if you do not want to use any repositories at all for storing your dependencies.
            </p><p>To add some files as a dependency for a configuration, you simply pass a
                <a class="link" href="#sec:file_collections" title="14.2.&nbsp;File collections">file collection</a> as a dependency:</p><div class="example"><a name="file-dependencies"></a><p class="title"><b>Example&nbsp;28.6.&nbsp;File dependencies</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">dependencies {
    runtime files(<span class="hl-string">'libs/a.jar'</span>, <span class="hl-string">'libs/b.jar'</span>)
    runtime fileTree(dir: <span class="hl-string">'libs'</span>, includes: [<span class="hl-string">'*.jar'</span>])
}</pre></div></div><br class="example-break"><p>File dependencies are not included in the published dependency descriptor for your project.
                However, file dependencies are included in transitive project dependencies within the same build.
                This means they cannot be used outside the current build, but they can be used with the same build.
            </p><p>
                You can declare which tasks produce the files for a file dependency. You might do this when, for example,
                the files are generated by the build.
            </p><div class="example"><a name="generatedFileDependencies"></a><p class="title"><b>Example&nbsp;28.7.&nbsp;Generated file dependencies</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">dependencies {
    compile files(<span class="hl-string">"$buildDir/classes"</span>) {
        builtBy <span class="hl-string">'compile'</span>
    }
}

task compile &lt;&lt; {
    println <span class="hl-string">'compiling classes'</span>
}

task list(dependsOn: configurations.compile) &lt;&lt; {
    println <span class="hl-string">"classpath = ${configurations.compile.collect {File file -&gt; file.name}}"</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q list</code></strong>
          </p><pre class="screen">&gt; gradle -q list
compiling classes
classpath = [classes]</pre></div></div><br class="example-break"></div><div class="section" title="28.3.6.&nbsp;Excluding transitive dependencies"><div class="titlepage"><div><div><h3 class="title"><a name="sub:exclude_transitive_dependencies"></a>28.3.6.&nbsp;Excluding transitive dependencies</h3></div></div></div><p>You can exclude a <span class="emphasis"><em>transitive</em></span> dependency either by configuration or by dependency:
            </p><div class="example"><a name="exclude-dependencies"></a><p class="title"><b>Example&nbsp;28.8.&nbsp;Excluding transitive dependencies</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">configurations {
    compile.exclude module: <span class="hl-string">'commons'</span>
    all*.exclude group: <span class="hl-string">'org.gradle.test.excludes'</span>, module: <span class="hl-string">'reports'</span>
}

dependencies {
    compile(<span class="hl-string">"org.gradle.test.excludes:api:1.0"</span>) {
        exclude module: <span class="hl-string">'shared'</span>
    }
}</pre></div></div><br class="example-break"><p>If you define
                an exclude for a particular configuration, the excluded transitive dependency will be filtered for all
                dependencies when resolving this configuration or any inheriting configuration.
                If you want to exclude a transitive dependency from all your
                configurations you can use the Groovy spread-dot operator to express this in a concise way, as shown in the example.
                When defining an exclude, you can
                specify either only the organization or only the module name or both.
                Have also a look at the javadoc of <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/artifacts/Dependency.html" target="_top">
            <code class="classname">Dependency</code>
          </a> and
                <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/artifacts/Configuration.html" target="_top">
            <code class="classname">Configuration</code>
          </a>.
            </p></div><div class="section" title="28.3.7.&nbsp;Optional attributes"><div class="titlepage"><div><div><h3 class="title"><a name="N12CF4"></a>28.3.7.&nbsp;Optional attributes</h3></div></div></div><p><a name="para:dependencies_with_empty_attributes"></a>All attributes for a dependency are optional, except the name. It depends on the repository type,
                which information is need for actually finding the dependencies in the repository.
                See <a class="xref" href="#sec:repositories" title="28.5.&nbsp;Repositories">Section&nbsp;28.5, &ldquo;Repositories&rdquo;</a>. If you work for example with Maven repositories, you need to define the
                group, name and version. If you work with filesystem repositories you might only need the name or the name
                and the version.
            </p><div class="example"><a name="dependenciesWithEmptyAttributes"></a><p class="title"><b>Example&nbsp;28.9.&nbsp;Optional attributes of dependencies</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">dependencies {
    runtime <span class="hl-string">":junit:4.4"</span>, <span class="hl-string">":testng"</span>
    runtime name: <span class="hl-string">'testng'</span> 
}</pre></div></div><br class="example-break"><p><a name="para:notation_collections"></a>You can also assign collections or arrays of dependency notations to a configuration:
            </p><div class="example"><a name="listGrouping"></a><p class="title"><b>Example&nbsp;28.10.&nbsp;Collections and arrays of dependencies</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">List groovy = [<span class="hl-string">"org.codehaus.groovy:groovy-all:1.5.4@jar"</span>,
               <span class="hl-string">"commons-cli:commons-cli:1.0@jar"</span>,
               <span class="hl-string">"org.apache.ant:ant:1.7.0@jar"</span>]
List hibernate = [<span class="hl-string">'org.hibernate:hibernate:3.0.5@jar'</span>, <span class="hl-string">'somegroup:someorg:1.0@jar'</span>]
dependencies {
    runtime groovy, hibernate
}</pre></div></div><br class="example-break"></div><div class="section" title="28.3.8.&nbsp;Dependency configurations"><div class="titlepage"><div><div><h3 class="title"><a name="sec:dependency_configurations"></a>28.3.8.&nbsp;Dependency configurations</h3></div></div></div><p>In Gradle a dependency can have different configurations (as your project can have different configurations). If you
            don't specify anything explicitly, Gradle uses the default configuration of the dependency. For dependencies
            from a Maven repository, the default configuration is the only available one anyway. If you work with Ivy repositories and
            want to declare a non-default configuration for your dependency you have to use the map notation and declare:
            </p><div class="example"><a name="dependencyConfigurations"></a><p class="title"><b>Example&nbsp;28.11.&nbsp;Dependency configurations</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">dependencies {
    runtime group: <span class="hl-string">'org.somegroup'</span>, name: <span class="hl-string">'somedependency'</span>, version: <span class="hl-string">'1.0'</span>, configuration: <span class="hl-string">'someConfiguration'</span>
}</pre></div></div><br class="example-break"><p>To do the same for project dependencies you need to declare:</p><div class="example"><a name="dependencyConfigurationsProjects"></a><p class="title"><b>Example&nbsp;28.12.&nbsp;Dependency configurations for project</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">dependencies {
    compile project(path: <span class="hl-string">':api'</span>, configuration: <span class="hl-string">'spi'</span>)
}</pre></div></div><br class="example-break"></div><div class="section" title="28.3.9.&nbsp;Dependency reports"><div class="titlepage"><div><div><h3 class="title"><a name="N12D38"></a>28.3.9.&nbsp;Dependency reports</h3></div></div></div><p>You can generate dependency reports from the command line (see <a class="xref" href="#para:commandline_dependency_report">Section&nbsp;9.5, &ldquo;Obtaining information about your build&rdquo;</a>).
                With the help of the Project report plugin (see <a class="xref" href="#project_reports_plugin" title="Chapter&nbsp;27.&nbsp;The Project Report Plugin">Chapter&nbsp;27, <i>The Project Report Plugin</i></a>) such a report can be created by your build.
            </p></div></div><div class="section" title="28.4.&nbsp;Working with dependencies"><div class="titlepage"><div><div><h2 class="title"><a name="N12D43"></a>28.4.&nbsp;Working with dependencies</h2></div></div></div><p>For the examples below we have the following dependencies setup:</p><div class="example"><a name="configurationHandlingSetup"></a><p class="title"><b>Example&nbsp;28.13.&nbsp;Configuration.copy</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">configurations {
    sealife
    alllife.extendsFrom sealife
}

dependencies {
    sealife <span class="hl-string">"sea.mammals:orca:1.0"</span>, <span class="hl-string">"sea.fish:shark:1.0"</span>, <span class="hl-string">"sea.fish:tuna:1.0"</span>
    alllife <span class="hl-string">"air.birds:albatros:1.0"</span>
}</pre></div></div><br class="example-break"><p>The dependencies have the following transitive dependencies:</p><p>shark-1.0 -&gt; seal-2.0, tuna-1.0</p><p>orca-1.0 -&gt; seal-1.0</p><p>tuna-1.0 -&gt; herring-1.0</p><p>You can use the configuration to access the declared dependencies or a subset of those:
        </p><div class="example"><a name="configurationHandlingDependencies"></a><p class="title"><b>Example&nbsp;28.14.&nbsp;Accessing declared dependencies</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task dependencies &lt;&lt; {
    configurations.alllife.dependencies.each { dep -&gt; println dep.name }
    println()
    configurations.alllife.allDependencies.each { dep -&gt; println dep.name }
    println()
    configurations.alllife.allDependencies.findAll { dep -&gt; dep.name != <span class="hl-string">'orca'</span> }.each { dep -&gt; println dep.name }
}</pre><p>Output of <strong class="userinput"><code>gradle -q dependencies</code></strong>
        </p><pre class="screen">&gt; gradle -q dependencies
albatros

albatros
orca
shark
tuna

albatros
shark
tuna</pre></div></div><br class="example-break"><p>
        <code class="code">dependencies</code> returns only the dependencies belonging explicitly to the configuration.
            <code class="code">allDependencies</code> includes the dependencies from extended
            configurations.
        </p><p>To get the library files of the configuration dependencies you can do:
        </p><div class="example"><a name="configurationHandlingAllFiles"></a><p class="title"><b>Example&nbsp;28.15.&nbsp;Configuration.files</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task allFiles &lt;&lt; {
    configurations.sealife.files.each { file -&gt;
        println file.name
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q allFiles</code></strong>
        </p><pre class="screen">&gt; gradle -q allFiles
orca-1.0.jar
shark-1.0.jar
seal-2.0.jar
tuna-1.0.jar
herring-1.0.jar</pre></div></div><br class="example-break"><p>Sometimes you want the library files of a subset of the configuration dependencies (e.g. of a single dependency).
        </p><div class="example"><a name="configurationHandlingFiles"></a><p class="title"><b>Example&nbsp;28.16.&nbsp;Configuration.files with spec</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task files &lt;&lt; {
    configurations.sealife.files { dep -&gt; dep.name == <span class="hl-string">'orca'</span> }.each { file -&gt;
        println file.name
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q files</code></strong>
        </p><pre class="screen">&gt; gradle -q files
orca-1.0.jar
seal-2.0.jar</pre></div></div><br class="example-break"><p>The <code class="code">Configuration.files</code> method always retrieves all artifacts of the <span class="emphasis"><em>whole</em></span> configuration. It
        then filters the retrieved files by specified dpendencies. As you can see in the example, transitive dependencies are included.
        </p><p>You can also copy a configuration. You can optionally specify that only a subset of dependencies from the orginal configuration
            should be copied. The copying methods come in two flavors. The <code class="code">copy</code> method copies only the dependencies belonging
            explicitly to the configuration. The <code class="code">copyRecursive</code> methode copies all the dependencies, including the dependencies from extended
            configurations.
        </p><div class="example"><a name="configurationHandlingCopy"></a><p class="title"><b>Example&nbsp;28.17.&nbsp;Configuration.copy</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task copy &lt;&lt; {
    configurations.alllife.copyRecursive { dep -&gt; dep.name != <span class="hl-string">'orca'</span> }.allDependencies.each { dep -&gt;
        println dep.name
    }
    println()
    configurations.alllife.copy().allDependencies.each { dep -&gt;
        println dep.name
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q copy</code></strong>
        </p><pre class="screen">&gt; gradle -q copy
albatros
shark
tuna

albatros</pre></div></div><br class="example-break"><p>It is important to note that the returned files of the copied configuration
            are often but not always the same than the returned files of the dependency subset of the original configuration.
            In case of version conflicts between
            dependencies of the subset and dependencies not belonging to the subset the resolve result might be different.</p><div class="example"><a name="configurationHandlingCopyVsFiles"></a><p class="title"><b>Example&nbsp;28.18.&nbsp;Configuration.copy vs. Configuration.files</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task copyVsFiles &lt;&lt; {
    configurations.sealife.copyRecursive { dep -&gt; dep.name == <span class="hl-string">'orca'</span> }.each { file -&gt;
        println file.name
    }
    println()
    configurations.sealife.files { dep -&gt; dep.name == <span class="hl-string">'orca'</span> }.each { file -&gt;
        println file.name
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q copyVsFiles</code></strong>
        </p><pre class="screen">&gt; gradle -q copyVsFiles
orca-1.0.jar
seal-1.0.jar

orca-1.0.jar
seal-2.0.jar</pre></div></div><br class="example-break"><p>In the example above, <code class="code">orca</code> has a dependency on <code class="code">seal-1.0</code> whereas
            <code class="code">shark</code> has a dependency on <code class="code">seal-2.0</code>. The original configuration has therefore a version
            conflict which is resolved to the newer <code class="code">seal-2.0</code> version. The <code class="code">files</code> method therefore
            returns <code class="code">seal-2.0</code> as a transitive dependency of <code class="code">orca</code>. The copied configuration only has <code class="code">orca</code>
            as a dependency and therefore there is no version conflict and <code class="code">seal-1.0</code> is returned as a transitive
            dependency.
        </p><p>Once a configuration is resolved it is immutable. Changing its state or the state of one of its dependencies
            will cause an exception. You can always copy a resolved configuration. The copied configuration is in the unresolved
            state and can be freshly resolved.
        </p><p>To learn more about the API of the configuration class see the javadoc:
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/artifacts/Configuration.html" target="_top">
          <code class="classname">Configuration</code>
        </a>.
        </p></div><div class="section" title="28.5.&nbsp;Repositories"><div class="titlepage"><div><div><h2 class="title"><a name="sec:repositories"></a>28.5.&nbsp;Repositories</h2></div></div></div><div class="section" title="28.5.1.&nbsp;Introduction"><div class="titlepage"><div><div><h3 class="title"><a name="sub:introduction"></a>28.5.1.&nbsp;Introduction</h3></div></div></div><p>The Gradle repository management, based on Apache Ivy, gives you have a lot of freedom
                regarding the repository layout and the retrieval policies. Additionally Gradle provides a couple of convenience
                method to add preconfigured repositories.
            </p></div><div class="section" title="28.5.2.&nbsp;Maven repositories"><div class="titlepage"><div><div><h3 class="title"><a name="sub:maven_repo"></a>28.5.2.&nbsp;Maven repositories</h3></div></div></div><p>To add the central Maven2 repository (<a class="ulink" href="http://repo1.maven.org/maven2" target="_top">http://repo1.maven.org/maven2</a>) simply
                type:
            </p><div class="example"><a name="mavenCentral"></a><p class="title"><b>Example&nbsp;28.19.&nbsp;Adding central Maven repository</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">repositories {
    mavenCentral()
}</pre></div></div><br class="example-break"><p>Now Gradle looks for your dependencies in this repository.
            </p><p>Quite often certain jars are not in the official Maven repository for licensing reasons (e.g. JTA),
                but its poms are.
            </p><div class="example"><a name="mavenCentralJarRepo"></a><p class="title"><b>Example&nbsp;28.20.&nbsp;Adding many Maven repositories</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">repositories {
    mavenCentral name: <span class="hl-string">'single-jar-repo'</span>, urls: <span class="hl-string">"http://repo.mycompany.com/jars"</span>
    mavenCentral name: <span class="hl-string">'multi-jar-repos'</span>, urls: [<span class="hl-string">"http://repo.mycompany.com/jars1"</span>, <span class="hl-string">"http://repo.mycompany.com/jars2"</span>]
}</pre></div></div><br class="example-break"><p>Gradle looks first in the central Maven repository for the pom and the jar. If the jar can't be
                found there, its looks for it in the other repositories.
            </p><p>For adding a custom Maven repository you can say:
            </p><div class="example"><a name="mavenLikeRepo"></a><p class="title"><b>Example&nbsp;28.21.&nbsp;Adding custom Maven repository</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">repositories {
    mavenRepo urls: <span class="hl-string">"http://repo.mycompany.com/maven2"</span>
}</pre></div></div><br class="example-break"><p>To declare additional repositories to look for jars (like above in the example
                for the central Maven repository), you can say:
            </p><div class="example"><a name="mavenLikeRepoWithJarRepo"></a><p class="title"><b>Example&nbsp;28.22.&nbsp;Adding additional Maven repositories for JAR files</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">repositories {
    mavenRepo urls: [<span class="hl-string">"http://repo2.mycompany.com/maven2"</span>, <span class="hl-string">"http://repo.mycompany.com/jars"</span>]
}</pre></div></div><br class="example-break"><p>The first URL is used to look for poms and jars. The subsequent URLs are used to look for jars.
            </p><div class="section" title="28.5.2.1.&nbsp;Accessing password protected Maven repositories"><div class="titlepage"><div><div><h4 class="title"><a name="N12E55"></a>28.5.2.1.&nbsp;Accessing password protected Maven repositories</h4></div></div></div><p>To access a password protected Maven repository (basic authentication) you need to use one of Ivy features:</p><div class="example"><a name="mavenPasswordProtectedRepo"></a><p class="title"><b>Example&nbsp;28.23.&nbsp;Accessing password protected Maven repository</b></p><div class="example-contents"><p>
              <code class="filename">build.gradle</code>
            </p><pre class="programlisting">org.apache.ivy.util.url.CredentialsStore.INSTANCE.addCredentials(<span class="hl-string">"REALM"</span>, <span class="hl-string">"HOST"</span>, <span class="hl-string">"USER"</span>, <span class="hl-string">"PASSWORD"</span>);</pre></div></div><br class="example-break"><p>Host name should not include <code class="literal">"http://"</code> prefix. It is advisable to keep your login and password in <code class="filename">gradle.properties</code> rather than directly in the build file.</p></div></div><div class="section" title="28.5.3.&nbsp;Flat directory resolver"><div class="titlepage"><div><div><h3 class="title"><a name="sec:flat_dir_resolver"></a>28.5.3.&nbsp;Flat directory resolver</h3></div></div></div><p>If you want to use a (flat) filesytem directory as a repository, simply type:
            </p><div class="example"><a name="flatDirMulti"></a><p class="title"><b>Example&nbsp;28.24.&nbsp;Flat repository resolver</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">repositories {
    flatDir name: <span class="hl-string">'localRepository'</span>, dirs: <span class="hl-string">'lib'</span>
    flatDir dirs: [<span class="hl-string">'lib1'</span>, <span class="hl-string">'lib2'</span>]
}</pre></div></div><br class="example-break"><p>This adds repositories which look into one or more directories for finding dependencies. If you only
                work with flat directory resolvers you don't need to set all attributes of a dependency.
                See <a class="xref" href="#para:dependencies_with_empty_attributes">Section&nbsp;28.3.7, &ldquo;Optional attributes&rdquo;</a>
            </p></div><div class="section" title="28.5.4.&nbsp;More about preconfigured repositories"><div class="titlepage"><div><div><h3 class="title"><a name="N12E85"></a>28.5.4.&nbsp;More about preconfigured repositories</h3></div></div></div><p>The methods above for creating preconfigured repositories share some common behavior. For all of them, defining
                a name for the repository is optional. If no name is defined a default name is calculated, depending on the
                type of the repository. You might want to assign a name, if you want to access the declared repository. For example
                if you want to use it also for uploading your project artifacts. An explicit name might also be helpful when
                studying the debug output.
            </p><p>The values passed as arguments to the repository methods can be of any type, not just String. The value
                that is actually used, is the <code class="code">toString</code> result of the argument object.
            </p></div><div class="section" title="28.5.5.&nbsp;Cache"><div class="titlepage"><div><div><h3 class="title"><a name="sub:cache"></a>28.5.5.&nbsp;Cache</h3></div></div></div><p>When Gradle downloads dependencies from remote repositories it stores them in a local cache located at
                <code class="literal">USER_HOME/.gradle/cache</code>. When Gradle downloads dependencies from one of its
                predefined local resolvers (e.g. Flat Directory resolver), the cache is not used as an intermediate
                storage for dependency artifacts. The cache is always used for caching module descriptors.
            </p></div><div class="section" title="28.5.6.&nbsp;More about Ivy resolvers"><div class="titlepage"><div><div><h3 class="title"><a name="sub:more_about_ivy_resolvers"></a>28.5.6.&nbsp;More about Ivy resolvers</h3></div></div></div><p>Gradle, thanks to Ivy under its hood, is extremely flexible regarding repositories:
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>There are many options for the protocol to communicate with the repository (e.g. filesystem,
                        http, ssh, ...)
                    </p></li><li class="listitem"><p>Each repository can have its own layout.
                    </p></li></ul></div><p>Let's say, you declare a dependency on the
                <code class="literal">junit:junit:3.8.2</code> library.
                Now how does Gradle find it in the repositories? Somehow the dependency information has to be mapped to a
                path. In contrast to Maven, where this path is fixed, with Gradle you can define a pattern that defines
                what the path will look like. Here are some examples:
                <sup>[<a href="#ftn.N12EAA" name="N12EAA" class="footnote">22</a>]</sup>
            </p><pre class="programlisting">// Maven2 layout (if a repository is marked as Maven2 compatible, the organization (group) is split into subfolders according to the dots.)
someroot/[organisation]/[module]/[revision]/[module]-[revision].[ext]

// Typical layout for an ivy repository (the organization is not split into subfolder)
someroot/[organisation]/[module]/[revision]/[type]s/[artifact].[ext]

// Simple layout (the organization is not used, no nested folders.)
someroot/[artifact]-[revision].[ext]</pre><p>To add any kind of repository (you can pretty easy write your own ones) you can do:
            </p><div class="example"><a name="fileSystemResolver"></a><p class="title"><b>Example&nbsp;28.25.&nbsp;Definition of a custom repository</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">repositories {
    add(<span class="hl-keyword">new</span> org.apache.ivy.plugins.resolver.FileSystemResolver()) {
        name = <span class="hl-string">'repo'</span>
        addIvyPattern <span class="hl-string">"$projectDir/repo/[organisation]/[module]-ivy-[revision].xml"</span>
        addArtifactPattern <span class="hl-string">"$projectDir/repo/[organisation]/[module]-[revision](-[classifier]).[ext]"</span>
        descriptor = <span class="hl-string">'optional'</span>
        checkmodified = true
    }
}</pre></div></div><br class="example-break"><p>An overview of which Resolvers are offered by Ivy and thus also by Gradle can be found
                <a class="ulink" href="http://ant.apache.org/ivy/history/latest-milestone/settings/resolvers.html" target="_top">here</a>. With
                Gradle you just don't configure them via XML but directly via their API.
            </p></div></div><div class="section" title="28.6.&nbsp;Strategies for transitive dependency management"><div class="titlepage"><div><div><h2 class="title"><a name="sec:strategies_of_transitive_dependency_management"></a>28.6.&nbsp;Strategies for transitive dependency management</h2></div></div></div><p>Many projects rely on the <a class="ulink" href="http://repo1.maven.org/maven2" target="_top">Maven2 repository</a>. This is not
            without problems.
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>The IBibilio repository can be down or has a very long response time.
                </p></li><li class="listitem"><p>The <code class="literal">pom.xml</code>'s of many projects have wrong information (as one example, the pom of
                    <code class="literal">commons-httpclient-3.0</code> declares JUnit as a runtime dependency).
                </p></li><li class="listitem"><p>For many projects there is not one right set of dependencies (as more or less imposed by the
                    <code class="literal">pom</code>
                    format).
                </p></li></ul></div><p>If your project relies on the IBibilio repository you are likely to need an additional custom repository,
            because:
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>You might need dependencies that are not uploaded to IBibilio yet.
                </p></li><li class="listitem"><p>You want to deal properly with wrong metadata in a IBibilio <code class="literal">pom.xml</code>.
                </p></li><li class="listitem"><p>You don't want to expose people who want to build your project, to the
                    downtimes or sometimes very long response times of IBibilio.
                </p></li></ul></div><p>It is not a big deal to set-up a custom repository.
            <sup>[<a href="#ftn.N12EF5" name="N12EF5" class="footnote">23</a>]</sup>
            But it can be tedious, to keep it up to date. For a new version, you have always to create the new XML
            descriptor and the directories. And your custom repository is another infrastructure element which might
            have downtimes and needs to be updated. To enable historical builds, you need to keep all the past
            libraries and you need a backup. It is another layer of indirection. Another source of information
            you have to lookup. All this is not really a big deal but in its sum it has an impact. Repository Manager like
            Artifactory or Nexus make this easier. But for example open source projects don't usually have a host for those products.
        </p><p>This is a reason why some projects prefer to store their libraries in their version control system. This
            approach is fully supported by Gradle. The libraries can be stored in a flat directory without any XML module
            descriptor files.  Yet Gradle offers complete transitive dependency management. You can use either client module
            dependencies to express the dependency relations, or artifact dependencies in case a first level dependency has no
            transitive dependencies. People can check out such a project from svn and have everything necessary to build it.
        </p><p>If you are working with a distributed version control system like Git you probably don't want to
        use the version control system to store libraries as people check out the whole history. But even here the flexibility
        of Gradle can make your life easier. For example you can use a shared flat directory without XML descriptors and
        yet you can have full transitive dependency management as described above.</p><p>You could also have a mixed strategy. If your main concern is bad metadata in the <code class="literal">pom.xml</code> and maintaining
            custom XML descriptors,
            <span class="emphasis"><em>Client Modules</em></span>
            offer an alternative. But you can of course still use Maven2 repo and your custom repository as a
            repository for
            <span class="emphasis"><em>jars only</em></span>
            and still enjoy
            <span class="emphasis"><em>transitive</em></span>
            dependency management. Or you can only provide client modules for pom's with bad metadata. For the
            jars and the correct pom's you still use the remote repository.
        </p><div class="section" title="28.6.1.&nbsp;Implicit transitive dependencies"><div class="titlepage"><div><div><h3 class="title"><a name="sub:implicit_transitive_dependencies"></a>28.6.1.&nbsp;Implicit transitive dependencies</h3></div></div></div><p>There is another way to deal with transitive dependencies
                <span class="emphasis"><em>without</em></span>
                XML descriptor files. You can do this with Gradle, but we don't recommend it. We mention it for the sake
                of completeness and comparison with other build tools.
            </p><p>The trick is to use only artifact dependencies and group them in lists. That way you have somehow
                expressed, what are your first level dependencies and what are transitive dependencies (see
                <a class="xref" href="#para:notation_collections">Section&nbsp;28.3.7, &ldquo;Optional attributes&rdquo;</a>).
                But the draw-back is, that for the Gradle dependency management all dependencies are considered first level dependencies. The
                dependency reports don't show your real dependency graph and the
                <code class="literal">compile</code>
                task uses all dependencies, not just the first level dependencies. All in all, your build is less
                maintainable and reliable than it could be when using client modules. And you don't gain anything.
            </p></div></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N12BD0" name="ftn.N12BD0" class="para">19</a>] </sup>JSR 294: Improved Modularity Support in the JavaTM Programming Language, <a class="ulink" href="http://jcp.org/en/jsr/detail?id=294" target="_top">http://jcp.org/en/jsr/detail?id=294</a>
                    </p></div><div class="footnote"><p><sup>[<a href="#N12C25" name="ftn.N12C25" class="para">20</a>] </sup>Gradle supports partial multiproject builds (see<a class="xref" href="#multi_project_builds" title="Chapter&nbsp;31.&nbsp;Multi-project Builds">Chapter&nbsp;31, <i>Multi-project Builds</i></a>).
                        </p></div><div class="footnote"><p><sup>[<a href="#N12C45" name="ftn.N12C45" class="para">21</a>] </sup>
                            <a class="ulink" href="http://www.sonatype.com/books/maven-book/reference/pom-relationships-sect-project-relationships.html" target="_top">http://www.sonatype.com/books/maven-book/reference/pom-relationships-sect-project-relationships.html</a>
                        </p></div><div class="footnote"><p><sup>[<a href="#N12EAA" name="ftn.N12EAA" class="para">22</a>] </sup>At
                        <a class="ulink" href="http://ant.apache.org/ivy/history/latest-milestone/concept.html" target="_top">http://ant.apache.org/ivy/history/latest-milestone/concept.html</a>
                        you can learn more about ivy patterns.
                    </p></div><div class="footnote"><p><sup>[<a href="#N12EF5" name="ftn.N12EF5" class="para">23</a>] </sup>If you want to shield your project from the downtimes of IBibilio things get more complicated. You
                    probably want to set-up a repository proxy for this. In an enterprise environment this is rather
                    common. For an open source project it looks like overkill.
                </p></div></div></div><div class="chapter" title="Chapter&nbsp;29.&nbsp;Artifact Management"><div class="titlepage"><div><div><h1><a name="artifact_management"></a>Chapter&nbsp;29.&nbsp;Artifact Management</h1></div></div></div><div class="section" title="29.1.&nbsp;Introduction"><div class="titlepage"><div><div><h2 class="title"><a name="N12F22"></a>29.1.&nbsp;Introduction</h2></div></div></div><p>This chapter is about how you declare what are the artifacts of your project and how to work with
            them (e.g. upload them). We define the artifacts of the projects as the files the project want to
            provide to the outside world. This can be a library or a distribution or any other file. Usually artifacts
            are archives, but not necessarily. In the Maven world a project can provide only one artifact. With Gradle
            a project can provide as many artifacts as needed.
        </p></div><div class="section" title="29.2.&nbsp;Artifacts and configurations"><div class="titlepage"><div><div><h2 class="title"><a name="artifacts_and_configurations"></a>29.2.&nbsp;Artifacts and configurations</h2></div></div></div><p>Like dependencies, artifacts are grouped by configurations. In fact, a configuration can contain
            both, artifacts and dependencies, at the same time. To assign an artifact to a configuration, you can write:
        </p><div class="example"><a name="assignArtifact"></a><p class="title"><b>Example&nbsp;29.1.&nbsp;Assignment of an artifact to a configuration</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task myJar(type: Jar)

artifacts {
    archives myJar
}</pre></div></div><br class="example-break"><p>What do you gain by assigning an artifact to a configuration? For each configuration (also for the custom
        ones added by you) Gradle provides the tasks <code class="code">upload[ConfigurationName]</code> and
        <code class="code">build[ConfigurationName]</code>.
        <sup>[<a href="#ftn.N12F41" name="N12F41" class="footnote">24</a>]</sup>
        Execution of these tasks will build or upload the artifacts belonging to
        the respective configuration.
        </p><p>Table <a class="xref" href="#tab:configurations" title="Table&nbsp;18.5.&nbsp;Java plugin - dependency configurations">Table&nbsp;18.5, &ldquo;Java plugin - dependency configurations&rdquo;</a> shows the configurations added by the Java plugin. Two of the
        configurations are relevant for the usage with artifacts. The <code class="code">archives</code> configuration is the standard
        configuration to assign your artifacts to. The Java plugin automatically assigns the default jar to this
        configuration. We will talk more about the <code class="code">default</code> configuration in <a class="xref" href="#project_libraries" title="29.4.&nbsp;More about project libraries">Section&nbsp;29.4, &ldquo;More about project libraries&rdquo;</a>.
            As with dependencies, you can declare as many custom configurations as you like and assign artifacts to them.
        </p><p>It is important to note that the custom archives you are creating as part of your build are not
        automatically assigned to any configuration. You have to explicitly do this assignment.</p></div><div class="section" title="29.3.&nbsp;Uploading artifacts"><div class="titlepage"><div><div><h2 class="title"><a name="N12F55"></a>29.3.&nbsp;Uploading artifacts</h2></div></div></div><p>We have said that there is a specific upload task for each configuration. But before you can do an upload,
            you have to configure the upload task and define where to upload. The repositories you have defined (as described
            in <a class="xref" href="#sec:repositories" title="28.5.&nbsp;Repositories">Section&nbsp;28.5, &ldquo;Repositories&rdquo;</a>) are not automatically used for uploading. In fact, some of those repositories allow only for artifacts downloading.
            Here is an example how
            you can configure the upload task of a configuration:
        </p><div class="example"><a name="uploading"></a><p class="title"><b>Example&nbsp;29.2.&nbsp;Configuration of the upload task</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">repositories {
    flatDir(name: <span class="hl-string">'fileRepo'</span>, dirs: <span class="hl-string">"$projectDir/repo"</span>)
}

uploadArchives {
    uploadDescriptor = false
    repositories {
        add project.repositories.fileRepo
        add(<span class="hl-keyword">new</span> org.apache.ivy.plugins.resolver.SshResolver()) {
            name = <span class="hl-string">'sshRepo'</span>
            user = <span class="hl-string">'username'</span>
            userPassword = <span class="hl-string">'pw'</span>
            host = <span class="hl-string">"http://repo.mycompany.com"</span>
        }
    }
}</pre></div></div><br class="example-break"><p>As you can see, you can either use a reference to an existing repository or create a new repository.
        As described in <a class="xref" href="#sub:more_about_ivy_resolvers" title="28.5.6.&nbsp;More about Ivy resolvers">Section&nbsp;28.5.6, &ldquo;More about Ivy resolvers&rdquo;</a>, you can use all the Ivy resolvers suitable
        for the purpose of uploading.</p><p>Uploading to a Maven repository is described in <a class="xref" href="#uploading_to_maven_repositories" title="29.5.&nbsp;Interacting with Maven repositories">Section&nbsp;29.5, &ldquo;Interacting with Maven repositories&rdquo;</a>.</p></div><div class="section" title="29.4.&nbsp;More about project libraries"><div class="titlepage"><div><div><h2 class="title"><a name="project_libraries"></a>29.4.&nbsp;More about project libraries</h2></div></div></div><p>If your project is supposed to be used as a library, you need to define what are the artifacts of this library
            and what are the dependencies of these artifacts. The Java plugin adds a <code class="code">default</code> configuration for
            this purpose. This configuration extends both the <code class="code">archives</code> and the <code class="code">runtime</code> configuration,
            with the implicit assumption that the <code class="code">runtime</code> dependencies are the dependencies of the <code class="code">archives</code>
            configuration. Of course this is fully customizable. You can add your own custom configuration or let the the
            existing configurations extends from other configurations. You might have different group of artifacts which have
            a different set of dependencies. This mechanism is very powerful and flexible.
            </p><p>If someone wants to use your project as a library, she simply needs to declare on which configuration of
            the dependency to depend on.
            A Gradle dependency offers the <code class="code">configuration</code> property to declare this. If this
            is not specified, the <code class="code">default</code> configuration is used (see <a class="xref" href="#sec:dependency_configurations" title="28.3.8.&nbsp;Dependency configurations">Section&nbsp;28.3.8, &ldquo;Dependency configurations&rdquo;</a>).
            Using your project as a library
            can either happen from within a multi-project build or by retrieving your project from a repository. In
            the latter case, an ivy.xml descriptor in the repository is supposed to contain all the neccesary information. If you
            work with Maven repositories you don't have the flexibility as described above. For how to publish to a Maven
            repository, see the section <a class="xref" href="#uploading_to_maven_repositories" title="29.5.&nbsp;Interacting with Maven repositories">Section&nbsp;29.5, &ldquo;Interacting with Maven repositories&rdquo;</a>.
        </p></div><div class="section" title="29.5.&nbsp;Interacting with Maven repositories"><div class="titlepage"><div><div><h2 class="title"><a name="uploading_to_maven_repositories"></a>29.5.&nbsp;Interacting with Maven repositories</h2></div></div></div><div class="section" title="29.5.1.&nbsp;Introduction"><div class="titlepage"><div><div><h3 class="title"><a name="sec:introduction"></a>29.5.1.&nbsp;Introduction</h3></div></div></div><p>With Gradle you can deploy to remote Maven repositories or install to your local Maven repository. This
                includes all Maven metadata manipulation and works also for Maven snapshots. In fact, Gradle's deployment is
                100 percent Maven compatible as we use the native Maven Ant tasks under the hood.
            </p><p>Deploying to a Maven repository is only half the fun if you don't have a pom. Fortunately Gradle can
                generate this pom for you using the dependency information it has.
            </p></div><div class="section" title="29.5.2.&nbsp;Deploying to a Maven repository"><div class="titlepage"><div><div><h3 class="title"><a name="sec:deploying_to_a_maven_repository"></a>29.5.2.&nbsp;Deploying to a Maven repository</h3></div></div></div><p>Let's assume your project produces just the default jar file. Now you want to deploy this jar file to
                a remote Maven repository.
            </p><div class="example"><a name="uploadFile"></a><p class="title"><b>Example&nbsp;29.3.&nbsp;Upload of file to remote Maven repository</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">usePlugin <span class="hl-string">'maven'</span>

uploadArchives {
    repositories.mavenDeployer {
        repository(url: <span class="hl-string">"file://localhost/tmp/myRepo/"</span>)
    }
}</pre></div></div><br class="example-break"><p>That is all. Calling the
                <code class="literal">uploadArchives</code>
                task will generate the pom and deploys the artifact and the pom to the specified repository. 
            </p><p>There is some more work to do if you need support for other protocols than <code class="literal">file</code>. In
                this case the native Maven code we delegate to needs additional libraries. Which libraries depend on the
                protocol you need. The available protocols and the corresponding libraries are listed in <a class="xref" href="#wagonLibs" title="Table&nbsp;29.1.&nbsp;Protocol jars for Maven deployment">Table&nbsp;29.1, &ldquo;Protocol jars for Maven deployment&rdquo;</a> (those libraries have again transitive dependencies which have transitive
                dependencies).
                <sup>[<a href="#ftn.N12FC1" name="N12FC1" class="footnote">25</a>]</sup>
                For example to use the ssh protocol you can do:
            </p><div class="example"><a name="uploadWithSsh"></a><p class="title"><b>Example&nbsp;29.4.&nbsp;Upload of file via SSH</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">configurations {
    deployerJars
}

repositories {
    mavenCentral()
}

dependencies {
    deployerJars <span class="hl-string">"org.apache.maven.wagon:wagon-ssh:1.0-beta-2"</span>
}

uploadArchives {
    repositories.mavenDeployer {
        name = <span class="hl-string">'sshDeployer'</span> <span class="hl-comment">// optional</span>
        configuration = configurations.deployerJars
        repository(url: <span class="hl-string">"scp://repos.mycompany.com/releases"</span>) {
            authentication(userName: <span class="hl-string">"me"</span>, password: <span class="hl-string">"myPassword"</span>)
        }
    }
}</pre></div></div><br class="example-break"><p>There are many configuration options for the Maven deployer. The configuration is done via a Groovy builder.
                All the elements of this tree are Java beans. To configure the simple attributes you pass a map to the bean
                elements. To add another bean elements to its parent, you use a closure. In the example above <span class="emphasis"><em>repository</em></span>
                and <span class="emphasis"><em>authentication</em></span> are such bean elements. <a class="xref" href="#deployerConfig" title="Table&nbsp;29.2.&nbsp;Configuration elements of the MavenDeployer">Table&nbsp;29.2, &ldquo;Configuration elements of the MavenDeployer&rdquo;</a>
                lists the available bean elements and a link to the javadoc of the corresponding class. In the javadoc you
                can see the possible attributes you can set for a particular element.
            </p><p>In Maven you can define repositories and optionally snapshot repositories. If no snapshot repository
                is defined, releases and snapshots are both deployed to the
                <code class="literal">repository</code>
                element. Otherwise snapshots are deployed to the
                <code class="literal">snapshotRepository</code>
                element.
            </p><div class="table"><p class="title"><b>Table&nbsp;29.1.&nbsp;Protocol jars for Maven deployment</b></p><div class="table-contents"><table id="wagonLibs"><thead><tr>
                        <td>Protocol</td>
                        <td>Library</td>
                    </tr></thead><tr>
                    <td>http</td>
                    <td>org.apache.maven.wagon:wagon-http:1.0-beta-2</td>
                </tr><tr>
                    <td>ssh</td>
                    <td>org.apache.maven.wagon:wagon-ssh:1.0-beta-2</td>
                </tr><tr>
                    <td>ssh-external</td>
                    <td>org.apache.maven.wagon:wagon-ssh-external:1.0-beta-2</td>
                </tr><tr>
                    <td>scp</td>
                    <td>org.apache.maven.wagon:wagon-scp:1.0-beta-2</td>
                </tr><tr>
                    <td>ftp</td>
                    <td>org.apache.maven.wagon:wagon-ftp:1.0-beta-2</td>
                </tr><tr>
                    <td>webdav</td>
                    <td>org.apache.maven.wagon:wagon-webdav:1.0-beta-2</td>
                </tr><tr>
                    <td>file</td>
                    <td>-</td>
                </tr></table></div></div><div class="table"><p class="title"><b>Table&nbsp;29.2.&nbsp;Configuration elements of the MavenDeployer</b></p><div class="table-contents"><table id="deployerConfig"><thead><tr>
                        <td>Element</td>
                        <td>Javadoc</td>
                    </tr></thead><tr>
                    <td>root</td>
                    <td>
                        <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/artifacts/maven/MavenDeployer.html" target="_top">
                <code class="classname">MavenDeployer</code>
              </a>
                    </td>
                </tr><tr>
                    <td>repository</td>
                    <td>
                        <a class="ulink" href="http://maven.apache.org/ant-tasks/apidocs/org/apache/maven/artifact/ant/RemoteRepository.html" target="_top">
                            org.apache.maven.artifact.ant.RemoteRepository
                        </a>
                    </td>
                </tr><tr>
                    <td>authentication</td>
                    <td>
                        <a class="ulink" href="http://maven.apache.org/ant-tasks/apidocs/org/apache/maven/artifact/ant/Authentication.html" target="_top">
                            org.apache.maven.artifact.ant.Authentication
                        </a>
                    </td>
                </tr><tr>
                    <td>releases</td>
                    <td>
                        <a class="ulink" href="http://maven.apache.org/ant-tasks/apidocs/org/apache/maven/artifact/ant/RepositoryPolicy.html" target="_top">
                            org.apache.maven.artifact.ant.RepositoryPolicy
                        </a>
                    </td>
                </tr><tr>
                    <td>snapshots</td>
                    <td>
                        <a class="ulink" href="http://maven.apache.org/ant-tasks/apidocs/org/apache/maven/artifact/ant/RepositoryPolicy.html" target="_top">
                            org.apache.maven.artifact.ant.RepositoryPolicy
                        </a>
                    </td>
                </tr><tr>
                    <td>proxy</td>
                    <td>
                        <a class="ulink" href="http://maven.apache.org/ant-tasks/apidocs/org/apache/maven/artifact/ant/Proxy.html" target="_top">
                            org.apache.maven.artifact.ant.Proxy
                        </a>
                    </td>
                </tr><tr>
                    <td>snapshotRepository</td>
                    <td>
                        <a class="ulink" href="http://maven.apache.org/ant-tasks/apidocs/org/apache/maven/artifact/ant/RemoteRepository.html" target="_top">
                            org.apache.maven.artifact.ant.RemoteRepository
                        </a>
                    </td>
                </tr></table></div></div></div><div class="section" title="29.5.3.&nbsp;Installing to the local repository"><div class="titlepage"><div><div><h3 class="title"><a name="sub:installing_to_the_local_repository"></a>29.5.3.&nbsp;Installing to the local repository</h3></div></div></div><p>The Maven plugin adds an <code class="literal">install</code> task to your project. This task depends on all the archives
                task of the <code class="literal">archives</code> configuration. It installs those archives to your local Maven repository.
                If the default location for the local repository is redefined in a Maven <code class="literal">settings.xml</code>, this is
                considered by this task.
            </p></div><div class="section" title="29.5.4.&nbsp;Maven Pom generation"><div class="titlepage"><div><div><h3 class="title"><a name="sec:maven_pom_generation"></a>29.5.4.&nbsp;Maven Pom generation</h3></div></div></div><p>The Maven Poms are automatically generated by Gradle. You can find the generated poms in the directory
                <code class="literal">&lt;buildDir&gt;/poms</code>. In many scenarios it just works and you don't have to do anything.
                But there are situations were you want or have to customize the pom generation.
            </p><div class="section" title="29.5.4.1.&nbsp;Changing non-dependency elements of the pom"><div class="titlepage"><div><div><h4 class="title"><a name="sub:changing_non_dependency_elements_of_the_pom"></a>29.5.4.1.&nbsp;Changing non-dependency elements of the pom</h4></div></div></div><p>You might want the artifact deployed to the maven repository to have a different version or name than
                    the artifact generated by Gradle. To customize these you can do:
                </p><div class="example"><a name="customizePom"></a><p class="title"><b>Example&nbsp;29.5.&nbsp;Customization of pom</b></p><div class="example-contents"><p>
              <code class="filename">build.gradle</code>
            </p><pre class="programlisting">uploadArchives {
    repositories.mavenDeployer {
        repository(url: <span class="hl-string">"file://localhost/tmp/myRepo/"</span>)
        pom.version = <span class="hl-string">'1.0Maven'</span>
        pom.artifactId = <span class="hl-string">'myMavenName'</span>
    }
}</pre></div></div><br class="example-break"><p>To learn about all the customizable attributes of a pom have a look here: <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/artifacts/maven/MavenPom.html" target="_top">
              <code class="classname">MavenPom</code>
            </a>.
                    If you have more than one artifact to publish, things work differently. See <a class="xref" href="#sub:multiple_artifacts_per_project" title="29.5.4.2.&nbsp;Multiple artifacts per project">Section&nbsp;29.5.4.2, &ldquo;Multiple artifacts per project&rdquo;</a>. 
                </p><p>To customize the settings for the Maven installer (see <a class="xref" href="#sub:installing_to_the_local_repository" title="29.5.3.&nbsp;Installing to the local repository">Section&nbsp;29.5.3, &ldquo;Installing to the local repository&rdquo;</a>), you can do:
                </p><div class="example"><a name="customizeInstaller"></a><p class="title"><b>Example&nbsp;29.6.&nbsp;Customization of Maven installer</b></p><div class="example-contents"><p>
              <code class="filename">build.gradle</code>
            </p><pre class="programlisting">configure(install.repositories.mavenInstaller) {
    pom.version = <span class="hl-string">'1.0Maven'</span>
    pom.artifactId = <span class="hl-string">'myName'</span>
}</pre></div></div><br class="example-break"></div><div class="section" title="29.5.4.2.&nbsp;Multiple artifacts per project"><div class="titlepage"><div><div><h4 class="title"><a name="sub:multiple_artifacts_per_project"></a>29.5.4.2.&nbsp;Multiple artifacts per project</h4></div></div></div><p>Maven can only deal with one artifact per project. This is reflected in the structure of the
                    Maven pom. We think there are many situations where it makes sense to have more than one artifact per
                    project. In such a case you need to generate multiple poms. In such a case you have to explicitly declare each artifact
                    you want to publish to a Maven repository. The <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/artifacts/maven/MavenDeployer.html" target="_top">
              <code class="classname">MavenDeployer</code>
            </a> and the MavenInstaller
                    both provide an API for this:
                </p><div class="example"><a name="multiplePoms"></a><p class="title"><b>Example&nbsp;29.7.&nbsp;Generation of multiple poms</b></p><div class="example-contents"><p>
              <code class="filename">build.gradle</code>
            </p><pre class="programlisting">uploadArchives {
    repositories.mavenDeployer {
        repository(url: <span class="hl-string">"file://localhost/tmp/myRepo/"</span>)
        addFilter(<span class="hl-string">'api'</span>) { artifact, file -&gt;
            artifact.name == <span class="hl-string">'api'</span>
        }
        addFilter(<span class="hl-string">'service'</span>) { artifact, file -&gt;
            artifact.name == <span class="hl-string">'service'</span>
        }
        pom(<span class="hl-string">'api'</span>).version = <span class="hl-string">'mySpecialMavenVersion'</span>
    }
}</pre></div></div><br class="example-break"><p>You need to declare a filter for each artifact you want to publish. This filter defines a boolean expression for
                    which Gradle artifact it accepts. Each filter has a pom associated with it which you can configure. 
                    To learn more about this have a look at <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/artifacts/maven/GroovyPomFilterContainer.html" target="_top">
              <code class="classname">GroovyPomFilterContainer</code>
            </a>
                    and its associated classes.
                </p></div><div class="section" title="29.5.4.3.&nbsp;Dependency mapping"><div class="titlepage"><div><div><h4 class="title"><a name="sub:dependency_mapping"></a>29.5.4.3.&nbsp;Dependency mapping</h4></div></div></div><p>The Maven plugin configures the default mapping between the Gradle configurations added by the
                    Java and War plugin and the Maven scopes. Most
                    of the time you don't need to touch this and you can safely skip this section. The mapping
                    works like the following. You can map a configuration to one and only one scope. Different
                    configurations can be mapped to one or different scopes. One can assign also a priority to a particular
                    configuration-to-scope mapping. Have a look at
                    <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/artifacts/maven/Conf2ScopeMappingContainer.html" target="_top">
              <code class="classname">Conf2ScopeMappingContainer</code>
            </a>
                    to learn more. To access the mapping configuration you can say:
                </p><div class="example"><a name="mappings"></a><p class="title"><b>Example&nbsp;29.8.&nbsp;Accessing a mapping configuration</b></p><div class="example-contents"><p>
              <code class="filename">build.gradle</code>
            </p><pre class="programlisting">task mappings &lt;&lt; {
    println conf2ScopeMappings.mappings
}</pre></div></div><br class="example-break"><p>Gradle exclude rules are converted to Maven excludes if possible. Such a conversion is possible if in
                    the Gradle exclude rule the group as well as the module name is specified (as Maven needs both in
                    contrast to Ivy). Right now excludes-per-configuration are not converted to the Maven Pom.
                </p></div><div class="section" title="29.5.4.4.&nbsp;Planned future features"><div class="titlepage"><div><div><h4 class="title"><a name="sub:planned_future_features"></a>29.5.4.4.&nbsp;Planned future features</h4></div></div></div><p>We plan support for excludes-per-configuration. We also plan support for the new Ivy
                    <span class="emphasis"><em>override</em></span>
                    element, which corresponds to the
                    <span class="emphasis"><em>dependencyManagement</em></span>
                    element of a Maven pom. Last but not least we want to make the customization more powerful, by enabling
                    to add custom dependency elements to the pom and remove/modify auto-generated ones.
                </p></div></div></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N12F41" name="ftn.N12F41" class="para">24</a>] </sup>To be exact, the Base plugin provides those tasks. The BasePlugin is automatically applied, if you use
        the Java plugin.</p></div><div class="footnote"><p><sup>[<a href="#N12FC1" name="ftn.N12FC1" class="para">25</a>] </sup>It is planned for a future release to provide out-of-the-box support for this
                    </p></div></div></div><div class="chapter" title="Chapter&nbsp;30.&nbsp;The Build Lifecycle"><div class="titlepage"><div><div><h1><a name="build_lifecycle"></a>Chapter&nbsp;30.&nbsp;The Build Lifecycle</h1></div></div></div><p>We said earlier, that the core of Gradle is a language for dependency based programming. In Gradle terms this
        means that you can define tasks and dependencies between tasks. Gradle guarantees that these tasks are executed
        in the order of their dependencies, and that each task is executed only once. Those tasks form a
        <a class="ulink" href="http://en.wikipedia.org/wiki/Directed_acyclic_graph" target="_top">Directed Acyclic Graph</a>. There are
        build tools that build up such a dependency graph as they execute their tasks. Gradle builds the complete
        dependency graph <span class="emphasis"><em>before</em></span> any task is executed. This lies at the heart of Gradle and makes
        many things possible which would not be possible otherwise.
    </p><p>Your build scripts configure this dependency graph. Therefore they are strictly speaking <span class="emphasis"><em>build
        configuration scripts</em></span>.
    </p><div class="section" title="30.1.&nbsp;Build phases"><div class="titlepage"><div><div><h2 class="title"><a name="sec:build_phases"></a>30.1.&nbsp;Build phases</h2></div></div></div><p>A Gradle build has three distinct phases.
        </p><div class="variablelist"><dl><dt><span class="term">Initialization</span></dt><dd><p>Gradle supports single and multi-project builds. During the initialization phase, Gradle
                        determines which projects are going to take part in the build, and creates a
                        <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/Project.html" target="_top">
                <code class="classname">Project</code>
              </a> instance for each of these projects.
                    </p></dd><dt><span class="term">Configuration</span></dt><dd><p>The build scripts of <span class="emphasis"><em>all</em></span> projects which are part of the build are
                        executed. This configures the project objects.
                    </p></dd><dt><span class="term">Execution</span></dt><dd><p>Gradle determines the subset of the tasks, created and configured during the configuration
                        phase, to be executed. The subset is determined by the task name arguments passed to the
                        <span class="command"><strong>gradle</strong></span> command and the current directory. Gradle then executes each of the
                        selected tasks.
                    </p></dd></dl></div></div><div class="section" title="30.2.&nbsp;Settings file"><div class="titlepage"><div><div><h2 class="title"><a name="sec:settings_file"></a>30.2.&nbsp;Settings file</h2></div></div></div><p>Beside the build script files, Gradle defines a settings file. The settings file is determined by Gradle
            via a naming convention. The default name for this file is <code class="filename">settings.gradle</code>. Later in
            this chapter we explain, how Gradle looks for a settings file.
        </p><p>The settings file gets executed during the initialization phase. A multiproject build must have a
            <code class="filename">settings.gradle</code>
            file in the root project of the multiproject hierarchy. It is required because in the
            settings file it is defined, which projects are taking part in the multi-project build (see
            <a class="xref" href="#multi_project_builds" title="Chapter&nbsp;31.&nbsp;Multi-project Builds">Chapter&nbsp;31, <i>Multi-project Builds</i></a>). For a single-project build, a settings file is optional.
            You might need it for example, to add libraries to your build script classpath (see <a class="xref" href="#organizing_build_logic" title="Chapter&nbsp;34.&nbsp;Organizing Build Logic">Chapter&nbsp;34, <i>Organizing Build Logic</i></a>). Let's first do some introspection with a single project
            build:
        </p><div class="example"><a name="buildlifecycle"></a><p class="title"><b>Example&nbsp;30.1.&nbsp;Single project build</b></p><div class="example-contents"><p>
          <code class="filename">settings.gradle</code>
        </p><pre class="programlisting">println <span class="hl-string">'This is executed during the initialization phase.'</span></pre><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">println <span class="hl-string">'This is executed during the configuration phase.'</span>

task configured {
    println <span class="hl-string">'This is also executed during the configuration phase.'</span>
}

task test &lt;&lt; {
    println <span class="hl-string">'This is executed during the execution phase.'</span>
}</pre><p>Output of <strong class="userinput"><code>gradle test</code></strong>
        </p><pre class="screen">&gt; gradle test
This is executed during the initialization phase.
This is executed during the configuration phase.
This is also executed during the configuration phase.
:test
This is executed during the execution phase.

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>For a build script, the property access and method calls are delegated to a project object. Similarly
            property access and method calls within the settings file is delegated to a settings object. Have a look at
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/initialization/Settings.html" target="_top">
          <code class="classname">Settings</code>
        </a>.
        </p></div><div class="section" title="30.3.&nbsp;Multi-project builds"><div class="titlepage"><div><div><h2 class="title"><a name="sec:multi_project_builds"></a>30.3.&nbsp;Multi-project builds</h2></div></div></div><p>A multi-project build is a build where you build more than one project during a single execution of
            Gradle. You have to declare the projects taking part in the multiproject build in the settings file. There
            is much more to say about multi-project builds in the chapter dedicated to this topic (see <a class="xref" href="#multi_project_builds" title="Chapter&nbsp;31.&nbsp;Multi-project Builds">Chapter&nbsp;31, <i>Multi-project Builds</i></a>).
        </p><div class="section" title="30.3.1.&nbsp;Project locations"><div class="titlepage"><div><div><h3 class="title"><a name="sub:project_locations"></a>30.3.1.&nbsp;Project locations</h3></div></div></div><p>Multi-project builds are always represented by a tree with a single root. Each element in the tree
                represent a project. A project has a virtual and a physical path. The virtual path denotes the position
                of the project in the multi-project build tree. The project tree is created in the
                <code class="filename">settings.gradle</code> file. By default it is assumed that the location of the settings
                file is also the location of the root project. But you can redefine the location of the root project
                in the settings file.
            </p></div><div class="section" title="30.3.2.&nbsp;Building the tree"><div class="titlepage"><div><div><h3 class="title"><a name="sub:building_the_tree"></a>30.3.2.&nbsp;Building the tree</h3></div></div></div><p>In the settings file you can use a set of methods to build the project tree. Hierarchical and flat
                physical layouts get special support.
            </p><div class="section" title="30.3.2.1.&nbsp;Hierarchical layouts"><div class="titlepage"><div><div><h4 class="title"><a name="N131A7"></a>30.3.2.1.&nbsp;Hierarchical layouts</h4></div></div></div><div class="example"><a name="standardLayouts"></a><p class="title"><b>Example&nbsp;30.2.&nbsp;Hierarchical layout</b></p><div class="example-contents"><p>
              <code class="filename">settings.gradle</code>
            </p><pre class="programlisting">include <span class="hl-string">'project1'</span>, <span class="hl-string">'project2'</span>, <span class="hl-string">'project2:child1'</span></pre></div></div><br class="example-break"><p>The <code class="literal">include</code> method takes as an argument a relative virtual path to the root
                    project. This relative virtual path is assumed to be equals to the relative physical path of the
                    subproject to the root project. You only need to specify the leafs of the tree. Each parent path of
                    the leaf project is assumed to be another subproject which obeys to the physical path assumption
                    described above.
                </p></div><div class="section" title="30.3.2.2.&nbsp;Flat layouts"><div class="titlepage"><div><div><h4 class="title"><a name="N131BB"></a>30.3.2.2.&nbsp;Flat layouts</h4></div></div></div><div class="example"><a name="standardLayouts"></a><p class="title"><b>Example&nbsp;30.3.&nbsp;Flat layout</b></p><div class="example-contents"><p>
              <code class="filename">settings.gradle</code>
            </p><pre class="programlisting">includeFlat <span class="hl-string">'project3'</span>, <span class="hl-string">'project4'</span></pre></div></div><br class="example-break"><p>The <code class="literal">includeFlat</code> method takes directory names as an argument. Those directories
                    need to exist at the same level as the root project directory. The location of those directories
                    are considered as child projects of the root project in the virtual multi-project tree.
                </p></div></div><div class="section" title="30.3.3.&nbsp;Modifying elements of the project tree"><div class="titlepage"><div><div><h3 class="title"><a name="sub:modifying_element_of_the_project_tree"></a>30.3.3.&nbsp;Modifying elements of the project tree</h3></div></div></div><p>The multi-project tree created in the settings file is made up of so called <em class="firstterm">project descriptors</em>.
                You can modify these descriptors in the settings file at any time. To access a descriptor you can do:
            </p><div class="example"><a name="customLayout"></a><p class="title"><b>Example&nbsp;30.4.&nbsp;Modification of elements of the project tree</b></p><div class="example-contents"><p>
            <code class="filename">settings.gradle</code>
          </p><pre class="programlisting">println rootProject.name
println project(<span class="hl-string">':projectA'</span>).name</pre></div></div><br class="example-break"><p>Using this descriptor you can change the name, project directory and build file of a project.
            </p><div class="example"><a name="customLayout"></a><p class="title"><b>Example&nbsp;30.5.&nbsp;Modification of elements of the project tree</b></p><div class="example-contents"><p>
            <code class="filename">settings.gradle</code>
          </p><pre class="programlisting">rootProject.name = <span class="hl-string">'main'</span>
project(<span class="hl-string">':projectA'</span>).projectDir = <span class="hl-keyword">new</span> File(settingsDir, <span class="hl-string">'../my-project-a'</span>)
project(<span class="hl-string">':projectA'</span>).buildFileName = <span class="hl-string">'projectA.gradle'</span></pre></div></div><br class="example-break"><p>Have a look at <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/initialization/ProjectDescriptor.html" target="_top">
            <code class="classname">ProjectDescriptor</code>
          </a> for more details.</p></div></div><div class="section" title="30.4.&nbsp;Initialization"><div class="titlepage"><div><div><h2 class="title"><a name="sec:initialization"></a>30.4.&nbsp;Initialization</h2></div></div></div><p>How does Gradle know whether to do a single or multiproject build? If you trigger a multiproject build
            from the directory where the settings file is, things are easy. But Gradle also allows you to execute the
            build from within any subproject taking part in the build.
            <sup>[<a href="#ftn.N13201" name="N13201" class="footnote">26</a>]</sup>
            If you execute Gradle from within a project that has no <code class="filename">settings.gradle</code> file,
            Gradle does the following:
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>It searches for a <code class="filename">settings.gradle</code> in a directory called <code class="filename">master</code>
                    which has the same nesting level as the current dir.
                </p></li><li class="listitem"><p>If no <code class="filename">settings.gradle</code> is found, it searches the parent directories for the existence of a
                    <code class="filename">settings.gradle</code> file.
                </p></li><li class="listitem"><p>If no <code class="filename">settings.gradle</code> file is found, the build is executed as a single project build.
                </p></li><li class="listitem"><p>If a <code class="filename">settings.gradle</code> file is found, Gradle checks if the current project is part of the
                    multiproject hierarchy defined in the found <code class="filename">settings.gradle</code> file. If not, the build is executed as a
                    single project build. Otherwise a multiproject build is executed.
                </p></li></ul></div><p>What is the purpose of this behavior? Somehow Gradle has to find out, whether the project you are into, is
            a subproject of a multiproject build or not. Of course, if it is a subproject, only the subproject and its
            dependent projects are build. But Gradle needs to create the build configuration for the whole multiproject
            build (see <a class="xref" href="#multi_project_builds" title="Chapter&nbsp;31.&nbsp;Multi-project Builds">Chapter&nbsp;31, <i>Multi-project Builds</i></a>). Via the <code class="option">-u</code>
            command line option, you can tell Gradle not to look in the parent hierarchy for a <code class="filename">settings.gradle</code> file. The
            current project is then always build as a single project build. If the current project contains a
            <code class="filename">settings.gradle</code> file, the <code class="option">-u</code> option has no meaning. Such a build is always executed as:
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>a single project build, if the <code class="filename">settings.gradle</code> file does not define a multiproject hierarchy
                </p></li><li class="listitem"><p>a multiproject build, if the <code class="filename">settings.gradle</code> file does define a multiproject hierarchy.
                </p></li></ul></div><p>The auto search for a settings file does only work for multi-project builds with a physical hierarchical
            or flat layout. For a flat layout you must additionally obey to the naming convention described above.
            Gradle supports arbitrary physical layouts for a multiproject build. But for such arbitrary layouts you need
            to execute the build from the directory where the settings file is located. For how to run partial builds
            from the root see <a class="xref" href="#sec:running_partial_build_from_the_root" title="31.4.&nbsp;Running tasks by their absolute path">Section&nbsp;31.4, &ldquo;Running tasks by their absolute path&rdquo;</a>. In our next release we want to
            enable partial builds from subprojects by specifying the location of the settings file as a command line
            parameter. Gradle creates Project objects for every project taking part in the build. For a single
            project build this is only one project. For a multi-project build these are the projects specified in
            Settings object (plus the root project). Each project object has by default a name equals to the name of its
            top level folder. Every project except the root project has a parent project and might have child projects.
        </p></div><div class="section" title="30.5.&nbsp;Configuration and execution of a single project build"><div class="titlepage"><div><div><h2 class="title"><a name="sec:configuration_and_execution_of_a_single_project_build"></a>30.5.&nbsp;Configuration and execution of a single project build</h2></div></div></div><p>For a single project build, the workflow of the <span class="emphasis"><em>after initialization</em></span>
            phases are pretty simple. The build script is executed against the project object that was created during
            the initialization phase. Then Gradle looks for tasks with names equal to those passed as command line
            arguments. If these task names exist, they are executed as a separate build in the order you have passed
            them. The configuration and execution for multi-project builds is discussed in <a class="xref" href="#multi_project_builds" title="Chapter&nbsp;31.&nbsp;Multi-project Builds">Chapter&nbsp;31, <i>Multi-project Builds</i></a>.
        </p></div><div class="section" title="30.6.&nbsp;Responding to the lifecycle in the build script"><div class="titlepage"><div><div><h2 class="title"><a name="build_lifecycle_events"></a>30.6.&nbsp;Responding to the lifecycle in the build script</h2></div></div></div><p>Your build script can receive notifications as the build progresses through its lifecyle. These
            notifications generally take 2 forms: You can either implement a particular listener interface, or you can
            provide a closure to execute when the notification is fired. The examples below use closures. For details on
            how to use the listener interfaces, refer to the API documentation.
        </p><div class="section" title="30.6.1.&nbsp;Project evaluation"><div class="titlepage"><div><div><h3 class="title"><a name="N13262"></a>30.6.1.&nbsp;Project evaluation</h3></div></div></div><p>You can receive a notification immediately before and after a project is evaluated. This can be used
                to do things like performing additional configuration once all the definitions in a build script have
                been applied, or for some custom logging or profiling.
            </p><p>Below is an example which adds a <code class="literal">test</code> task to each project with the
                <code class="literal">hasTests</code> property set to true.
            </p><div class="example"><a name="projectEvaluateEvents"></a><p class="title"><b>Example&nbsp;30.6.&nbsp;Adding of test task to each project which has certain property set</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">allprojects {
    afterEvaluate { project -&gt;
        <span class="hl-keyword">if</span> (project.hasTests) {
            println <span class="hl-string">"Adding test task to $project"</span>
            project.task(<span class="hl-string">'test'</span>) &lt;&lt; {
                println <span class="hl-string">"Running tests for $project"</span>
            }
        }
    }
}</pre><p>
            <code class="filename">projectA.gradle</code>
          </p><pre class="programlisting">hasTests = true</pre><p>Output of <strong class="userinput"><code>gradle -q test</code></strong>
          </p><pre class="screen">&gt; gradle -q test
Adding test task to project ':projectA'
Running tests for project ':projectA'</pre></div></div><br class="example-break"><p>This example uses method <code class="literal">Project.afterEvaluate()</code> to add a closure which is executed
                after the project is evaluated.</p><p>It is also possible to receive notifications when any project is evaluated. This example performs
                some custom logging of project evaluation. Notice that the <code class="literal">afterProject</code> notification
                is received regardless of whether the project evaluates successfully or fails with an exception.
            </p><div class="example"><a name="buildProjectEvaluateEvents"></a><p class="title"><b>Example&nbsp;30.7.&nbsp;Notifications</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">gradle.afterProject {project, exception -&gt;
    <span class="hl-keyword">if</span> (exception) {
        println <span class="hl-string">"Evaluation of $project FAILED"</span>
    } <span class="hl-keyword">else</span> {
        println <span class="hl-string">"Evaluation of $project succeeded"</span>
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q test</code></strong>
          </p><pre class="screen">&gt; gradle -q test
Evaluation of root project 'buildProjectEvaluateEvents' succeeded
Evaluation of project ':projectA' succeeded
Evaluation of project ':projectB' FAILED</pre></div></div><br class="example-break"><p>You can also add a <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/ProjectEvaluationListener.html" target="_top">
            <code class="classname">ProjectEvaluationListener</code>
          </a> to the
                <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/invocation/Gradle.html" target="_top">
            <code class="classname">Gradle</code>
          </a> to receive these events.
            </p></div><div class="section" title="30.6.2.&nbsp;Task creation"><div class="titlepage"><div><div><h3 class="title"><a name="N132B7"></a>30.6.2.&nbsp;Task creation</h3></div></div></div><p>You can receive a notification immediately after a task is added to a project. This can be used
                to set some default values or add behaviour before the task is made available in the build file.</p><p>The following example sets the <code class="literal">srcDir</code> property of each task as it is created.</p><div class="example"><a name="taskCreationEvents"></a><p class="title"><b>Example&nbsp;30.8.&nbsp;Setting of certain property to all tasks</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">tasks.whenTaskAdded { task -&gt;
    task.srcDir = <span class="hl-string">'src/main/java'</span>
}

task a

println <span class="hl-string">"source dir is $a.srcDir"</span></pre><p>Output of <strong class="userinput"><code>gradle -q a</code></strong>
          </p><pre class="screen">&gt; gradle -q a
source dir is src/main/java</pre></div></div><br class="example-break"><p>You can also add a <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/TaskAction.html" target="_top">
            <code class="classname">TaskAction</code>
          </a> to a
                <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/TaskContainer.html" target="_top">
            <code class="classname">TaskContainer</code>
          </a> to receive these events.</p></div><div class="section" title="30.6.3.&nbsp;Task execution graph ready"><div class="titlepage"><div><div><h3 class="title"><a name="N132E4"></a>30.6.3.&nbsp;Task execution graph ready</h3></div></div></div><p>You can receive a notification immediately after the task execution graph has been populated. We
                have seen this already in <a class="xref" href="#configure-by-dag" title="4.11.&nbsp;Configure by DAG">Section&nbsp;4.11, &ldquo;Configure by DAG&rdquo;</a>.
            </p><p>You can also add a <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/execution/TaskExecutionGraphListener.html" target="_top">
            <code class="classname">TaskExecutionGraphListener</code>
          </a> to the
                <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/execution/TaskExecutionGraph.html" target="_top">
            <code class="classname">TaskExecutionGraph</code>
          </a> to receive these events.
            </p></div><div class="section" title="30.6.4.&nbsp;Task execution"><div class="titlepage"><div><div><h3 class="title"><a name="N132FC"></a>30.6.4.&nbsp;Task execution</h3></div></div></div><p>You can receive a notification immediately before and after any task is executed.</p><p>The following example logs the start and end of each task execution. Notice that the
                <code class="literal">afterTask</code> notification is received regardless of whether the task completes
                successfully or fails with an exception.</p><div class="example"><a name="taskExecutionEvents"></a><p class="title"><b>Example&nbsp;30.9.&nbsp;Logging of start and end of each task execution</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">task ok

task broken(dependsOn: ok) &lt;&lt; {
    <span class="hl-keyword">throw</span> <span class="hl-keyword">new</span> RuntimeException(<span class="hl-string">'broken'</span>)
}

gradle.taskGraph.beforeTask { task -&gt;
    println <span class="hl-string">"executing $task ..."</span>
}

gradle.taskGraph.afterTask { task, exception -&gt;
    <span class="hl-keyword">if</span> (exception) {
        println <span class="hl-string">"FAILED"</span>
    }
    <span class="hl-keyword">else</span> {
        println <span class="hl-string">"done"</span>
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q broken</code></strong>
          </p><pre class="screen">&gt; gradle -q broken
executing task ':ok' ...
done
executing task ':broken' ...
FAILED</pre></div></div><br class="example-break"><p>You can also use a <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/execution/TaskExecutionListener.html" target="_top">
            <code class="classname">TaskExecutionListener</code>
          </a> to the
                <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/execution/TaskExecutionGraph.html" target="_top">
            <code class="classname">TaskExecutionGraph</code>
          </a> to receive these events.
            </p></div></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N13201" name="ftn.N13201" class="para">26</a>] </sup>Gradle supports partial multiproject builds (see <a class="xref" href="#multi_project_builds" title="Chapter&nbsp;31.&nbsp;Multi-project Builds">Chapter&nbsp;31, <i>Multi-project Builds</i></a>).
                </p></div></div></div><div class="chapter" title="Chapter&nbsp;31.&nbsp;Multi-project Builds"><div class="titlepage"><div><div><h1><a name="multi_project_builds"></a>Chapter&nbsp;31.&nbsp;Multi-project Builds</h1></div></div></div><p>The powerful support for multi-project builds is one of Gradle's unique selling points. This topic is also the
        most intellectually challenging.
    </p><div class="section" title="31.1.&nbsp;Cross project configuration"><div class="titlepage"><div><div><h2 class="title"><a name="sec:cross_project_configuration"></a>31.1.&nbsp;Cross project configuration</h2></div></div></div><p>Let's start with a very simple multi-project build. After all Gradle is a general purpose build tool at
            its core, so the projects don't have to be java projects. Our first examples are about marine life.
        </p><div class="section" title="31.1.1.&nbsp;Defining common behavior"><div class="titlepage"><div><div><h3 class="title"><a name="N13337"></a>31.1.1.&nbsp;Defining common behavior</h3></div></div></div><p>We have the following project tree. This is a multi-project build with a root project
                <code class="literal">water</code> and a subproject <code class="literal">bluewhale</code>.
            </p><div class="example"><a name="multiprojectFirstExample"></a><p class="title"><b>Example&nbsp;31.1.&nbsp;Multi-project tree - water &amp; bluewhale projects</b></p><div class="example-contents"><p>Build layout</p><pre class="programlisting">water/
  build.gradle
  settings.gradle
  bluewhale/</pre><div class="exampleLocation" title="Tip"><p>
              <span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/userguide/multiproject/firstExample/water</code>
            </p></div><p>
            <code class="filename">settings.gradle</code>
          </p><pre class="programlisting">include <span class="hl-string">'bluewhale'</span></pre></div></div><br class="example-break"><p>And where is the build script for the <code class="literal">bluewhale</code> project? In Gradle build scripts are optional.
                Obviously for a single project build, a project without a build script doesn't make much sense. For
                multiproject builds the situation is different. Let's look at the build script for the <code class="literal">water</code> project and
                execute it:
            </p><div class="example"><a name="multiprojectFirstExample"></a><p class="title"><b>Example&nbsp;31.2.&nbsp;Build script of water (parent) project</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">Closure cl = { task -&gt; println <span class="hl-string">"I'm $task.project.name"</span> }
task hello &lt;&lt; cl
project(<span class="hl-string">':bluewhale'</span>) {
    task hello &lt;&lt; cl
}</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong>
          </p><pre class="screen">&gt; gradle -q hello
I'm water
I'm bluewhale</pre></div></div><br class="example-break"><p>Gradle allows you to access any project of the multi-project build from any build script. The Project
                API provides a method called <code class="literal">project()</code>, which takes a path as an argument and returns
                the Project object for this path. The capability to configure a project build from any build script we
                call <em class="firstterm">cross project configuration</em>. Gradle implements this via
                <em class="firstterm">configuration injection</em>.
            </p><p>We are not that happy with the build script of the <code class="literal">water</code>  project. It is inconvenient to add the task
                explicitly for every project. We can do better. Let's first add another project called
                <code class="literal">krill</code> to our multi-project build.
            </p><div class="example"><a name="multiprojectAddKrill"></a><p class="title"><b>Example&nbsp;31.3.&nbsp;Multi-project tree - water, bluewhale  &amp; krill projects</b></p><div class="example-contents"><p>Build layout</p><pre class="programlisting">water/
  build.gradle
  settings.gradle
  bluewhale/
  krill/</pre><div class="exampleLocation" title="Tip"><p>
              <span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/userguide/multiproject/addKrill/water</code>
            </p></div><p>
            <code class="filename">settings.gradle</code>
          </p><pre class="programlisting">include <span class="hl-string">'bluewhale'</span>, <span class="hl-string">'krill'</span></pre></div></div><br class="example-break"><p>Now we rewrite the <code class="literal">water</code> build script and boil it down to a single line.</p><div class="example"><a name="multiprojectAddKrill"></a><p class="title"><b>Example&nbsp;31.4.&nbsp;Water project build script</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">allprojects {
    task hello &lt;&lt; { task -&gt; println <span class="hl-string">"I'm $task.project.name"</span> }
}</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong>
          </p><pre class="screen">&gt; gradle -q hello
I'm water
I'm bluewhale
I'm krill</pre></div></div><br class="example-break"><p>Is this cool or is this cool? And how does this work? The Project API provides a property
                <code class="literal">allprojects</code>
                which returns a list with the current project and all its subprojects underneath it. If you call
                <code class="literal">allprojects</code>
                with a closure, the statements of the closure are delegated to the projects associated with <code class="literal">
                    allprojects</code>. You could also do an iteration via <code class="literal">allprojects.each</code>, but
                that would be more verbose.
            </p><p>Other build systems use inheritance as the primary means for defining common behavior. We also offer
                inheritance for projects as you will see later. But Gradle uses configuration injection as the usual way
                of defining common behavior. We think it provides a very powerful and flexible way of configuring
                multiproject builds.
            </p></div></div><div class="section" title="31.2.&nbsp;Subproject configuration"><div class="titlepage"><div><div><h2 class="title"><a name="sec:subproject_configuration"></a>31.2.&nbsp;Subproject configuration</h2></div></div></div><p>The Project API also provides a property for accessing the subprojects only.
        </p><div class="section" title="31.2.1.&nbsp;Defining common behavior"><div class="titlepage"><div><div><h3 class="title"><a name="N133D2"></a>31.2.1.&nbsp;Defining common behavior</h3></div></div></div><div class="example"><a name="multiprojectUseSubprojects"></a><p class="title"><b>Example&nbsp;31.5.&nbsp;Defining common behaviour of all projects and subprojects</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">allprojects {
    task hello &lt;&lt; {task -&gt; println <span class="hl-string">"I'm $task.project.name"</span> }
}
subprojects {
    hello &lt;&lt; {println <span class="hl-string">"- I depend on water"</span>}
}</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong>
          </p><pre class="screen">&gt; gradle -q hello
I'm water
I'm bluewhale
- I depend on water
I'm krill
- I depend on water</pre></div></div><br class="example-break"></div><div class="section" title="31.2.2.&nbsp;Adding specific behavior"><div class="titlepage"><div><div><h3 class="title"><a name="sub:adding_specific_behavior"></a>31.2.2.&nbsp;Adding specific behavior</h3></div></div></div><p>You can add specific behavior on top of the common behavior. Usually we put the project specific
                behavior in the build script of the project where we want to apply this specific behavior. But as we
                have already seen, we don't have to do it this way. We could add project specific behavior for the
                <code class="literal">bluewhale</code> project like this:
            </p><div class="example"><a name="multiprojectSubprojectsAddFromTop"></a><p class="title"><b>Example&nbsp;31.6.&nbsp;Defining specific behaviour for particular project</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">allprojects {
    task hello &lt;&lt; {task -&gt; println <span class="hl-string">"I'm $task.project.name"</span> }
}
subprojects {
    hello &lt;&lt; {println <span class="hl-string">"- I depend on water"</span>}
}
project(<span class="hl-string">':bluewhale'</span>).hello &lt;&lt; {
    println <span class="hl-string">"I'm the largest animal that has ever lived on this planet."</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong>
          </p><pre class="screen">&gt; gradle -q hello
I'm water
I'm bluewhale
- I depend on water
I'm the largest animal that has ever lived on this planet.
I'm krill
- I depend on water</pre></div></div><br class="example-break"><p>As we have said, we usually prefer to put project specific behavior into the build script of this
                project. Let's refactor and also add some project specific behavior to the <code class="literal">krill</code>
                project.
            </p><div class="example"><a name="multiprojectSpreadSpecifics"></a><p class="title"><b>Example&nbsp;31.7.&nbsp;Defining specific behaviour for project krill</b></p><div class="example-contents"><p>Build layout</p><pre class="programlisting">water/
  build.gradle
  settings.gradle
  bluewhale/
    build.gradle
  krill/
    build.gradle</pre><div class="exampleLocation" title="Tip"><p>
              <span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/userguide/multiproject/spreadSpecifics/water</code>
            </p></div><p>
            <code class="filename">settings.gradle</code>
          </p><pre class="programlisting">include <span class="hl-string">'bluewhale'</span>, <span class="hl-string">'krill'</span></pre><p>
            <code class="filename">bluewhale/build.gradle</code>
          </p><pre class="programlisting">hello.doLast { println <span class="hl-string">"- I'm the largest animal that has ever lived on this planet."</span> }</pre><p>
            <code class="filename">krill/build.gradle</code>
          </p><pre class="programlisting">hello.doLast {
    println <span class="hl-string">"- The weight of my species in summer is twice as heavy as all human beings."</span>
}</pre><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">allprojects {
    task hello &lt;&lt; {task -&gt; println <span class="hl-string">"I'm $task.project.name"</span> }
}
subprojects {
    hello &lt;&lt; {println <span class="hl-string">"- I depend on water"</span>}
}</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong>
          </p><pre class="screen">&gt; gradle -q hello
I'm water
I'm bluewhale
- I depend on water
- I'm the largest animal that has ever lived on this planet.
I'm krill
- I depend on water
- The weight of my species in summer is twice as heavy as all human beings.</pre></div></div><br class="example-break"></div><div class="section" title="31.2.3.&nbsp;Project filtering"><div class="titlepage"><div><div><h3 class="title"><a name="sub:project_filtering"></a>31.2.3.&nbsp;Project filtering</h3></div></div></div><p>To show more of the power of configuration injection, let's add another project
                called <code class="literal">tropicalFish</code> and add more behavior to the build via the build script of the
                <code class="literal">water</code> project.
            </p><div class="section" title="31.2.3.1.&nbsp;Filtering by name"><div class="titlepage"><div><div><h4 class="title"><a name="ssub:filtering_by_name"></a>31.2.3.1.&nbsp;Filtering by name</h4></div></div></div><div class="example"><a name="multiprojectAddTropical"></a><p class="title"><b>Example&nbsp;31.8.&nbsp;Adding custom behaviour to some projects (filtered by project name)</b></p><div class="example-contents"><p>Build layout</p><pre class="programlisting">water/
  build.gradle
  settings.gradle
  bluewhale/
    build.gradle
  krill/
    build.gradle
  tropicalFish/</pre><div class="exampleLocation" title="Tip"><p>
                <span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/userguide/multiproject/addTropical/water</code>
              </p></div><p>
              <code class="filename">settings.gradle</code>
            </p><pre class="programlisting">include <span class="hl-string">'bluewhale'</span>, <span class="hl-string">'krill'</span>, <span class="hl-string">'tropicalFish'</span></pre><p>
              <code class="filename">build.gradle</code>
            </p><pre class="programlisting">allprojects {
    task hello &lt;&lt; {task -&gt; println <span class="hl-string">"I'm $task.project.name"</span> }
}
subprojects {
    hello &lt;&lt; {println <span class="hl-string">"- I depend on water"</span>}
}
configure(subprojects.findAll {it.name != <span class="hl-string">'tropicalFish'</span>}) {
    hello &lt;&lt; {println <span class="hl-string">'- I love to spend time in the arctic waters.'</span>}
}</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong>
            </p><pre class="screen">&gt; gradle -q hello
I'm water
I'm bluewhale
- I depend on water
- I love to spend time in the arctic waters.
- I'm the largest animal that has ever lived on this planet.
I'm krill
- I depend on water
- I love to spend time in the arctic waters.
- The weight of my species in summer is twice as heavy as all human beings.
I'm tropicalFish
- I depend on water</pre></div></div><br class="example-break"><p>The <code class="literal">configure()</code> method takes a list as an argument and applies the
                    configuration to the projects in this list.
                </p></div><div class="section" title="31.2.3.2.&nbsp;Filtering by properties"><div class="titlepage"><div><div><h4 class="title"><a name="ssub:filtering_by_properties"></a>31.2.3.2.&nbsp;Filtering by properties</h4></div></div></div><p>Using the project name for filtering is one option. Using dynamic project properties is another.
                </p><div class="example"><a name="multiprojectTropicalWithProperties"></a><p class="title"><b>Example&nbsp;31.9.&nbsp;Adding custom behaviour to some projects (filtered by project properties)</b></p><div class="example-contents"><p>Build layout</p><pre class="programlisting">water/
  build.gradle
  settings.gradle
  bluewhale/
    build.gradle
  krill/
    build.gradle
  tropicalFish/
    build.gradle</pre><div class="exampleLocation" title="Tip"><p>
                <span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/userguide/multiproject/tropicalWithProperties/water</code>
              </p></div><p>
              <code class="filename">settings.gradle</code>
            </p><pre class="programlisting">include <span class="hl-string">'bluewhale'</span>, <span class="hl-string">'krill'</span>, <span class="hl-string">'tropicalFish'</span></pre><p>
              <code class="filename">bluewhale/build.gradle</code>
            </p><pre class="programlisting">arctic = true
hello.doLast { println <span class="hl-string">"- I'm the largest animal that has ever lived on this planet."</span> }</pre><p>
              <code class="filename">krill/build.gradle</code>
            </p><pre class="programlisting">arctic = true
hello.doLast {
    println <span class="hl-string">"- The weight of my species in summer is twice as heavy as all human beings."</span>
}</pre><p>
              <code class="filename">tropicalFish/build.gradle</code>
            </p><pre class="programlisting">arctic = false</pre><p>
              <code class="filename">build.gradle</code>
            </p><pre class="programlisting">allprojects {
    task hello &lt;&lt; {task -&gt; println <span class="hl-string">"I'm $task.project.name"</span> }
}
subprojects {
    hello {
        doLast {println <span class="hl-string">"- I depend on water"</span>}
        afterEvaluate { Project project -&gt;
            <span class="hl-keyword">if</span> (project.arctic) { doLast {
                println <span class="hl-string">'- I love to spend time in the arctic waters.'</span> }
            }
        }
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong>
            </p><pre class="screen">&gt; gradle -q hello
I'm water
I'm bluewhale
- I depend on water
- I'm the largest animal that has ever lived on this planet.
- I love to spend time in the arctic waters.
I'm krill
- I depend on water
- The weight of my species in summer is twice as heavy as all human beings.
- I love to spend time in the arctic waters.
I'm tropicalFish
- I depend on water</pre></div></div><br class="example-break"><p>In the build file of the <code class="literal">water</code> project we use an <code class="literal">afterEvaluate</code>
                    notification. This means that the closure we are passing gets evaluated <span class="emphasis"><em>after</em></span>
                    the build scripts of the subproject are evaluated. As the property <code class="literal">arctic</code>
                    is set in those build scripts, we have to do it this way. You will find more on this topic in
                    <a class="xref" href="#sec:dependencies_which_dependencies" title="31.6.&nbsp;Dependencies - Which dependencies?">Section&nbsp;31.6, &ldquo;Dependencies - Which dependencies?&rdquo;</a>
                </p></div></div></div><div class="section" title="31.3.&nbsp;Execution rules for multi-project builds"><div class="titlepage"><div><div><h2 class="title"><a name="sec:execution_rules_for_multi_project_builds"></a>31.3.&nbsp;Execution rules for multi-project builds</h2></div></div></div><p>When we have executed the <code class="literal">hello</code> task from the root project dir things behaved in an
            intuitive way. All the <code class="literal">hello</code> tasks of the different projects were executed. Let's switch
            to the <code class="literal">bluewhale</code> dir and see what happens if we execute Gradle from there.
        </p><div class="example"><a name="multiprojectSubBuild"></a><p class="title"><b>Example&nbsp;31.10.&nbsp;Running build from subproject</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong>
        </p><pre class="screen">&gt; gradle -q hello
I'm bluewhale
- I depend on water
- I'm the largest animal that has ever lived on this planet.
- I love to spend time in the arctic waters.</pre></div></div><br class="example-break"><p>The basic rule behind Gradle's behavior is simple. Gradle looks down the hierarchy, starting with the
            <span class="emphasis"><em>current dir</em></span>, for tasks with the name
            <code class="literal">hello</code>
            an executes them. One thing is very important to note. Gradle
            <span class="emphasis"><em>always</em></span>
            evaluates
            <span class="emphasis"><em>every</em></span>
            project of the multi-project build and creates all existing task objects. Then, according to the task name
            arguments and the current dir, Gradle filters the tasks which should be executed. Because of Gradle's
            cross project configuration <span class="emphasis"><em>every</em></span> project has to be evaluated before <span class="emphasis"><em>any</em></span>
            task gets executed. We will have a closer look at this in the next section. Let's now have our last marine
            example. Let's add a task to <code class="literal">bluewhale</code> and <code class="literal">krill</code>.
        </p><div class="example"><a name="multiprojectPartialTasks"></a><p class="title"><b>Example&nbsp;31.11.&nbsp;Evaluation and execution of projects</b></p><div class="example-contents"><p>
          <code class="filename">bluewhale/build.gradle</code>
        </p><pre class="programlisting">arctic = true
hello &lt;&lt; { println <span class="hl-string">"- I'm the largest animal that has ever lived on this planet."</span> }

task distanceToIceberg &lt;&lt; {
    println <span class="hl-string">'20 nautical miles'</span>
}</pre><p>
          <code class="filename">krill/build.gradle</code>
        </p><pre class="programlisting">arctic = true
hello &lt;&lt; { println <span class="hl-string">"- The weight of my species in summer is twice as heavy as all human beings."</span> }

task distanceToIceberg &lt;&lt; {
    println <span class="hl-string">'5 nautical miles'</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q distanceToIceberg</code></strong>
        </p><pre class="screen">&gt; gradle -q distanceToIceberg
20 nautical miles
5 nautical miles</pre></div></div><br class="example-break"><p>Here the output without the <code class="literal">-q</code> option:</p><div class="example"><a name="multiprojectPartialTasksNotQuiet"></a><p class="title"><b>Example&nbsp;31.12.&nbsp;Evaluation and execution of projects</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle distanceToIceberg</code></strong>
        </p><pre class="screen">&gt; gradle distanceToIceberg
:bluewhale:distanceToIceberg
20 nautical miles
:krill:distanceToIceberg
5 nautical miles

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"><p>The build is executed from the <code class="literal">water</code> project. Neither <code class="literal">water</code> nor
            <code class="literal">tropicalFish</code> have a task with the name <code class="literal">distanceToIceberg</code>. Gradle does
            not care. The simple rule mentioned already above is: Execute all tasks down the hierarchy which have this
            name. Only complain if there is <span class="emphasis"><em>no</em></span> such task!
        </p></div><div class="section" title="31.4.&nbsp;Running tasks by their absolute path"><div class="titlepage"><div><div><h2 class="title"><a name="sec:running_partial_build_from_the_root"></a>31.4.&nbsp;Running tasks by their absolute path</h2></div></div></div><p>As we have seen, you can run a multi-project build by entering any subproject dir and execute the build
            from there. All matching task names of the project hierarchy starting with the current dir are executed. But
            Gradle also offers to execute tasks by their absolute path (see also <a class="xref" href="#sec:project_and_task_paths" title="31.5.&nbsp;Project and task paths">Section&nbsp;31.5, &ldquo;Project and task paths&rdquo;</a>):
        </p><div class="example"><a name="multiprojectAbsoluteTaskPaths"></a><p class="title"><b>Example&nbsp;31.13.&nbsp;Running tasks by their absolute path</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle -q :hello :krill:hello hello</code></strong>
        </p><pre class="screen">&gt; gradle -q :hello :krill:hello hello
I'm water
I'm krill
- I depend on water
- The weight of my species in summer is twice as heavy as all human beings.
- I love to spend time in the arctic waters.
I'm tropicalFish
- I depend on water</pre></div></div><br class="example-break"><p>The build is executed from the <code class="literal">tropicalFish</code> project. We execute the <code class="literal">hello</code>
            tasks of the <code class="literal">water</code>, the <code class="literal">krill</code> and the <code class="literal">tropicalFish</code>
            project. The first two tasks are specified by there absolute path, the last task is executed on the name
            matching mechanism described above.
        </p></div><div class="section" title="31.5.&nbsp;Project and task paths"><div class="titlepage"><div><div><h2 class="title"><a name="sec:project_and_task_paths"></a>31.5.&nbsp;Project and task paths</h2></div></div></div><p>A project path has the following pattern: It starts always with a colon, which denotes the root project.
            The root project is the only project in a path that is not specified by its name. The path
            <code class="literal">:bluewhale</code>
            corresponds to the file system path
            <code class="literal">water/project</code>
            in the case of the example above.
        </p><p>The path of a task is simply its project path plus the task name. For example <code class="literal">
            :bluewhale:hello</code>. Within a project you can address a task of the same project just by its name.
            This is interpreted as a relative path.
        </p><p>Originally Gradle has used the
            <code class="literal">'/'</code>
            character as a natural path separator. With the introduction of directory tasks (see <a class="xref" href="#sec:directory_creation" title="11.1.&nbsp;Directory creation">Section&nbsp;11.1, &ldquo;Directory creation&rdquo;</a>) this was no longer possible, as the name of the directory task
            contains the
            <code class="literal">'/'</code>
            character.
        </p></div><div class="section" title="31.6.&nbsp;Dependencies - Which dependencies?"><div class="titlepage"><div><div><h2 class="title"><a name="sec:dependencies_which_dependencies"></a>31.6.&nbsp;Dependencies - Which dependencies?</h2></div></div></div><p>The examples from the last section were special, as the projects had no <span class="emphasis"><em>Execution
            Dependencies</em></span>. They had only <span class="emphasis"><em>Configuration Dependencies</em></span>. Here is an example
            where this is different:
        </p><div class="section" title="31.6.1.&nbsp;Execution dependencies"><div class="titlepage"><div><div><h3 class="title"><a name="sub:execution_time_dependencies"></a>31.6.1.&nbsp;Execution dependencies</h3></div></div></div><div class="section" title="31.6.1.1.&nbsp;Dependencies and execution order"><div class="titlepage"><div><div><h4 class="title"><a name="ssub:dependencies_and_execution_order"></a>31.6.1.1.&nbsp;Dependencies and execution order</h4></div></div></div><div class="example"><a name="multiprojectFirstMessages"></a><p class="title"><b>Example&nbsp;31.14.&nbsp;Dependencies and execution order</b></p><div class="example-contents"><p>Build layout</p><pre class="programlisting">messages/
  settings.gradle
  consumer/
    build.gradle
  producer/
    build.gradle</pre><div class="exampleLocation" title="Tip"><p>
                <span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/userguide/multiproject/dependencies/firstMessages/messages</code>
              </p></div><p>
              <code class="filename">settings.gradle</code>
            </p><pre class="programlisting">include <span class="hl-string">'consumer'</span>, <span class="hl-string">'producer'</span></pre><p>
              <code class="filename">consumer/build.gradle</code>
            </p><pre class="programlisting">task action &lt;&lt; {
    println <span class="hl-string">"Consuming message: "</span> +  System.getProperty(<span class="hl-string">'org.gradle.message'</span>)
}</pre><p>
              <code class="filename">producer/build.gradle</code>
            </p><pre class="programlisting">task action &lt;&lt; {
    println <span class="hl-string">"Producing message:"</span>
    System.setProperty(<span class="hl-string">'org.gradle.message'</span>, <span class="hl-string">'Watch the order of execution.'</span>)
}</pre><p>Output of <strong class="userinput"><code>gradle -q action</code></strong>
            </p><pre class="screen">&gt; gradle -q action
Consuming message: null
Producing message:</pre></div></div><br class="example-break"><p>This did not work out. If nothing else is defined, Gradle executes the task in alphanumeric order.
                    Therefore
                    <code class="literal">:consumer:action</code>
                    is executed before <code class="literal">:producer:action</code>. Let's try to solve this with a hack and
                    rename the producer project to <code class="literal">aProducer</code>.
                </p><div class="example"><a name="multiprojectMessagesHack"></a><p class="title"><b>Example&nbsp;31.15.&nbsp;Dependencies and execution order</b></p><div class="example-contents"><p>Build layout</p><pre class="programlisting">messages/
  settings.gradle
  aProducer/
    build.gradle
  consumer/
    build.gradle</pre><p>
              <code class="filename">settings.gradle</code>
            </p><pre class="programlisting">include <span class="hl-string">'consumer'</span>, <span class="hl-string">'aProducer'</span></pre><p>
              <code class="filename">aProducer/build.gradle</code>
            </p><pre class="programlisting">task action &lt;&lt; {
    println <span class="hl-string">"Producing message:"</span>
    System.setProperty(<span class="hl-string">'org.gradle.message'</span>, <span class="hl-string">'Watch the order of execution.'</span>)
}</pre><p>
              <code class="filename">consumer/build.gradle</code>
            </p><pre class="programlisting">task action &lt;&lt; {
    println <span class="hl-string">"Consuming message: "</span> +  System.getProperty(<span class="hl-string">'org.gradle.message'</span>)
}</pre><p>Output of <strong class="userinput"><code>gradle -q action</code></strong>
            </p><pre class="screen">&gt; gradle -q action
Producing message:
Consuming message: Watch the order of execution.</pre></div></div><br class="example-break"><p>Now we take the air out of this hack. We simply switch to the <code class="literal">consumer</code> dir and
                    execute the build.
                </p><div class="example"><a name="multiprojectMessagesHackBroken"></a><p class="title"><b>Example&nbsp;31.16.&nbsp;Dependencies and execution order</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle -q action</code></strong>
            </p><pre class="screen">&gt; gradle -q action
Consuming message: null</pre></div></div><br class="example-break"><p>For Gradle the two
                    <code class="literal">action</code>
                    tasks are just not related. If you execute the build from the
                    <code class="literal">messages</code>
                    project Gradle executes them both because they have the same name and they are down the hierarchy.
                    In the last example only one
                    <code class="literal">action</code>
                    was down the hierarchy and therefore it was the only task that got executed. We need something
                    better than this hack.
                </p></div><div class="section" title="31.6.1.2.&nbsp;Declaring dependencies"><div class="titlepage"><div><div><h4 class="title"><a name="ssub:declaring_dependencies"></a>31.6.1.2.&nbsp;Declaring dependencies</h4></div></div></div><div class="example"><a name="multiprojectMessagesDependencies"></a><p class="title"><b>Example&nbsp;31.17.&nbsp;Declaring dependencies</b></p><div class="example-contents"><p>Build layout</p><pre class="programlisting">messages/
  settings.gradle
  consumer/
    build.gradle
  producer/
    build.gradle</pre><div class="exampleLocation" title="Tip"><p>
                <span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/userguide/multiproject/dependencies/messagesWithDependencies/messages</code>
              </p></div><p>
              <code class="filename">settings.gradle</code>
            </p><pre class="programlisting">include <span class="hl-string">'consumer'</span>, <span class="hl-string">'producer'</span></pre><p>
              <code class="filename">consumer/build.gradle</code>
            </p><pre class="programlisting">dependsOn(<span class="hl-string">':producer'</span>)

task action &lt;&lt; {
    println <span class="hl-string">"Consuming message: "</span> +  System.getProperty(<span class="hl-string">'org.gradle.message'</span>)
}</pre><p>
              <code class="filename">producer/build.gradle</code>
            </p><pre class="programlisting">task action &lt;&lt; {
    println <span class="hl-string">"Producing message:"</span>
    System.setProperty(<span class="hl-string">'org.gradle.message'</span>, <span class="hl-string">'Watch the order of execution.'</span>)
}</pre><p>Output of <strong class="userinput"><code>gradle -q action</code></strong>
            </p><pre class="screen">&gt; gradle -q action
Producing message:
Consuming message: Watch the order of execution.</pre></div></div><br class="example-break"><p>Running this from the <code class="literal">consumer</code> directory gives:</p><div class="example"><a name="multiprojectMessagesDependenciesSubBuild"></a><p class="title"><b>Example&nbsp;31.18.&nbsp;Declaring dependencies</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle -q action</code></strong>
            </p><pre class="screen">&gt; gradle -q action
Producing message:
Consuming message: Watch the order of execution.</pre></div></div><br class="example-break"><p>We have now declared that the
                    <code class="literal">consumer</code>
                    project has an
                    <span class="emphasis"><em>execution dependency</em></span>
                    on the
                    <code class="literal">producer</code>
                    project. For Gradle declaring
                    <span class="emphasis"><em>execution dependencies</em></span>
                    between
                    <span class="emphasis"><em>projects</em></span>
                    is syntactic sugar. Under the hood Gradle creates task dependencies out of them. You can also create
                    cross project tasks dependencies manually by using the absolute path of the tasks.
                </p></div><div class="section" title="31.6.1.3.&nbsp;The nature of project dependencies"><div class="titlepage"><div><div><h4 class="title"><a name="ssub:the_nature_of_project_dependencies"></a>31.6.1.3.&nbsp;The nature of project dependencies</h4></div></div></div><p>Let's change the naming of our tasks and execute the build.
                </p><div class="example"><a name="multiprojectMessagesDifferentTaskNames"></a><p class="title"><b>Example&nbsp;31.19.&nbsp;Project execution dependencies</b></p><div class="example-contents"><p>
              <code class="filename">consumer/build.gradle</code>
            </p><pre class="programlisting">dependsOn(<span class="hl-string">':producer'</span>)

task consume &lt;&lt; {
    println <span class="hl-string">"Consuming message: "</span> +  System.getProperty(<span class="hl-string">'org.gradle.message'</span>)
}</pre><p>
              <code class="filename">producer/build.gradle</code>
            </p><pre class="programlisting">task produce &lt;&lt; {
    println <span class="hl-string">"Producing message:"</span>
    System.setProperty(<span class="hl-string">'org.gradle.message'</span>, <span class="hl-string">'Watch the order of execution.'</span>)
}</pre><p>Output of <strong class="userinput"><code>gradle -q consume</code></strong>
            </p><pre class="screen">&gt; gradle -q consume
Consuming message: null</pre></div></div><br class="example-break"><p>Oops. Why does this not work? The
                    <code class="literal">dependsOn</code>
                    command is created for projects with a common lifecycle. Provided you have two Java projects were
                    one depends on the other. If you trigger a compile for the dependent project you don't want that
                    <span class="emphasis"><em>all</em></span>
                    tasks of the other project get executed. Therefore a
                    <code class="literal">dependsOn</code>
                    creates dependencies between tasks with equal names. To deal with the scenario above you would do
                    the following:
                </p><div class="example"><a name="multiprojectMessagesTaskDependencies"></a><p class="title"><b>Example&nbsp;31.20.&nbsp;Cross project task dependencies</b></p><div class="example-contents"><p>
              <code class="filename">consumer/build.gradle</code>
            </p><pre class="programlisting">task consume(dependsOn: <span class="hl-string">':producer:produce'</span>) &lt;&lt; {
    println <span class="hl-string">"Consuming message: "</span> +  System.getProperty(<span class="hl-string">'org.gradle.message'</span>)
}</pre><p>
              <code class="filename">producer/build.gradle</code>
            </p><pre class="programlisting">task produce &lt;&lt; {
    println <span class="hl-string">"Producing message:"</span>
    System.setProperty(<span class="hl-string">'org.gradle.message'</span>, <span class="hl-string">'Watch the order of execution.'</span>)
}</pre><p>Output of <strong class="userinput"><code>gradle -q consume</code></strong>
            </p><pre class="screen">&gt; gradle -q consume
Producing message:
Consuming message: Watch the order of execution.</pre></div></div><br class="example-break"></div></div><div class="section" title="31.6.2.&nbsp;Configuration time dependencies"><div class="titlepage"><div><div><h3 class="title"><a name="sub:configuration_time_dependencies"></a>31.6.2.&nbsp;Configuration time dependencies</h3></div></div></div><p>Let's have one more example with our producer-consumer build before we enter
                <span class="emphasis"><em>Java</em></span>
                land. We add a property to the producer project and create now a configuration time dependency from
                consumer on producer.
            </p><div class="example"><a name="multiprojectMessagesConfigDependenciesBroken"></a><p class="title"><b>Example&nbsp;31.21.&nbsp;Configuration time dependencies</b></p><div class="example-contents"><p>
            <code class="filename">consumer/build.gradle</code>
          </p><pre class="programlisting">key = <span class="hl-string">'unknown'</span>
<span class="hl-keyword">if</span> (project(<span class="hl-string">':producer'</span>).hasProperty(<span class="hl-string">'key'</span>)) {
    key = project(<span class="hl-string">':producer'</span>).key
}
task consume(dependsOn: <span class="hl-string">':producer:produce'</span>) &lt;&lt; {
    println <span class="hl-string">"Consuming message from key '$key': "</span> +  System.getProperty(key)
}</pre><p>
            <code class="filename">producer/build.gradle</code>
          </p><pre class="programlisting">key = <span class="hl-string">'org.gradle.message'</span>

task produce &lt;&lt; {
    println <span class="hl-string">"Producing message:"</span>
    System.setProperty(key, <span class="hl-string">'Watch the order of execution.'</span>)
}</pre><p>Output of <strong class="userinput"><code>gradle -q consume</code></strong>
          </p><pre class="screen">&gt; gradle -q consume
Producing message:
Consuming message from key 'unknown': null</pre></div></div><br class="example-break"><p>The default
                <span class="emphasis"><em>evaluation</em></span>
                order of the projects is alphanumeric (for the same nesting level). Therefore the
                <code class="literal">consumer</code>
                project is evaluated before the
                <code class="literal">producer</code>
                project and the
                <code class="literal">key</code>
                value of the
                <code class="literal">producer</code>
                is set
                <span class="emphasis"><em>after</em></span>
                it is read by the
                <code class="literal">consumer</code>
                project. Gradle offers a solution for this.
            </p><div class="example"><a name="multiprojectMessagesConfigDependencies"></a><p class="title"><b>Example&nbsp;31.22.&nbsp;Configuration time dependencies - evaluationDependsOn</b></p><div class="example-contents"><p>
            <code class="filename">consumer/build.gradle</code>
          </p><pre class="programlisting">evaluationDependsOn(<span class="hl-string">':producer'</span>)

key = <span class="hl-string">'unknown'</span>
<span class="hl-keyword">if</span> (project(<span class="hl-string">':producer'</span>).hasProperty(<span class="hl-string">'key'</span>)) {
    key = project(<span class="hl-string">':producer'</span>).key
}
task consume(dependsOn: <span class="hl-string">':producer:produce'</span>) &lt;&lt; {
    println <span class="hl-string">"Consuming message from key '$key': "</span> +  System.getProperty(key)
}</pre><p>Output of <strong class="userinput"><code>gradle -q consume</code></strong>
          </p><pre class="screen">&gt; gradle -q consume
Producing message:
Consuming message from key 'org.gradle.message': Watch the order of execution.</pre></div></div><br class="example-break"><p>The command
                <code class="literal">evaluationDependsOn</code>
                triggers the evaluation of
                <code class="literal">producer</code>
                <span class="emphasis"><em>before</em></span>
                <code class="literal">consumer</code>
                is evaluated. The example is a bit contrived for the sake of showing the mechanism. In
                <span class="emphasis"><em>this</em></span>
                case there would be an easier solution by reading the key property at execution time.
            </p><div class="example"><a name="multiprojectMessagesConfigDependenciesAltSolution"></a><p class="title"><b>Example&nbsp;31.23.&nbsp;Configuration time dependencies</b></p><div class="example-contents"><p>
            <code class="filename">consumer/build.gradle</code>
          </p><pre class="programlisting">task consume(dependsOn: <span class="hl-string">':producer:produce'</span>) &lt;&lt; {
    String key = project(<span class="hl-string">':producer'</span>).key 
    println <span class="hl-string">"Consuming message from key '$key': "</span> +  System.getProperty(key)
}</pre><p>Output of <strong class="userinput"><code>gradle -q consume</code></strong>
          </p><pre class="screen">&gt; gradle -q consume
Producing message:
Consuming message from key 'org.gradle.message': Watch the order of execution.</pre></div></div><br class="example-break"><p>Configuration dependencies are very different to execution dependencies. Configuration dependencies
                are between projects whereas execution dependencies are always resolved to task dependencies. Another
                difference is that always all projects are configured, even when you start the build from a subproject.
                The default configuration order is top down, which is usually what is needed.
            </p><p>On the same nesting level the configuration order depends on the alphanumeric position. The most
                common use case is to have multi-project builds that share a common lifecycle (e.g. all projects use the
                Java plugin). If you declare with
                <code class="literal">dependsOn</code>
                a
                <span class="emphasis"><em>execution dependency</em></span>
                between different projects, the default behavior of this method is to create also a
                <span class="emphasis"><em>configuration</em></span>
                dependency between the two projects. Therefore it is likely that you don't have to define configuration
                dependencies explicitly.
            </p></div><div class="section" title="31.6.3.&nbsp;Real life examples"><div class="titlepage"><div><div><h3 class="title"><a name="sub:real_life_examples"></a>31.6.3.&nbsp;Real life examples</h3></div></div></div><p>Gradle's multi-project features are driven by real life use cases. The first example for describing
                such a use case, consists of two webapplication projects and a parent project that creates a
                distribution out of them.
                <sup>[<a href="#ftn.N1373D" name="N1373D" class="footnote">27</a>]</sup>
                For the example we use only one build script and do <span class="emphasis"><em>cross project configuration</em></span>.
            </p><div class="example"><a name="webdist"></a><p class="title"><b>Example&nbsp;31.24.&nbsp;Dependencies - real life example - crossproject configuration</b></p><div class="example-contents"><p>Build layout</p><pre class="programlisting">webDist/
  settings.gradle
  build.gradle
  date/
    src/main/java/org/gradle/sample/DateServlet.java
  hello/
    src/main/java/org/gradle/sample/HelloServlet.java</pre><div class="exampleLocation" title="Tip"><p>
              <span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/userguide/multiproject/dependencies/webDist</code>
            </p></div><p>
            <code class="filename">settings.gradle</code>
          </p><pre class="programlisting">include <span class="hl-string">'date'</span>, <span class="hl-string">'hello'</span></pre><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">dependsOnChildren()

allprojects {
    usePlugin(<span class="hl-string">'java'</span>)
    group = <span class="hl-string">'org.gradle.sample'</span>
    version = <span class="hl-string">'1.0'</span>
}

subprojects {
    usePlugin(<span class="hl-string">'war'</span>)
    repositories {
        mavenCentral()
    }
    dependencies {
        compile <span class="hl-string">"javax.servlet:servlet-api:2.5"</span>
    }
}

task explodedDist(dependsOn: assemble) &lt;&lt; {
    File explodedDist = mkdir(buildDir, <span class="hl-string">'explodedDist'</span>)
    subprojects.each {project -&gt;
        project.tasks.withType(Jar).each {archiveTask -&gt;
            copy {
                from archiveTask.archivePath
                into explodedDist
            }
        }
    }
}</pre></div></div><br class="example-break"><p>We have an interesting set of dependencies. Obviously the
                <code class="literal">date</code>
                and
                <code class="literal">hello</code>
                task have a
                <span class="emphasis"><em>configuration</em></span>
                dependency on <code class="literal">webDist</code>, as all the build logic for the webapp projects is injected by
                <code class="literal">webDist</code>. The
                <span class="emphasis"><em>execution</em></span>
                dependency is in the other direction, as
                <code class="literal">webDist</code>
                depends on the build artifacts of
                <code class="literal">date</code>
                and <code class="literal">hello</code>. There is even a third dependency.
                <code class="literal">webDist</code>
                has a
                <span class="emphasis"><em>configuration</em></span>
                dependency on
                <code class="literal">date</code>
                and
                <code class="literal">hello</code>
                because it needs to know the <code class="literal">archivePath</code>. But it asks for this information at
                <span class="emphasis"><em>execution time</em></span>. Therefore we have no circular dependency.
            </p><p>Such and other dependency patterns are daily bread in the problem space of multi-project builds. If a
                build system does not support such patterns, you either can't solve your problem or you need to do ugly
                hacks which are hard to maintain and massively afflict your productivity as a build master.
            </p><p>There is one more thing to note from the current example. We have used the command <code class="literal">
                dependOnChildren()</code>. It is a convenience method and calls the
                <code class="literal">dependsOn</code>
                method of the parent project for every child project (not every sub project). It declares a
                <code class="literal">execution</code>
                dependency of
                <code class="literal">webDist</code>
                on
                <code class="literal">date</code>
                and <code class="literal">hello</code>.
            </p><p>Another use case would be a situation where the subprojects have a configuration
                <span class="emphasis"><em>and</em></span>
                execution dependency on the parent project. This is the case when the parent project does configuration
                injection into its subprojects, and additionally produces something at execution time that is needed by
                its child projects (e.g. code generation). In this case the parent project would call the
                <code class="literal">childrenDependOnMe</code>
                method to create an execution dependency for the child projects. We might add an example for this in a
                future version of the user guide.
            </p></div></div><div class="section" title="31.7.&nbsp;Project lib dependencies"><div class="titlepage"><div><div><h2 class="title"><a name="sec:project_jar_dependencies"></a>31.7.&nbsp;Project lib dependencies</h2></div></div></div><p>What if one projects needs the jar produced by another project in its compile path. And not just the jar
            but also the transitive dependencies of this jar. Obviously this is a very common use case for Java
            multi-project builds. As already mentioned in <a class="xref" href="#sub:project_dependencies" title="28.3.4.&nbsp;Project dependencies">Section&nbsp;28.3.4, &ldquo;Project dependencies&rdquo;</a>, Gradle
            offers project lib dependencies for this.
        </p><div class="example"><a name="javadependencies_1"></a><p class="title"><b>Example&nbsp;31.25.&nbsp;Project lib dependencies</b></p><div class="example-contents"><p>Build layout</p><pre class="programlisting">java/
  settings.gradle
  build.gradle
  api/
    src/main/java/org/gradle/sample/api/Person.java
    src/main/java/org/gradle/sample/apiImpl/PersonImpl.java
  services/
    personService/
      src/main/java/org/gradle/sample/services/PersonService.java
      src/test/java/org/gradle/sample/services/PersonServiceTest.java
  shared/
    src/main/java/org/gradle/sample/shared/Helper.java</pre><div class="exampleLocation" title="Tip"><p>
            <span class="emphasis"><em>Note:</em></span> The code for this example can be found at <code class="filename">samples/userguide/multiproject/dependencies/java</code>
          </p></div></div></div><br class="example-break"><p>We have the projects <code class="literal">shared</code>,
            <code class="literal">api</code>
            and <code class="literal">personService</code>.
            <code class="literal">personService</code>
            has a lib dependency on the other two projects.
            <code class="literal">api</code>
            has a lib dependency on <code class="literal">shared</code>.
            <sup>[<a href="#ftn.N137E5" name="N137E5" class="footnote">28</a>]</sup>
        </p><div class="example"><a name="javadependencies_2"></a><p class="title"><b>Example&nbsp;31.26.&nbsp;Project lib dependencies</b></p><div class="example-contents"><p>
          <code class="filename">settings.gradle</code>
        </p><pre class="programlisting">include <span class="hl-string">'api'</span>, <span class="hl-string">'shared'</span>, <span class="hl-string">'services:personService'</span></pre><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">subprojects {
    repositories {
        mavenCentral()
    }
    usePlugin(<span class="hl-string">'java'</span>)
    group = <span class="hl-string">'org.gradle.sample'</span>
    version = <span class="hl-string">'1.0'</span>
}

project(<span class="hl-string">':api'</span>) {
    dependencies {
        compile project(<span class="hl-string">':shared'</span>)
    }
}

project(<span class="hl-string">':services:personService'</span>) {
    dependencies {
        compile project(<span class="hl-string">':shared'</span>), project(<span class="hl-string">':api'</span>)
        testCompile <span class="hl-string">"junit:junit:3.8.2"</span>
    }
}

dependsOnChildren()</pre></div></div><br class="example-break"><p>All the build logic is in the
            <code class="literal">build.gradle</code> of the root project.
            <sup>[<a href="#ftn.N13805" name="N13805" class="footnote">29</a>]</sup>
            A <span class="emphasis"><em>lib</em></span>
            dependency is a special form of an execution dependency. It causes the other project to be build first and
            adds the jar with the classes of the other project to the classpath. It also add the dependencies of the
            other project to the classpath. So you can enter the
            <code class="literal">api</code>
            folder and trigger a <strong class="userinput"><code>gradle compile</code></strong>. First
            <code class="literal">shared</code>
            is build and then
            <code class="literal">api</code>
            is build. Project dependencies enable partial multi-project builds.
        </p><p>If you come from Maven land you might be perfectly happy with this. If you come from Ivy land, you might
            expect some more fine grained control. Gradle offers this to you:
        </p><div class="example"><a name="javaWithCustomConf"></a><p class="title"><b>Example&nbsp;31.27.&nbsp;Fine grained control over dependencies</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">subprojects {
    usePlugin(<span class="hl-string">'java'</span>)
    group = <span class="hl-string">'org.gradle.sample'</span>
    version = <span class="hl-string">'1.0'</span>
}

project(<span class="hl-string">':api'</span>) {
    configurations {
        spi
    }
    dependencies {
        compile project(<span class="hl-string">':shared'</span>)
    }
    task spiJar(type: Jar) {
        baseName = <span class="hl-string">'api-spi'</span>
        confs = [<span class="hl-string">'spi'</span>]
        fileSet() {
            include(<span class="hl-string">'org/gradle/sample/api/**'</span>)
        }
    }
}

project(<span class="hl-string">':services:personService'</span>) {
    dependencies {
        compile project(<span class="hl-string">':shared'</span>)
        compile project(path: <span class="hl-string">':api'</span>, configuration: <span class="hl-string">'spi'</span>)
        testCompile <span class="hl-string">"junit:junit:3.8.2"</span>, project(<span class="hl-string">':api'</span>)
    }
}</pre></div></div><br class="example-break"><p>The Java plugin adds per default a jar to your project libraries which contains all the classes. In this
            example we create an
            <span class="emphasis"><em>additional</em></span>
            library containing only the interfaces of the
            <code class="literal">api</code>
            project. We assign this library to a new <span class="emphasis"><em>dependency configuration</em></span>. For the person
            service we declare that the project should be compiled only against the
            <code class="literal">api</code>
            interfaces but tested with all classes from <code class="literal">api</code>.
        </p><div class="section" title="31.7.1.&nbsp;Disable the build of dependency projects."><div class="titlepage"><div><div><h3 class="title"><a name="disable_dependency_projects"></a>31.7.1.&nbsp;Disable the build of dependency projects.</h3></div></div></div><p>Sometimes you don't want depended on projects to be built when doing a partial build.
                To disable the build of the depended on projects you can run gradle with the <code class="code">-a</code> option.
            </p></div></div><div class="section" title="31.8.&nbsp;Multi-Project Building and Testing"><div class="titlepage"><div><div><h2 class="title"><a name="sec:multiproject_build_and_test"></a>31.8.&nbsp;Multi-Project Building and Testing</h2></div></div></div><p>The <code class="literal">build</code> task of the Java plugin is typically used to compile, test, and perform
            code style checks (if the CodeQuality plugin is used) of a single project.  In multi-project builds
            you may often want to do all of these tasks across a range of projects.  The <code class="literal">buildNeeded</code>
            and <code class="literal">buildDependents</code> tasks can help with this.
        </p><p>Let's use the project structure shown in <a class="xref" href="#javadependencies_2" title="Example&nbsp;31.26.&nbsp;Project lib dependencies">Example&nbsp;31.26, &ldquo;Project lib dependencies&rdquo;</a>.  In this
            example :services:personservice depends on both :api and :shared.  The :api project also depends on
            :shared.
        </p><p>Assume you are working on a single project, the :api project.  You have been making changes, but
            have not built the entire project since performing a clean.  You want to build any necessary supporting
            jars, but only perform code quality and unit tests on the project you have changed.
            The <code class="literal">build</code> task does this.
        </p><div class="example"><a name="multitestingBuild"></a><p class="title"><b>Example&nbsp;31.28.&nbsp;Build and Test Single Project</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle :api:build</code></strong>
        </p><pre class="screen">&gt; gradle :api:build
:shared:compileJava&#13;
:shared:processResources&#13;
:shared:classes&#13;
:shared:jar&#13;
:shared:uploadDefaultInternal&#13;
:api:compileJava&#13;
:api:processResources&#13;
:api:classes&#13;
:api:jar&#13;
:api:assemble&#13;
:api:compileTestJava&#13;
:api:processTestResources&#13;
:api:testClasses&#13;
:api:test&#13;
:api:check&#13;
:api:build&#13;
&#13;
BUILD SUCCESSFUL&#13;
&#13;
Total time: 1 secs</pre></div></div><br class="example-break"><p>While you are working in a typical development cycle repeatedly building and testing changes to a
            the :api project (knowing that you are only changing files in this one project), you may not want to
            even suffer the expense of :shared:compile checking to see what has changed in the :shared project.
            Adding the <code class="literal">-a</code> option will cause gradle to use cached jars to resolve any project lib
            dependencies and not try to re-build the depended on projects.
        </p><div class="example"><a name="multitestingBuildDashA"></a><p class="title"><b>Example&nbsp;31.29.&nbsp;Partial Build and Test Single Project</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle -a :api:build</code></strong>
        </p><pre class="screen">&gt; gradle -a :api:build
:api:compileJava&#13;
:api:processResources&#13;
:api:classes&#13;
:api:jar&#13;
:api:assemble&#13;
:api:compileTestJava&#13;
:api:processTestResources&#13;
:api:testClasses&#13;
:api:test&#13;
:api:check&#13;
:api:build&#13;
&#13;
BUILD SUCCESSFUL&#13;
&#13;
Total time: 1 secs</pre></div></div><br class="example-break"><p>If you have just gotten the latest version of source from your version control system which included changes
            in other projects that :api depends on, you might want to not only build all the projects you depend on,
            but test them as well. The <code class="literal">buildNeeded</code> task also tests all the projects from the
            project lib dependencies of the testRuntime configuration.
        </p><div class="example"><a name="multitestingBuildNeeded"></a><p class="title"><b>Example&nbsp;31.30.&nbsp;Build and Test Depended On Projects</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle :api:buildNeeded</code></strong>
        </p><pre class="screen">&gt; gradle :api:buildNeeded
:shared:compileJava&#13;
:shared:processResources&#13;
:shared:classes&#13;
:shared:jar&#13;
:shared:uploadDefaultInternal&#13;
:api:compileJava&#13;
:api:processResources&#13;
:api:classes&#13;
:api:jar&#13;
:api:assemble&#13;
:api:compileTestJava&#13;
:api:processTestResources&#13;
:api:testClasses&#13;
:api:test&#13;
:api:check&#13;
:api:build&#13;
:shared:assemble&#13;
:shared:compileTestJava&#13;
:shared:processTestResources&#13;
:shared:testClasses&#13;
:shared:test&#13;
:shared:check&#13;
:shared:build&#13;
:api:buildNeeded&#13;
&#13;
BUILD SUCCESSFUL&#13;
&#13;
Total time: 3.656 secs</pre></div></div><br class="example-break"><p>You also might want to refactor some part of the :api project that is used in other projects.
            If you make these types of changes, it is not sufficient to test just the :api,
            project, you also need to test all projects that depend on the :api project.
            The <code class="literal">buildDependents</code> task also tests all the projects that have a project lib dependency
            (in the testRuntime configuration) on the specified project.
        </p><div class="example"><a name="multitestingBuildDependents"></a><p class="title"><b>Example&nbsp;31.31.&nbsp;Build and Test Dependent Projects</b></p><div class="example-contents"><p>Output of <strong class="userinput"><code>gradle :api:buildDependents</code></strong>
        </p><pre class="screen">&gt; gradle :api:buildDependents
:shared:compileJava&#13;
:shared:processResources&#13;
:shared:classes&#13;
:shared:jar&#13;
:shared:uploadDefaultInternal&#13;
:api:compileJava&#13;
:api:processResources&#13;
:api:classes&#13;
:api:jar&#13;
:api:assemble&#13;
:api:compileTestJava&#13;
:api:processTestResources&#13;
:api:testClasses&#13;
:api:test&#13;
:api:check&#13;
:api:build&#13;
:api:uploadDefaultInternal&#13;
:services:personService:compileJava&#13;
:services:personService:processResources&#13;
:services:personService:classes&#13;
:services:personService:jar&#13;
:services:personService:assemble&#13;
:services:personService:compileTestJava&#13;
:services:personService:processTestResources&#13;
:services:personService:testClasses&#13;
:services:personService:test&#13;
:services:personService:check&#13;
:services:personService:build&#13;
:api:buildDependents&#13;
&#13;
BUILD SUCCESSFUL&#13;
&#13;
Total time: 1 secs</pre></div></div><br class="example-break"><p>Finally, you may want to build and test everything in all projects.  If the root project has declared
        <code class="literal">dependsOnChildren()</code> (as this one does), then any task you run against the root project
        will cause that same named task to be run on all the children.  So you can just run
        <code class="literal">gradle build</code> to build and test all projects.
        </p></div><div class="section" title="31.9.&nbsp;Property and method inheritance"><div class="titlepage"><div><div><h2 class="title"><a name="sec:property_and_method_inheritance"></a>31.9.&nbsp;Property and method inheritance</h2></div></div></div><p>Properties and methods declared in a project are inherited to all its subprojects. This is an alternative
            to configuration injection. But we think that the model of inheritance does not reflect the problem space of
            multi-project builds very well. In a future edition of this user guide we might write more about this.
        </p><p>Method inheritance might be interesting to use as Gradle's
            <span class="emphasis"><em>Configuration Injection</em></span>
            does not support methods yet (but will in a future release.).
        </p><p>You might be wondering why we have implemented a feature we obviously don't like that much. One reason is
            that it is offered by other tools and we want to have the check mark in a feature comparison :). And we like
            to offer our users a choice.
        </p></div><div class="section" title="31.10.&nbsp;Summary"><div class="titlepage"><div><div><h2 class="title"><a name="N138A9"></a>31.10.&nbsp;Summary</h2></div></div></div><p>Writing this chapter was pretty exhausting and reading it might have a similar effect. Our final message
            for this chapter is that multi-project builds with Gradle are usually
            <span class="emphasis"><em>not</em></span>
            difficult. There are six elements you need to remember: <code class="literal">allproject</code>, <code class="literal">
            subprojects</code>, <code class="literal">dependsOn</code>, <code class="literal">childrenDependOnMe</code>,
            <code class="literal">dependOnChildren</code>
            and project lib dependencies.
            <sup>[<a href="#ftn.N138C0" name="N138C0" class="footnote">30</a>]</sup>
            With those elements, and keeping in mind that Gradle has a distinct configuration and execution phase, you
            have already a lot of flexibility. But when you enter steep territory Gradle does not become an obstacle and
            usually accompanies and carries you to the top of the mountain.
        </p></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N1373D" name="ftn.N1373D" class="para">27</a>] </sup>The real use case we had, was using <a class="ulink" href="http://lucene.apache.org/solr" target="_top">http://lucene.apache.org/solr</a>, where you
                        need a separate war for each index your are accessing. That was one reason why we have created a
                        distribution of webapps. The Resin servlet container allows us, to let such a distribution point
                        to a base installation of the servlet container.
                    </p></div><div class="footnote"><p><sup>[<a href="#N137E5" name="ftn.N137E5" class="para">28</a>] </sup>
                    <code class="literal">services</code>
                    is also a project, but we use it just as a container. It has no build script and gets nothing
                    injected by another build script.
                </p></div><div class="footnote"><p><sup>[<a href="#N13805" name="ftn.N13805" class="para">29</a>] </sup>We do this here, as it makes the layout a bit easier. We usually put the project specific stuff
                    into the buildscript of the respective projects.
                </p></div><div class="footnote"><p><sup>[<a href="#N138C0" name="ftn.N138C0" class="para">30</a>] </sup>So we are well in the range of the
                    <a class="ulink" href="http://en.wikipedia.org/wiki/The_Magical_Number_Seven,_Plus_or_Minus_Two" target="_top">7 plus 2
                        Rule
                    </a>
                    :)
                </p></div></div></div><div class="chapter" title="Chapter&nbsp;32.&nbsp;Writing Custom Tasks"><div class="titlepage"><div><div><h1><a name="custom_tasks"></a>Chapter&nbsp;32.&nbsp;Writing Custom Tasks</h1></div></div></div><p>Gradle supports 2 types of task. One such type is the simple task, where you define the task with an
        action closure. We have seen these in <a class="xref" href="#tutorial_using_tasks" title="Chapter&nbsp;4.&nbsp;Build Script Basics">Chapter&nbsp;4, <i>Build Script Basics</i></a>. For this type of task, the action
        closure determines the behaviour of the task. This type of task is good for implementing one-off tasks in your
        build script.
    </p><p>
        The other type of task is the enhanced task, where the behaviour is built into the task, and the task provides some
        properties which you can use to configure the behaviour. We have seen these in
        <a class="xref" href="#more_about_tasks" title="Chapter&nbsp;13.&nbsp;More about Tasks">Chapter&nbsp;13, <i>More about Tasks</i></a>. Most Gradle plugins use enhanced tasks. With enhanced tasks, you don't need
        to implement the task behaviour as you do with simple tasks. You simply declare and configure the task using
        its properties.
        In this way, enhanced tasks let you reuse a piece of behaviour in many different places, potentially
        across different builds.
    </p><p>Gradle allows you to implement your own custom enhanced tasks.
        Implementing such a custom task in Gradle is easy.
        You can implement a custom task in pretty much any language you like, provided it ends up compiled to classes
        files. In our examples, we are going to use Groovy as the implementation language, but you could use, for
        example, Java or Scala.
    </p><p>There are several places where you can put the source for the task. Two convenient options
        are to add the task implementation to your build script, or to put the source in the
        <code class="filename">
        <em class="replaceable"><code>rootProjectDir</code></em>/buildSrc/src/main/groovy</code> directory. Gradle will
        take care of compiling the task and making it available on the classpath of the build script.
        See <a class="xref" href="#organizing_build_logic" title="Chapter&nbsp;34.&nbsp;Organizing Build Logic">Chapter&nbsp;34, <i>Organizing Build Logic</i></a> for more details, and some other options.
        In our examples, we will put the task implementation in the build script, to keep things simple.
    </p><p>To implement a custom task, you extend <a class="ulink" href="http://www.gradle.org/0.8/docs/groovydoc/org/gradle/api/DefaultTask.html" target="_top">
        <code class="classname">DefaultTask</code>
      </a>.
    </p><div class="example"><a name="customTask"></a><p class="title"><b>Example&nbsp;32.1.&nbsp;Defining a custom task</b></p><div class="example-contents"><p>
        <code class="filename">build.gradle</code>
      </p><pre class="programlisting"><span class="hl-keyword">class</span> HelloTask <span class="hl-keyword">extends</span> DefaultTask {
}</pre></div></div><br class="example-break"><p>This task doesn't do anything useful, so let's add some behaviour. To do so, we add a method to the task and mark
        it with the <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/TaskAction.html" target="_top">
        <code class="classname">TaskAction</code>
      </a> annotation. Gradle will call the method when the
        task executes.
        You don't have to use a method to define the behaviour for the task. You could, for instance, call
        <code class="literal">doFirst()</code> or <code class="literal">doLast()</code> with a closure in the task constructor to add behaviour.
    </p><div class="example"><a name="customTaskWithAction"></a><p class="title"><b>Example&nbsp;32.2.&nbsp;A hello world task</b></p><div class="example-contents"><p>
        <code class="filename">build.gradle</code>
      </p><pre class="programlisting">task hello(type: HelloTask)

<span class="hl-keyword">class</span> HelloTask <span class="hl-keyword">extends</span> DefaultTask {
    <span class="hl-annotation">@TaskAction</span>
    def printGreeting() {
        println <span class="hl-string">'hello from HelloTask'</span>
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong>
      </p><pre class="screen">&gt; gradle -q hello
hello from HelloTask</pre></div></div><br class="example-break"><p>Let's add a property to the task, so we can customize it.</p><div class="example"><a name="customTaskWithProperty"></a><p class="title"><b>Example&nbsp;32.3.&nbsp;A customizable hello world task</b></p><div class="example-contents"><p>
        <code class="filename">build.gradle</code>
      </p><pre class="programlisting">task hello(type: HelloTask)

task greeting(type: HelloTask) {
    greeting = <span class="hl-string">'greetings from HelloTask'</span>
}

<span class="hl-keyword">class</span> HelloTask <span class="hl-keyword">extends</span> DefaultTask {
    def String greeting = <span class="hl-string">'hello from HelloTask'</span>

    <span class="hl-annotation">@TaskAction</span>
    def printGreeting() {
        println greeting
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q hello greeting</code></strong>
      </p><pre class="screen">&gt; gradle -q hello greeting
hello from HelloTask
greetings from HelloTask</pre></div></div><br class="example-break"></div><div class="chapter" title="Chapter&nbsp;33.&nbsp;Writing Custom Plugins"><div class="titlepage"><div><div><h1><a name="custom_plugins"></a>Chapter&nbsp;33.&nbsp;Writing Custom Plugins</h1></div></div></div><p>A Gradle plugin packages up some reusable piece of build logic, which can be used across many different
        projects and builds. Gradle allows you to implement your own custom plugins, so you can reuse your
        build logic, and potentially share it with others.
    </p><p>
        You can implement a custom plugin in any language you like, provided the implementation ends up compiled as class
        files. For the examples here, we are going to use Groovy as the implementation language. You could use
        Java or Scala instead, if you wanted.
    </p><p>There are several places where you can put the source for the plugin. Two convenient options
        are to add the task implementation to your build script, or to put the source in the
        <code class="filename">
        <em class="replaceable"><code>rootProjectDir</code></em>/buildSrc/src/main/groovy</code> directory. Gradle will
        take care of compiling the task and making it available on the classpath of the build script.
        See <a class="xref" href="#organizing_build_logic" title="Chapter&nbsp;34.&nbsp;Organizing Build Logic">Chapter&nbsp;34, <i>Organizing Build Logic</i></a> for more details, and some other options.
        In our examples, we will put the task implementation in the build script, to keep things simple.
    </p><p>To create a custom plugin, you need to write an implementation of <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/Plugin.html" target="_top">
        <code class="classname">Plugin</code>
      </a>.
        Gradle instantiates the plugin and calls the plugin instance's <code class="literal">use()</code> method when the plugin
        is used with a project. The project
        object is passed as a parameter, which the plugin can use to configure the project however it needs to.
        The following sample contains a greeting plugin, which adds a <code class="literal">hello</code> task to the project.
    </p><div class="example"><a name="customPlugin"></a><p class="title"><b>Example&nbsp;33.1.&nbsp;A custom plugin</b></p><div class="example-contents"><p>
        <code class="filename">build.gradle</code>
      </p><pre class="programlisting">usePlugin(GreetingPlugin)

<span class="hl-keyword">class</span> GreetingPlugin <span class="hl-keyword">implements</span> Plugin {
    def <span class="hl-keyword">void</span> use(Project project, ProjectPluginsContainer projectPluginsHandler) {
        project.task(<span class="hl-string">'hello'</span>) &lt;&lt; {
            println <span class="hl-string">"Hello from the GreetingPlugin"</span>
        }
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong>
      </p><pre class="screen">&gt; gradle -q hello
Hello from the GreetingPlugin</pre></div></div><br class="example-break"><p>One thing to note is that only one instance of a given plugin is created for a given build. The same plugin
        instance is used for all projects in the build.
    </p><p>Let's add a convention object to the project. Here we add a <code class="literal">greeting</code> property to the
        project, which allows you to configure the greeting.
    </p><div class="example"><a name="customPluginWithConvention"></a><p class="title"><b>Example&nbsp;33.2.&nbsp;A custom plugin convention</b></p><div class="example-contents"><p>
        <code class="filename">build.gradle</code>
      </p><pre class="programlisting">usePlugin(GreetingPlugin)

greeting = <span class="hl-string">'Hi from Gradle'</span>

<span class="hl-keyword">class</span> GreetingPlugin <span class="hl-keyword">implements</span> Plugin {
    def <span class="hl-keyword">void</span> use(Project project, ProjectPluginsContainer projectPluginsHandler) {
        project.convention.plugins.greeting = <span class="hl-keyword">new</span> GreetingPluginConvention()
        project.task(<span class="hl-string">'hello'</span>) &lt;&lt; {
            println project.greeting
        }
    }
}

<span class="hl-keyword">class</span> GreetingPluginConvention {
    def String greeting = <span class="hl-string">'Hello from GreetingPlugin'</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong>
      </p><pre class="screen">&gt; gradle -q hello
Hi from Gradle</pre></div></div><br class="example-break"></div><div class="chapter" title="Chapter&nbsp;34.&nbsp;Organizing Build Logic"><div class="titlepage"><div><div><h1><a name="organizing_build_logic"></a>Chapter&nbsp;34.&nbsp;Organizing Build Logic</h1></div></div></div><p>Gradle offers a variety of ways to organize your build logic. First of all you can put your build logic
        directly in the action closure of a task. If a couple of tasks share the same logic you can extract this logic
        into a method. If multiple projects of a multi-project build share some logic you can define this method in the
        parent project. If the build logic gets too complex for being properly modeled by methods you want have an OO
        Model.
        <sup>[<a href="#ftn.N1398A" name="N1398A" class="footnote">31</a>]</sup>
        Gradle makes this very easy. Just drop your classes in a certain folder and Gradle automatically compiles them
        and puts them in the classpath of your build script.
    </p><div class="section" title="34.1.&nbsp;Build sources"><div class="titlepage"><div><div><h2 class="title"><a name="sec:build_sources"></a>34.1.&nbsp;Build sources</h2></div></div></div><p>If you run Gradle, it checks for the existence of a folder called <code class="literal">buildSrc</code>. Just put
            your build source code in this folder and stick to the layout convention for a Java/Groovy project (see
            <a class="xref" href="#javalayout" title="Table&nbsp;18.4.&nbsp;Java plugin - default project layout">Table&nbsp;18.4, &ldquo;Java plugin - default project layout&rdquo;</a>). Gradle then automatically compiles and tests this code and puts it in
            the classpath of your build script. You don't need to provide any further instruction. For multi-project
            builds there can be only one <code class="literal">buildSrc</code> directory which has to be in the root project.
        </p><p>This is probably good enough for most of the cases. If you need more flexibility, you can provide a
            <code class="filename">build.gradle</code> and a <code class="filename">settings.gradle</code> file in the
            <code class="filename">buildSrc</code> folder. If you like, you can even have a multi-project build in there.
        </p></div><div class="section" title="34.2.&nbsp;External dependencies for the build script"><div class="titlepage"><div><div><h2 class="title"><a name="sec:external_dependencies"></a>34.2.&nbsp;External dependencies for the build script</h2></div></div></div><p>If your build script needs to use external libraries, you can add them to the script's classpath in the
            build script itself. You do this using the <code class="literal">buildscript()</code> method, passing in a closure which
            declares the build script classpath.
        </p><div class="example"><a name="declareExternalBuildDependency"></a><p class="title"><b>Example&nbsp;34.1.&nbsp;Declaring external dependencies for the build script</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath group: <span class="hl-string">'commons-codec'</span>, name: <span class="hl-string">'commons-codec'</span>, version: <span class="hl-string">'1.2'</span>
    }
}</pre></div></div><br class="example-break"><p>The closure passed to the <code class="literal">buildscript()</code> method configures a
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/initialization/dsl/ScriptHandler.html" target="_top">
          <code class="classname">ScriptHandler</code>
        </a> instance. You declare the build script
            classpath by adding dependencies to the <code class="literal">classpath</code> configuration. This is the same way
            you declare, for example, the Java compilation classpath. You can use any of the dependency types described
            in <a class="xref" href="#sec:how_to_declare_your_dependencies" title="28.3.&nbsp;How to declare your dependencies">Section&nbsp;28.3, &ldquo;How to declare your dependencies&rdquo;</a>, except project dependencies.</p><p>Having declared the build script classpath, you can use the classes in your build script as you would
            any other classes on the classpath. The following example adds to the previous example, and uses classes
            from the build script classpath.</p><div class="example"><a name="externalBuildDependency"></a><p class="title"><b>Example&nbsp;34.2.&nbsp;A build script with external dependencies</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting"><span class="hl-keyword">import</span> org.apache.commons.codec.binary.Base6<span class="hl-number">4</span>

buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath group: <span class="hl-string">'commons-codec'</span>, name: <span class="hl-string">'commons-codec'</span>, version: <span class="hl-string">'1.2'</span>
    }
}

task encode &lt;&lt; {
    def <span class="hl-keyword">byte</span>[] encodedString = <span class="hl-keyword">new</span> Base6<span class="hl-number">4</span>().encode(<span class="hl-string">'hello world\n'</span> as <span class="hl-keyword">byte</span>[])
    println <span class="hl-keyword">new</span> String(encodedString)
}</pre><p>Output of <strong class="userinput"><code>gradle -q encode</code></strong>
        </p><pre class="screen">&gt; gradle -q encode
aGVsbG8gd29ybGQK</pre></div></div><br class="example-break"><p>
            For multi-project builds, the dependencies declared in the a project's build script, are available to the
            build scripts of all sub-projects.
        </p></div><div class="section" title="34.3.&nbsp;Ant optional dependencies"><div class="titlepage"><div><div><h2 class="title"><a name="sec:ant_optional_dependencies"></a>34.3.&nbsp;Ant optional dependencies</h2></div></div></div><p>For reasons we don't fully understand yet, external dependencies are not picked up by Ant's optional
            tasks. But you can easily do it in another way.
            <sup>[<a href="#ftn.N139EC" name="N139EC" class="footnote">32</a>]</sup>
        </p><div class="example"><a name="buildLogic"></a><p class="title"><b>Example&nbsp;34.3.&nbsp;Ant optional dependencies</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">configurations {
    ftpAntTask
}

dependencies {
    ftpAntTask(<span class="hl-string">"org.apache.ant:ant-commons-net:1.7.0"</span>) {
        module(<span class="hl-string">"commons-net:commons-net:1.4.1"</span>) {
            dependencies <span class="hl-string">"oro:oro:2.0.8:jar"</span>
        }
    }
}

task ftp &lt;&lt; {
    ant {
        taskdef(name: <span class="hl-string">'ftp'</span>,
                classname: <span class="hl-string">'org.apache.tools.ant.taskdefs.optional.net.FTP'</span>,
                classpath: configurations.ftpAntTask.asPath)
        ftp(server: <span class="hl-string">"ftp.apache.org"</span>, userid: <span class="hl-string">"anonymous"</span>, password: <span class="hl-string">"me@myorg.com"</span>) {
            fileset(dir: <span class="hl-string">"htdocs/manual"</span>)
        }
    }
}</pre></div></div><br class="example-break"><p>This is also nice example for the usage of client modules. The pom.xml in maven central for the
        ant-commons-net task does not provide the right information for this use case.</p></div><div class="section" title="34.4.&nbsp;Summary"><div class="titlepage"><div><div><h2 class="title"><a name="sec:philosophy"></a>34.4.&nbsp;Summary</h2></div></div></div><p>Gradle offers you a variety of ways of organizing your build logic. You can choose what is right for your
            domain and find the right balance between unnecessary indirections, and avoiding redundancy and a hard to
            maintain code base. It is our experience that even very complex custom build logic is rarely shared between
            different builds. Other build tools enforce a separation of this build logic into a separate project. Gradle
            spares you this unnecessary overhead and indirection.
        </p></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N1398A" name="ftn.N1398A" class="para">31</a>] </sup>Which might range from a single class to something very complex.
            </p></div><div class="footnote"><p><sup>[<a href="#N139EC" name="ftn.N139EC" class="para">32</a>] </sup>In fact, we think this is anyway the nicer solution. Only if your buildscript and Ant's optional
                    task need the <span class="emphasis"><em>same</em></span> library you would have to define it two times. In such a
                    case it would be nice, if Ant's optional task would automatically pickup the classpath defined
                    in the <code class="literal">gradesettings</code>.
                </p></div></div></div><div class="chapter" title="Chapter&nbsp;35.&nbsp;Initialization Scripts"><div class="titlepage"><div><div><h1><a name="init_scripts"></a>Chapter&nbsp;35.&nbsp;Initialization Scripts</h1></div></div></div><p>Gradle provides a powerful mechanism to allow customizing the build based on the current environment.  This
        mechanism also supports tools that wish to integrate with Gradle.
    </p><div class="section" title="35.1.&nbsp;Basic usage"><div class="titlepage"><div><div><h2 class="title"><a name="sec:basic_usage"></a>35.1.&nbsp;Basic usage</h2></div></div></div><p>Initialization scripts (a.k.a. <em class="firstterm">init scripts</em>) are similar to other scripts in Gradle.
            These scripts, however, are run before the build starts.  Here are several possible uses:
            </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Set up properties based on the current environment (such as a developer's machine vs. a
                        continuous integration server.
                    </p></li><li class="listitem"><p>Supply personal information about the user to the build, such as repository or database
                        authentication credentials.
                    </p></li><li class="listitem"><p>Define machine specific details, such as where JDKs are installed.
                    </p></li><li class="listitem"><p>Register build listeners.  External tools that wish to listen to Gradle events might find
                        this useful.
                    </p></li></ul></div><p>
            One main limitation of init scripts is that they cannot access classes in the buildSrc special module (see
            <a class="xref" href="#sec:build_sources" title="34.1.&nbsp;Build sources">Section&nbsp;34.1, &ldquo;Build sources&rdquo;</a> for details of this feature).
        </p><p>There are two ways to use init scripts.  Either put a file called <code class="filename">init.gradle</code> in
            <code class="filename">
          <em class="replaceable"><code>USER_HOME</code></em>/.gradle</code>,
            or specify the file on the command line.  The command line option is <code class="option">-I</code> or
            <code class="option">--init-script</code> followed by the path to the script.  The command line option can appear
            more than once, each time adding another init script. If more than one init script is found they will all be
            executed. This allows for a tool to specify an init script and the user to put home in their home directory
            for defining the environment and both scripts will run when gradle is executed.
        </p></div><div class="section" title="35.2.&nbsp;External dependencies for the init script"><div class="titlepage"><div><div><h2 class="title"><a name="sec:custom_classpath"></a>35.2.&nbsp;External dependencies for the init script</h2></div></div></div><p>In <a class="xref" href="#sec:external_dependencies" title="34.2.&nbsp;External dependencies for the build script">Section&nbsp;34.2, &ldquo;External dependencies for the build script&rdquo;</a> is was explained how to add external dependencies to a
            build script. Init scripts can similarly have external dependencies defined.  You do this using the
            <code class="literal">initscript()</code> method, passing in a closure which declares the init script classpath.
        </p><div class="example"><a name="declareExternalInitDependency"></a><p class="title"><b>Example&nbsp;35.1.&nbsp;Declaring external dependencies for an init script</b></p><div class="example-contents"><p>
          <code class="filename">init.gradle</code>
        </p><pre class="programlisting">initscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath group: <span class="hl-string">'org.apache.commons'</span>, name: <span class="hl-string">'commons-math'</span>, version: <span class="hl-string">'2.0'</span>
    }
}</pre></div></div><br class="example-break"><p>The closure passed to the <code class="literal">initscript()</code> method configures a
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/initialization/dsl/ScriptHandler.html" target="_top">
          <code class="classname">ScriptHandler</code>
        </a> instance. You declare the init script
            classpath by adding dependencies to the <code class="literal">classpath</code> configuration. This is the same way
            you declare, for example, the Java compilation classpath. You can use any of the dependency types described
            in <a class="xref" href="#sec:how_to_declare_your_dependencies" title="28.3.&nbsp;How to declare your dependencies">Section&nbsp;28.3, &ldquo;How to declare your dependencies&rdquo;</a>, except project dependencies.</p><p>Having declared the init script classpath, you can use the classes in your init script as you would
            any other classes on the classpath. The following example adds to the previous example, and uses classes
            from the init script classpath.</p><div class="example"><a name="externalInitDependency"></a><p class="title"><b>Example&nbsp;35.2.&nbsp;An init script with external dependencies</b></p><div class="example-contents"><p>
          <code class="filename">init.gradle</code>
        </p><pre class="programlisting"><span class="hl-keyword">import</span> org.apache.commons.math.fraction.Fraction

initscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath group: <span class="hl-string">'org.apache.commons'</span>, name: <span class="hl-string">'commons-math'</span>, version: <span class="hl-string">'2.0'</span>
    }
}

println Fraction.ONE_FIFTH.multiply(<span class="hl-number">2</span>)</pre><p>Output of <strong class="userinput"><code>gradle --init-script init.gradle -q doNothing</code></strong>
        </p><pre class="screen">&gt; gradle --init-script init.gradle -q doNothing
2 / 5</pre></div></div><br class="example-break"></div></div><div class="chapter" title="Chapter&nbsp;36.&nbsp;The Gradle Wrapper"><div class="titlepage"><div><div><h1><a name="gradle_wrapper"></a>Chapter&nbsp;36.&nbsp;The Gradle Wrapper</h1></div></div></div><p>Gradle is a new tool. You can't expect it to be installed on machines beyond your sphere of influence. An
        example are continuous integration server where Gradle is not installed and where you have no admin rights for
        the machine. Or what if you provide an open source project and you want to make it as easy as possible for your
        users to build it?
    </p><p>There is a simple and good news. Gradle provides a solution for this. It ships with a
        <span class="emphasis"><em>Wrapper</em></span>
        task.
        <sup>[<a href="#ftn.N13A89" name="N13A89" class="footnote">33</a>]</sup>
        <sup>[<a href="#ftn.N13A8D" name="N13A8D" class="footnote">34</a>]</sup>
        You can create such a task in your build script.
    </p><div class="example"><a name="wrapperSimple"></a><p class="title"><b>Example&nbsp;36.1.&nbsp;Wrapper task</b></p><div class="example-contents"><p>
        <code class="filename">build.gradle</code>
      </p><pre class="programlisting">task wrapper(type: Wrapper) {
    gradleVersion = <span class="hl-string">'0.6'</span>
}</pre></div></div><br class="example-break"><p>The build master usually explicitly executes this task. After such
        an execution you find the following new or updated files in your project folder (in case the default configuration of the wrapper task is
        used).
    </p><pre class="screen">project-root/
  gradlew
  gradlew.bat
  gradle-wrapper.jar
  gradle-wrapper.properties</pre><p>All these files must be submitted to your version control system. The <span class="command"><strong>gradlew</strong></span> command
        can be used <span class="emphasis"><em>exactly</em></span> the same way as the <span class="command"><strong>gradle</strong></span> command.
    </p><p>If you want to switch to a new version of Gradle you don't need to rerun the wrapper task. It is good enough
        to change the respective entry in the <code class="literal">gradle-wrapper.properties</code> file. But if there is for
        example an improvement in the gradle-wrapper functionality you need to regenerate the wrapper files.
    </p><div class="section" title="36.1.&nbsp;Configuration"><div class="titlepage"><div><div><h2 class="title"><a name="sec:configuration"></a>36.1.&nbsp;Configuration</h2></div></div></div><p>If you run Gradle with <span class="command"><strong>gradlew</strong></span>, Gradle checks if a Gradle distribution for the wrapper
            is available. If not it tries to download it, otherwise it delegates to the <span class="command"><strong>gradle</strong></span>
            command of this distribution with all the arguments passed originally to the <span class="command"><strong>gradlew</strong></span>
            command.
        </p><p>You can specify where the wrapper files should be stored (within your project directory):</p><div class="example"><a name="wrapperCustomized"></a><p class="title"><b>Example&nbsp;36.2.&nbsp;Configuration of wrapper task</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task wrapper(type: Wrapper) {
    gradleVersion = <span class="hl-string">'0.6'</span>
    jarPath = <span class="hl-string">'wrapper'</span>
}</pre></div></div><br class="example-break"><pre class="screen">project-root/
  gradlew
  gradlew.bat
  wrapper/
    gradle-wrapper.jar
    gradle-wrapper.properties</pre><p>
            You can specify the download URL of the wrapper distribution. You can also specify where the wrapper distribution
            should be stored and unpacked (either within the project or within the gradle user home dir). If the wrapper
            is run and there is local archive of the wrapper distribution Gradle tries to download it and stores it at
            the specified place. If there is no unpacked wrapper distribution Gradle unpacks the local archive of the
            wrapper distribution at the specified place. All the configuration options have defaults except the version of the wrapper distribution.</p><p>For the details on how to configure the wrapper, see <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/wrapper/Wrapper.html" target="_top">
          <code class="classname">Wrapper</code>
        </a>
        </p><p>If you don't
            want any download to happen when your project is build via <span class="command"><strong>gradlew</strong></span>, simply add the Gradle
            distribution zip to your version control at the location specified by your wrapper configuration.
        </p><p>If you build via the wrapper, any existing Gradle distribution installed on the machine is ignored.
        </p></div><div class="section" title="36.2.&nbsp;Unix file permissions"><div class="titlepage"><div><div><h2 class="title"><a name="sec:unix_file_permissions"></a>36.2.&nbsp;Unix file permissions</h2></div></div></div><p>The Wrapper task adds appropriate file permissions to allow the execution for the gradlew *NIX command.
            Subversion preserves this file permission. We are not sure how other version control systems deal with this.
            What should always work is to execute <code class="literal">sh gradlew</code>.
        </p></div><div class="section" title="36.3.&nbsp;Environment variable"><div class="titlepage"><div><div><h2 class="title"><a name="sec:environment_variable"></a>36.3.&nbsp;Environment variable</h2></div></div></div><p>Some rather exotic use cases might occur when working with the Gradle Wrapper. For example the continuos
            integration server goes down during unzipping the Gradle distribution. As the distribution directory exists
            <span class="command"><strong>gradlew</strong></span>
            delegates to it but the distribution is corrupt. Or the zip-distribution was not properly downloaded. When
            you have no admin right on the continuous integration server to remove the corrupt files, Gradle offers a
            solution via environment variables.
        </p><div class="table"><p class="title"><b>Table&nbsp;36.1.&nbsp;Gradle wrapper environment variables</b></p><div class="table-contents"><table id="N13AF7"><thead><tr>
                    <td>Variable Name</td>
                    <td>Meaning</td>
                </tr></thead><tr>
                <td>GRADLE_WRAPPER_ALWAYS_UNPACK</td>
                <td>If set to <code class="literal">true</code>, the distribution directory gets always deleted when
                    <span class="command"><strong>gradlew</strong></span>
                    is run and the distribution zip is freshly unpacked. If the zip is not there, Gradle tries to
                    download it.
                </td>
            </tr><tr>
                <td>GRADLE_WRAPPER_ALWAYS_DOWNLOAD</td>
                <td>If set to <code class="literal">true</code>, the distribution directory and the distribution zip gets always
                    deleted when <span class="command"><strong>gradlew</strong></span>
                    is run and the distribution zip is freshly downloaded.
                </td>
            </tr></table></div></div></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N13A89" name="ftn.N13A89" class="para">33</a>] </sup>If you download the Gradle source distribution or check out Gradle from SVN, you can build Gradle via
                the Gradle wrapper.
            </p></div><div class="footnote"><p><sup>[<a href="#N13A8D" name="ftn.N13A8D" class="para">34</a>] </sup>Gradle itself is continuously built by Bamboo and Teamcity via this wrapper. See
                <a class="ulink" href="http://gradle.org/ci-server.html" target="_top">http://gradle.org/ci-server.html</a>
            </p></div></div></div><div class="chapter" title="Chapter&nbsp;37.&nbsp;Embedding Gradle"><div class="titlepage"><div><div><h1><a name="embedding"></a>Chapter&nbsp;37.&nbsp;Embedding Gradle</h1></div></div></div><p>t.b.d.
    </p></div><div class="appendix" title="Appendix&nbsp;A.&nbsp;Potential Traps"><div class="titlepage"><div><div><h1><a name="potential_traps"></a>Appendix&nbsp;A.&nbsp;Potential Traps</h1></div></div></div><div class="section" title="A.1.&nbsp;Groovy script variables"><div class="titlepage"><div><div><h2 class="title"><a name="sec:groovy_script_variables"></a>A.1.&nbsp;Groovy script variables</h2></div></div></div><p>For Gradle users it is important to understand how Groovy deals with script variables. Groovy has two types
            of script variables. One with a local scope and one with a script wide scope.
        </p><div class="example"><a name="scope"></a><p class="title"><b>Example&nbsp;A.1.&nbsp;Variables scope: local and script wide</b></p><div class="example-contents"><p>
          <code class="filename">scope.groovy</code>
        </p><pre class="programlisting">String localScope1 = <span class="hl-string">'localScope1'</span>
def localScope2 = <span class="hl-string">'localScope2'</span>
scriptScope = <span class="hl-string">'scriptScope'</span>

println localScope1
println localScope2
println scriptScope

closure = {
    println localScope1
    println localScope2
    println scriptScope
}

def method() {
    <span class="hl-keyword">try</span> {localScope1} <span class="hl-keyword">catch</span>(MissingPropertyException e) {println <span class="hl-string">'localScope1NotAvailable'</span> }
    <span class="hl-keyword">try</span> {localScope2} <span class="hl-keyword">catch</span>(MissingPropertyException e) {println <span class="hl-string">'localScope2NotAvailable'</span> }
    println scriptScope
}

closure.call()
method()</pre><p>Output of <strong class="userinput"><code>gradle </code></strong>
        </p><pre class="screen">&gt; gradle 
localScope1
localScope2
scriptScope
localScope1
localScope2
scriptScope
localScope1NotAvailable
localScope2NotAvailable
scriptScope</pre></div></div><br class="example-break"><p>Variables which are declared with a type modifier are visible within closures but not visible within
            methods. This is a heavily discussed behavior in the Groovy community.
            <sup>[<a href="#ftn.N13B48" name="N13B48" class="footnote">35</a>]</sup>
        </p></div><div class="section" title="A.2.&nbsp;Configuration and execution phase"><div class="titlepage"><div><div><h2 class="title"><a name="sec:configuration_and_execution_phase"></a>A.2.&nbsp;Configuration and execution phase</h2></div></div></div><p>It is important to keep in mind that Gradle has a distinct configuration and execution phase (see 
            <a class="xref" href="#build_lifecycle" title="Chapter&nbsp;30.&nbsp;The Build Lifecycle">Chapter&nbsp;30, <i>The Build Lifecycle</i></a>).
        </p><div class="example"><a name="mkdirTrap"></a><p class="title"><b>Example&nbsp;A.2.&nbsp;Distinct configuration and execution phase</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">classesDir = <span class="hl-keyword">new</span> File(<span class="hl-string">'build/classes'</span>)
classesDir.mkdirs()
task clean &lt;&lt; {
    ant.delete(dir: <span class="hl-string">'build'</span>)
}
task compile(dependsOn: <span class="hl-string">'clean'</span>) &lt;&lt; {
    <span class="hl-keyword">if</span> (!classesDir.isDirectory()) {
        println <span class="hl-string">'The class directory does not exist. I can not operate'</span>
        <span class="hl-comment">// do something</span>
    }
    <span class="hl-comment">// do something</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q compile</code></strong>
        </p><pre class="screen">&gt; gradle -q compile
The class directory does not exist. I can not operate</pre></div></div><br class="example-break"><p>As the creation of the directory happens during the configuration phase, the
            <code class="literal">clean</code>
            task removes the directory during the execution phase.
        </p></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N13B48" name="ftn.N13B48" class="para">35</a>] </sup>One of those discussions can be found here:
                    <a class="ulink" href="http://www.nabble.com/script-scoping-question-td16034724.html" target="_top">http://www.nabble.com/script-scoping-question-td16034724.html</a>
                </p></div></div></div><div class="appendix" title="Appendix&nbsp;B.&nbsp;Gradle Command Line"><div class="titlepage"><div><div><h1><a name="gradle_command_line"></a>Appendix&nbsp;B.&nbsp;Gradle Command Line</h1></div></div></div><p>The <span class="command"><strong>gradle</strong></span> command has the following usage:
        </p><div class="cmdsynopsis"><p><code class="command">gradle</code>  [option...] [task-name...]</p></div><p>
        The command-line options available for the <span class="command"><strong>gradle</strong></span> command are listed below:
    </p><div class="variablelist"><dl><dt><span class="term">
          <code class="option">-?</code>, <code class="option">-h</code>, <code class="option">--help</code>
        </span></dt><dd><p>Shows a help message.</p></dd><dt><span class="term">
          <code class="option">-C</code>, <code class="option">--cache</code>
        </span></dt><dd><p>Specifies how compiled build scripts should be cached. Possible values are:
                <code class="literal">rebuild</code>, <code class="literal">off</code>, <code class="literal">on</code>. Default value is
                <code class="literal">on</code>. See <a class="xref" href="#sec:caching" title="11.4.&nbsp;Caching">Section&nbsp;11.4, &ldquo;Caching&rdquo;</a> for more details.
            </p></dd><dt><span class="term">
          <code class="option">-D</code>, <code class="option">--system-prop</code>
        </span></dt><dd><p>Sets a system property of the JVM, for example <code class="literal">-Dmyprop=myvalue</code>.
            </p></dd><dt><span class="term">
          <code class="option">-I</code>, <code class="option">--init-script</code>
        </span></dt><dd><p>Specifies an initialization script.  See
                <a class="xref" href="#init_scripts" title="Chapter&nbsp;35.&nbsp;Initialization Scripts">Chapter&nbsp;35, <i>Initialization Scripts</i></a> for details.</p></dd><dt><span class="term">
          <code class="option">-K</code>, <code class="option">--default-import-file</code>
        </span></dt><dd><p>Specifies the default import file.</p></dd><dt><span class="term">
          <code class="option">-P</code>, <code class="option">--project-prop</code>
        </span></dt><dd><p>Sets a project property of the root project, for example
                <code class="literal">-Pmyprop=myvalue</code>.
            </p></dd><dt><span class="term">
          <code class="option">-S</code>, <code class="option">--full-stacktrace</code>
        </span></dt><dd><p>Print out the full (very verbose) stacktrace for any exceptions. See <a class="xref" href="#logging" title="Chapter&nbsp;15.&nbsp;Logging">Chapter&nbsp;15, <i>Logging</i></a>.
            </p></dd><dt><span class="term">
          <code class="option">-a</code>, <code class="option">--no-rebuild</code>
        </span></dt><dd><p>Do not rebuild project dependencies.
            </p></dd><dt><span class="term">
          <code class="option">-b</code>, <code class="option">--build-file</code>
        </span></dt><dd><p>Specifies the build file.
            </p></dd><dt><span class="term">
          <code class="option">-c</code>, <code class="option">--settings-file</code>
        </span></dt><dd><p>Specifies the settings file.</p></dd><dt><span class="term">
          <code class="option">-d</code>, <code class="option">--debug</code>
        </span></dt><dd><p>Log in debug mode (includes normal stacktrace). See <a class="xref" href="#logging" title="Chapter&nbsp;15.&nbsp;Logging">Chapter&nbsp;15, <i>Logging</i></a>.
            </p></dd><dt><span class="term">
          <code class="option">-e</code>, <code class="option">--embedded</code>
        </span></dt><dd><p>Specify an embedded build script.
            </p></dd><dt><span class="term">
          <code class="option">-g</code>, <code class="option">--gradle-user-home</code>
        </span></dt><dd><p>Specifies the Gradle user home directory.
            </p></dd><dt><span class="term">
          <code class="option">--gui</code>
        </span></dt><dd><p>Launches a GUI application. See <a class="xref" href="#tutorial_gradle_gui" title="Chapter&nbsp;10.&nbsp;Using the Gradle Graphical User Interface">Chapter&nbsp;10, <i>Using the Gradle Graphical User Interface</i></a>.
            </p></dd><dt><span class="term">
          <code class="option">-i</code>, <code class="option">--info</code>
        </span></dt><dd><p>Set log level to info. See <a class="xref" href="#logging" title="Chapter&nbsp;15.&nbsp;Logging">Chapter&nbsp;15, <i>Logging</i></a>.
            </p></dd><dt><span class="term">
          <code class="option">-l</code>, <code class="option">--plugin-properties-file</code>
        </span></dt><dd><p>Specifies the plugin properties file.
            </p></dd><dt><span class="term">
          <code class="option">-m</code>, <code class="option">--dry-run</code>
        </span></dt><dd><p>Runs the build with all task actions disabled.</p></dd><dt><span class="term">
          <code class="option">-n</code>, <code class="option">--dependencies</code>
        </span></dt><dd><p>Show list of all project dependencies.
            </p></dd><dt><span class="term">
          <code class="option">--no-imports</code>
        </span></dt><dd><p>Disable usage of default imports for build script files. See
                <a class="xref" href="#sec:using_gradle_without_ide_support" title="C.3.&nbsp;Using Gradle without IDE support">Section&nbsp;C.3, &ldquo;Using Gradle without IDE support&rdquo;</a> for details.
            </p></dd><dt><span class="term">
          <code class="option">-p</code>, <code class="option">--project-dir</code>
        </span></dt><dd><p>Specifies the start directory for Gradle. Defaults to current directory.
            </p></dd><dt><span class="term">
          <code class="option">-q</code>, <code class="option">--quiet</code>
        </span></dt><dd><p>Log errors only. See <a class="xref" href="#logging" title="Chapter&nbsp;15.&nbsp;Logging">Chapter&nbsp;15, <i>Logging</i></a>.</p></dd><dt><span class="term">
          <code class="option">-r</code>, <code class="option">--properties</code>
        </span></dt><dd><p>Show list of all available project properties.</p></dd><dt><span class="term">
          <code class="option">-s</code>, <code class="option">--stacktrace</code>
        </span></dt><dd><p>Print out the stacktrace also for user exceptions (e.g. compile error). See <a class="xref" href="#logging" title="Chapter&nbsp;15.&nbsp;Logging">Chapter&nbsp;15, <i>Logging</i></a>.
            </p></dd><dt><span class="term">
          <code class="option">-t</code>, <code class="option">--tasks</code>
        </span></dt><dd><p>Show list of all available tasks and their dependencies.
            </p></dd><dt><span class="term">
          <code class="option">-u</code>, <code class="option">--no-search-upwards</code>
        </span></dt><dd><p>Don't search in parent folders for a <code class="filename">settings.gradle</code> file.
            </p></dd><dt><span class="term">
          <code class="option">-v</code>, <code class="option">--version</code>
        </span></dt><dd><p>Prints version info.
            </p></dd><dt><span class="term">
          <code class="option">-x</code>, <code class="option">--exclude-task</code>
        </span></dt><dd><p>Specifies a task to be excluded from execution.
            </p></dd></dl></div><p>The same information is printed to the console when you execute <strong class="userinput"><code>gradle -h</code></strong>.</p></div><div class="appendix" title="Appendix&nbsp;C.&nbsp;Existing IDE Support and how to cope without it"><div class="titlepage"><div><div><h1><a name="ide_support"></a>Appendix&nbsp;C.&nbsp;Existing IDE Support and how to cope without it</h1></div></div></div><div class="section" title="C.1.&nbsp;IntelliJ"><div class="titlepage"><div><div><h2 class="title"><a name="sec:intellij"></a>C.1.&nbsp;IntelliJ</h2></div></div></div><p>Gradle has been mainly developed with Idea IntelliJ and its very good Groovy plugin. Gradle's build script
            <sup>[<a href="#ftn.N13D0D" name="N13D0D" class="footnote">36</a>]</sup>
            has also been developed with the support of this IDE. IntelliJ allows you to define any filepattern to be
            interpreted as a Groovy script. In the case of Gradle you can define such a pattern for
            <code class="filename">build.gradle</code>
            and <code class="filename">settings.gradle</code>. This will already help very much. What is missing is the classpath
            to the Gradle binaries to offer content assistance for the Gradle classes. You might add the Gradle jar
            (which you can find in your distribution) to your project's classpath. It does not really belong there, but
            if you do this you have a fantastic IDE support for developing Gradle scripts. Of course if you use
            additional libraries for your build scripts they would further pollute your project classpath.
        </p><p>We hope that in the future <code class="filename">*.gradle</code> files
            get special treatment by IntelliJ and you will be able to define a specific classpath for them.
        </p></div><div class="section" title="C.2.&nbsp;Eclipse"><div class="titlepage"><div><div><h2 class="title"><a name="N13D1C"></a>C.2.&nbsp;Eclipse</h2></div></div></div><p>There is a Groovy plugin for eclipse. We don't know in what state it is and how it would support Gradle.
            In the next edition of this user guide we can hopefully write more about this.
        </p></div><div class="section" title="C.3.&nbsp;Using Gradle without IDE support"><div class="titlepage"><div><div><h2 class="title"><a name="sec:using_gradle_without_ide_support"></a>C.3.&nbsp;Using Gradle without IDE support</h2></div></div></div><p>What we can do for you is to spare you typing things like
            <code class="literal">throw new org.gradle.api.tasks.StopExecutionException()</code>
            and just type
            <code class="literal">throw new StopExecutionException()</code>
            instead. We do this by automatically adding a set of import statements to the Gradle scripts before Gradle
            executes them. This set is defined by a properties file
            <code class="literal">gradle-imports</code>
            in the Gradle distribution. It has the following content.
        </p><div class="figure"><a name="N13D30"></a><p class="title"><b>Figure&nbsp;C.1.&nbsp;gradle-imports</b></p><div class="figure-contents"><pre class="programlisting">import org.gradle.*
import org.gradle.util.*
import org.gradle.api.*
import org.gradle.api.artifacts.*
import org.gradle.api.artifacts.dsl.*
import org.gradle.api.artifacts.specs.*
import org.gradle.api.dependencies.*
import org.gradle.api.execution.*
import org.gradle.api.file.*
import org.gradle.api.logging.*
import org.gradle.api.initialization.*
import org.gradle.api.invocation.*
import org.gradle.api.plugins.*
import org.gradle.api.plugins.quality.*
import org.gradle.api.specs.*
import org.gradle.api.tasks.*
import org.gradle.api.tasks.bundling.*
import org.gradle.api.tasks.compile.*
import org.gradle.api.tasks.javadoc.*
import org.gradle.api.tasks.testing.*
import org.gradle.api.tasks.util.*
import org.gradle.api.tasks.wrapper.*</pre></div></div><br class="figure-break"><p>You can define a project specific set of imports to be added to your build scripts. Just place a file
            called
            <code class="literal">gradle-imports</code>
            in your root project directory. If you start Gradle with the {-I} option, the imports defined in the Gradle
            distribution are disabled. The imports defined in your project directory are always used.
        </p></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N13D0D" name="ftn.N13D0D" class="para">36</a>] </sup>Gradle is built with Gradle
                </p></div></div></div></div></body></html>